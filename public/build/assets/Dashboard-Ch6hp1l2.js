import{h as Ot,o as d,c as u,a as t,t as x,f as ae,v as ce,b as ue,u as Y,e as we,n as j,g as ge,i as h,F as J,j as ee,k as Xe,l as ln,m as R,p as ke,q as wt,s as We,x as dn,d as Ee,y as Rt,w as Le,T as Ue,z as Ze,A as un,B as $e,C as Wt,D as cn,E as pn,r as fn,G as gn}from"./app-CUSeBK6M.js";import{u as Ut}from"./workspace-8knUL_OS.js";import{_ as tt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const vn=o=>{for(const i in o)if(i.startsWith("aria-")||i==="role"||i==="title")return!0;return!1};const Yt=o=>o==="";const mn=(...o)=>o.filter((i,e,b)=>!!i&&i.trim()!==""&&b.indexOf(i)===e).join(" ").trim();const Lt=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const hn=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,e,b)=>b?b.toUpperCase():e.toLowerCase());const bn=o=>{const i=hn(o);return i.charAt(0).toUpperCase()+i.slice(1)};var it={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const xn=({name:o,iconNode:i,absoluteStrokeWidth:e,"absolute-stroke-width":b,strokeWidth:D,"stroke-width":f,size:T=it.width,color:H=it.stroke,...g},{slots:Q})=>Ot("svg",{...it,...g,width:T,height:T,stroke:H,"stroke-width":Yt(e)||Yt(b)||e===!0||b===!0?Number(D||f||it["stroke-width"])*24/Number(T):D||f||it["stroke-width"],class:mn("lucide",g.class,...o?[`lucide-${Lt(bn(o))}-icon`,`lucide-${Lt(o)}`]:["lucide-icon"]),...!Q.default&&!vn(g)&&{"aria-hidden":"true"}},[...i.map(B=>Ot(...B)),...Q.default?[Q.default()]:[]]);const nt=(o,i)=>(e,{slots:b,attrs:D})=>Ot(xn,{...D,...e,iconNode:i,name:o},b);const Ht=nt("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const wn=nt("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);const kn=nt("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const yn=nt("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const Et=nt("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const _n=nt("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Dn={key:0,class:"fixed inset-0 bg-slate-900/90 backdrop-blur-xl flex items-center justify-center p-4 z-[200]"},Cn={class:"bg-white dark:bg-slate-900 rounded-[3rem] shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col border border-slate-200 dark:border-slate-800 animate-in zoom-in-95 duration-200"},Mn={class:"p-8 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between bg-slate-50/50 dark:bg-slate-800/50"},$n={class:"flex items-center gap-4"},Tn={class:"text-sm font-bold text-slate-500 uppercase tracking-widest"},Sn={class:"flex-1 overflow-y-auto p-8 space-y-8 scrollbar-thin scrollbar-thumb-slate-200 dark:scrollbar-thumb-slate-800"},En={class:"space-y-3"},In={class:"space-y-6"},An={class:"flex items-center justify-between px-1"},Fn={class:"relative w-20 h-20 flex items-center justify-center"},jn={key:0,class:"w-20 h-20 rounded-3xl bg-slate-100 dark:bg-slate-800 text-slate-400 group-hover:text-emerald-500 group-hover:bg-emerald-50 dark:group-hover:bg-emerald-500/10 transition-all flex items-center justify-center duration-500"},Pn={key:1,class:"w-20 h-20 rounded-3xl bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center text-emerald-600"},On={key:2,class:"w-20 h-20 rounded-3xl bg-emerald-500 text-white flex items-center justify-center shadow-lg shadow-emerald-500/20 animate-in zoom-in duration-300"},Nn={class:"space-y-1"},Yn={key:0,class:"text-sm font-black text-slate-700 dark:text-slate-200 uppercase tracking-tight"},Ln={key:1,class:"text-sm font-black text-emerald-600 uppercase tracking-widest animate-pulse"},Hn={key:2,class:"text-sm font-black text-emerald-600 uppercase tracking-widest"},Vn={key:3,class:"text-[10px] font-bold text-slate-400 uppercase tracking-widest"},Bn={key:0,class:"space-y-3 animate-in fade-in slide-in-from-bottom-2 duration-500"},Rn={class:"flex-1 space-y-2"},Wn={class:"flex items-center justify-between"},Un={class:"text-base font-black text-slate-800 dark:text-white leading-tight truncate max-w-[250px]"},zn=["onClick"],Kn={class:"space-y-3"},Gn={key:0,class:"relative"},Jn=["onUpdate:modelValue"],qn=["onUpdate:modelValue"],Xn={class:"p-8 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50 flex gap-4"},Zn=["disabled"],Qn={__name:"TaskDeliveryModal",props:{show:Boolean,task:Object},emits:["close","delivered"],setup(o,{emit:i}){const e=o,b=i,D=R(""),f=R([]),T=R(!1),H=R(!1),g=R("idle"),Q=W=>{switch(W){case"link":return{icon:Et,bg:"bg-indigo-500"};case"image":return{icon:yn,bg:"bg-rose-500"};default:return{icon:kn,bg:"bg-indigo-600"}}},B=W=>{f.value.unshift({type:W,name:"Project Link",content:"",description:""})},G=W=>{f.value.splice(W,1)},P=()=>{H.value=!0},I=()=>{H.value=!1},V=W=>{H.value=!1;const k=W.dataTransfer.files;k.length>0&&oe(k)},w=W=>{const k=W.target.files;k.length>0&&oe(k)},oe=async W=>{g.value="uploading";let k=0;for(const y of W){const M=new FormData;M.append("file",y);try{const O=await ke.post("/api/delivery-upload",M);f.value.unshift({type:y.type.startsWith("image/")?"image":"file",name:y.name,content:O.data.path,description:""}),k++}catch(O){console.error("Failed to upload file",y.name,O);const q=O.response?.data?.message||O.message||"Unknown error";alert(`Failed to upload ${y.name}: ${q}`)}}k>0?(g.value="success",setTimeout(()=>{g.value="idle"},2e3)):g.value="idle"},ie=async()=>{if(f.value.length!==0)try{T.value=!0,await ke.post(`/api/tasks/${e.task.id}/deliver`,{notes:D.value,items:f.value}),b("delivered"),b("close")}catch(W){alert(W.response?.data?.message||"Failed to deliver task")}finally{T.value=!1}};return(W,k)=>o.show?(d(),u("div",Dn,[t("div",Cn,[t("div",Mn,[t("div",$n,[k[6]||(k[6]=t("div",{class:"w-12 h-12 rounded-2xl bg-emerald-500 flex items-center justify-center text-white shadow-lg shadow-emerald-500/20"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-7 h-7",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t("polyline",{points:"22 4 12 14.01 9 11.01"})])],-1)),t("div",null,[k[5]||(k[5]=t("h2",{class:"text-2xl font-black text-slate-800 dark:text-white leading-tight uppercase tracking-tight"},"Deliver Task",-1)),t("p",Tn,x(o.task.title),1)])]),t("button",{onClick:k[0]||(k[0]=y=>W.$emit("close")),class:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors"},[...k[7]||(k[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M18 6 6 18"}),t("path",{d:"m6 6 12 12"})],-1)])])]),t("div",Sn,[t("div",En,[k[8]||(k[8]=t("label",{for:"delivery-notes",class:"block text-[12px] font-black uppercase tracking-widest text-slate-400 px-1"},"Delivery Notes / Summary",-1)),ae(t("textarea",{id:"delivery-notes","onUpdate:modelValue":k[1]||(k[1]=y=>D.value=y),placeholder:"Summarize what was done, any considerations, and next steps...",class:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-3xl px-6 py-5 outline-none focus:ring-4 focus:ring-emerald-500/10 focus:border-emerald-500 transition-all font-medium text-sm min-h-[120px]"},null,512),[[ce,D.value]])]),t("div",In,[t("div",An,[k[10]||(k[10]=t("label",{class:"text-[12px] font-black uppercase tracking-widest text-slate-400"},"Delivery Outputs",-1)),t("button",{onClick:k[2]||(k[2]=y=>B("link")),class:"text-[10px] font-black uppercase tracking-widest text-indigo-600 hover:text-indigo-700 flex items-center gap-1.5 transition-colors"},[ue(Y(Et),{class:"w-3 h-3"}),k[9]||(k[9]=we(" Add External Link ",-1))])]),t("div",{onDragover:ge(P,["prevent"]),onDragleave:ge(I,["prevent"]),onDrop:ge(V,["prevent"]),onClick:k[3]||(k[3]=y=>W.$refs.fileInput.click()),class:j(["relative border-2 border-dashed rounded-[2.5rem] p-10 transition-all duration-300 cursor-pointer group flex flex-col items-center justify-center gap-4 text-center",H.value?"border-emerald-500 bg-emerald-50/50 dark:bg-emerald-500/10 scale-[0.99]":"border-slate-200 dark:border-slate-800 hover:border-emerald-400 hover:bg-slate-50 dark:hover:bg-slate-800/50",g.value==="success"?"border-emerald-500 bg-emerald-50 dark:bg-emerald-500/5":""])},[t("input",{type:"file",ref:"fileInput",class:"hidden",onChange:w,multiple:""},null,544),t("div",Fn,[g.value==="idle"?(d(),u("div",jn,[ue(Y(wn),{class:"w-10 h-10 animate-bounce-subtle"})])):h("",!0),g.value==="uploading"?(d(),u("div",Pn,[...k[11]||(k[11]=[t("svg",{class:"animate-spin h-10 w-10",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):h("",!0),g.value==="success"?(d(),u("div",On,[ue(Y(Ht),{class:"w-10 h-10"})])):h("",!0)]),t("div",Nn,[g.value==="idle"?(d(),u("p",Yn,x(H.value?"Drop to upload":"Drag & Drop files or click to browse"),1)):h("",!0),g.value==="uploading"?(d(),u("p",Ln," Uploading... ")):h("",!0),g.value==="success"?(d(),u("p",Hn," Upload Complete! ")):h("",!0),g.value==="idle"?(d(),u("p",Vn," Max file size: 30MB ")):h("",!0)])],34),f.value.length>0?(d(),u("div",Bn,[(d(!0),u(J,null,ee(f.value,(y,M)=>(d(),u("div",{key:M,class:"p-5 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-3xl flex items-start gap-4 shadow-sm hover:shadow-md transition-all group"},[t("div",{class:j(["w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 shadow-sm transition-transform duration-300 group-hover:scale-110",Q(y.type).bg])},[(d(),Xe(ln(Q(y.type).icon),{class:"w-6 h-6 text-white"}))],2),t("div",Rn,[t("div",Wn,[t("h4",Un,x(y.name),1),t("button",{onClick:ge(O=>G(M),["stop"]),class:"p-2 text-slate-300 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 rounded-xl transition-all opacity-0 group-hover:opacity-100"},[ue(Y(_n),{class:"w-4 h-4"})],8,zn)]),t("div",Kn,[y.type==="link"?(d(),u("div",Gn,[ue(Y(Et),{class:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400"}),ae(t("input",{"onUpdate:modelValue":O=>y.content=O,placeholder:"Paste your URL here (e.g. Figma, Drive)",class:"w-full bg-slate-50 dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-xl px-9 py-2.5 text-xs font-medium outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500"},null,8,Jn),[[ce,y.content]])])):h("",!0),ae(t("input",{"onUpdate:modelValue":O=>y.description=O,placeholder:"Add a description for this item...",class:"w-full bg-slate-100/30 dark:bg-slate-900/50 border-none rounded-xl px-4 py-2.5 text-[10px] font-bold uppercase tracking-wider outline-none focus:ring-2 focus:ring-emerald-500/10"},null,8,qn),[[ce,y.description]])])])]))),128))])):h("",!0)])]),t("div",Xn,[t("button",{onClick:k[4]||(k[4]=y=>W.$emit("close")),class:"flex-1 px-6 py-4 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-[1.5rem] font-bold hover:bg-slate-100 transition-all border border-slate-200 dark:border-slate-700"},"Cancel"),t("button",{onClick:ie,disabled:T.value||f.value.length===0,class:"flex-[2] px-8 py-4 bg-emerald-600 text-white rounded-[1.5rem] font-black shadow-xl shadow-emerald-500/30 hover:bg-emerald-700 disabled:opacity-50 transition-all uppercase tracking-[0.2em] text-sm flex items-center justify-center gap-3 active:scale-95"},[T.value?h("",!0):(d(),Xe(Y(Ht),{key:0,class:"w-5 h-5"})),we(" "+x(T.value?"Processing...":"Complete Delivery"),1)],8,Zn)])])])):h("",!0)}},zt=tt(Qn,[["__scopeId","data-v-c90ecae5"]]);var It=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Qe={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(o){return typeof console<"u"&&console.warn(o)},getWeek:function(o){var i=new Date(o.getTime());i.setHours(0,0,0,0),i.setDate(i.getDate()+3-(i.getDay()+6)%7);var e=new Date(i.getFullYear(),0,4);return 1+Math.round(((i.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},dt={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(o){var i=o%100;if(i>3&&i<21)return"th";switch(i%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},xe=function(o,i){return i===void 0&&(i=2),("000"+o).slice(i*-1)},Se=function(o){return o===!0?1:0};function Vt(o,i){var e;return function(){var b=this,D=arguments;clearTimeout(e),e=setTimeout(function(){return o.apply(b,D)},i)}}var At=function(o){return o instanceof Array?o:[o]};function ve(o,i,e){if(e===!0)return o.classList.add(i);o.classList.remove(i)}function Z(o,i,e){var b=window.document.createElement(o);return i=i||"",e=e||"",b.className=i,e!==void 0&&(b.textContent=e),b}function mt(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Kt(o,i){if(i(o))return o;if(o.parentNode)return Kt(o.parentNode,i)}function ht(o,i){var e=Z("div","numInputWrapper"),b=Z("input","numInput "+o),D=Z("span","arrowUp"),f=Z("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?b.type="number":(b.type="text",b.pattern="\\d*"),i!==void 0)for(var T in i)b.setAttribute(T,i[T]);return e.appendChild(b),e.appendChild(D),e.appendChild(f),e}function Ce(o){try{if(typeof o.composedPath=="function"){var i=o.composedPath();return i[0]}return o.target}catch{return o.target}}var Ft=function(){},bt=function(o,i,e){return e.months[i?"shorthand":"longhand"][o]},ea={D:Ft,F:function(o,i,e){o.setMonth(e.months.longhand.indexOf(i))},G:function(o,i){o.setHours((o.getHours()>=12?12:0)+parseFloat(i))},H:function(o,i){o.setHours(parseFloat(i))},J:function(o,i){o.setDate(parseFloat(i))},K:function(o,i,e){o.setHours(o.getHours()%12+12*Se(new RegExp(e.amPM[1],"i").test(i)))},M:function(o,i,e){o.setMonth(e.months.shorthand.indexOf(i))},S:function(o,i){o.setSeconds(parseFloat(i))},U:function(o,i){return new Date(parseFloat(i)*1e3)},W:function(o,i,e){var b=parseInt(i),D=new Date(o.getFullYear(),0,2+(b-1)*7,0,0,0,0);return D.setDate(D.getDate()-D.getDay()+e.firstDayOfWeek),D},Y:function(o,i){o.setFullYear(parseFloat(i))},Z:function(o,i){return new Date(i)},d:function(o,i){o.setDate(parseFloat(i))},h:function(o,i){o.setHours((o.getHours()>=12?12:0)+parseFloat(i))},i:function(o,i){o.setMinutes(parseFloat(i))},j:function(o,i){o.setDate(parseFloat(i))},l:Ft,m:function(o,i){o.setMonth(parseFloat(i)-1)},n:function(o,i){o.setMonth(parseFloat(i)-1)},s:function(o,i){o.setSeconds(parseFloat(i))},u:function(o,i){return new Date(parseFloat(i))},w:Ft,y:function(o,i){o.setFullYear(2e3+parseFloat(i))}},Re={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},lt={Z:function(o){return o.toISOString()},D:function(o,i,e){return i.weekdays.shorthand[lt.w(o,i,e)]},F:function(o,i,e){return bt(lt.n(o,i,e)-1,!1,i)},G:function(o,i,e){return xe(lt.h(o,i,e))},H:function(o){return xe(o.getHours())},J:function(o,i){return i.ordinal!==void 0?o.getDate()+i.ordinal(o.getDate()):o.getDate()},K:function(o,i){return i.amPM[Se(o.getHours()>11)]},M:function(o,i){return bt(o.getMonth(),!0,i)},S:function(o){return xe(o.getSeconds())},U:function(o){return o.getTime()/1e3},W:function(o,i,e){return e.getWeek(o)},Y:function(o){return xe(o.getFullYear(),4)},d:function(o){return xe(o.getDate())},h:function(o){return o.getHours()%12?o.getHours()%12:12},i:function(o){return xe(o.getMinutes())},j:function(o){return o.getDate()},l:function(o,i){return i.weekdays.longhand[o.getDay()]},m:function(o){return xe(o.getMonth()+1)},n:function(o){return o.getMonth()+1},s:function(o){return o.getSeconds()},u:function(o){return o.getTime()},w:function(o){return o.getDay()},y:function(o){return String(o.getFullYear()).substring(2)}},Gt=function(o){var i=o.config,e=i===void 0?Qe:i,b=o.l10n,D=b===void 0?dt:b,f=o.isMobile,T=f===void 0?!1:f;return function(H,g,Q){var B=Q||D;return e.formatDate!==void 0&&!T?e.formatDate(H,g,B):g.split("").map(function(G,P,I){return lt[G]&&I[P-1]!=="\\"?lt[G](H,B,e):G!=="\\"?G:""}).join("")}},Nt=function(o){var i=o.config,e=i===void 0?Qe:i,b=o.l10n,D=b===void 0?dt:b;return function(f,T,H,g){if(!(f!==0&&!f)){var Q=g||D,B,G=f;if(f instanceof Date)B=new Date(f.getTime());else if(typeof f!="string"&&f.toFixed!==void 0)B=new Date(f);else if(typeof f=="string"){var P=T||(e||Qe).dateFormat,I=String(f).trim();if(I==="today")B=new Date,H=!0;else if(e&&e.parseDate)B=e.parseDate(f,P);else if(/Z$/.test(I)||/GMT$/.test(I))B=new Date(f);else{for(var V=void 0,w=[],oe=0,ie=0,W="";oe<P.length;oe++){var k=P[oe],y=k==="\\",M=P[oe-1]==="\\"||y;if(Re[k]&&!M){W+=Re[k];var O=new RegExp(W).exec(f);O&&(V=!0)&&w[k!=="Y"?"push":"unshift"]({fn:ea[k],val:O[++ie]})}else y||(W+=".")}B=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),w.forEach(function(q){var le=q.fn,Te=q.val;return B=le(B,Te,Q)||B}),B=V?B:void 0}}if(!(B instanceof Date&&!isNaN(B.getTime()))){e.errorHandler(new Error("Invalid date provided: "+G));return}return H===!0&&B.setHours(0,0,0,0),B}}};function Me(o,i,e){return e===void 0&&(e=!0),e!==!1?new Date(o.getTime()).setHours(0,0,0,0)-new Date(i.getTime()).setHours(0,0,0,0):o.getTime()-i.getTime()}var ta=function(o,i,e){return o>Math.min(i,e)&&o<Math.max(i,e)},jt=function(o,i,e){return o*3600+i*60+e},na=function(o){var i=Math.floor(o/3600),e=(o-i*3600)/60;return[i,e,o-i*3600-e*60]},aa={DAY:864e5};function Pt(o){var i=o.defaultHour,e=o.defaultMinute,b=o.defaultSeconds;if(o.minDate!==void 0){var D=o.minDate.getHours(),f=o.minDate.getMinutes(),T=o.minDate.getSeconds();i<D&&(i=D),i===D&&e<f&&(e=f),i===D&&e===f&&b<T&&(b=o.minDate.getSeconds())}if(o.maxDate!==void 0){var H=o.maxDate.getHours(),g=o.maxDate.getMinutes();i=Math.min(i,H),i===H&&(e=Math.min(g,e)),i===H&&e===g&&(b=o.maxDate.getSeconds())}return{hours:i,minutes:e,seconds:b}}typeof Object.assign!="function"&&(Object.assign=function(o){for(var i=[],e=1;e<arguments.length;e++)i[e-1]=arguments[e];if(!o)throw TypeError("Cannot convert undefined or null to object");for(var b=function(H){H&&Object.keys(H).forEach(function(g){return o[g]=H[g]})},D=0,f=i;D<f.length;D++){var T=f[D];b(T)}return o});var fe=function(){return fe=Object.assign||function(o){for(var i,e=1,b=arguments.length;e<b;e++){i=arguments[e];for(var D in i)Object.prototype.hasOwnProperty.call(i,D)&&(o[D]=i[D])}return o},fe.apply(this,arguments)},Bt=function(){for(var o=0,i=0,e=arguments.length;i<e;i++)o+=arguments[i].length;for(var b=Array(o),D=0,i=0;i<e;i++)for(var f=arguments[i],T=0,H=f.length;T<H;T++,D++)b[D]=f[T];return b},sa=300;function oa(o,i){var e={config:fe(fe({},Qe),de.defaultConfig),l10n:dt};e.parseDate=Nt({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=w,e._setHoursFromDate=P,e._positionCalendar=Ge,e.changeMonth=ze,e.changeYear=me,e.clear=ct,e.close=pt,e.onMouseOver=Ve,e._createElement=Z,e.createDay=O,e.destroy=ft,e.isEnabled=je,e.jumpToDate=W,e.updateValue=Oe,e.open=yt,e.redraw=gt,e.set=m,e.setDate=N,e.toggle=ot;function b(){e.utils={getDaysInMonth:function(n,s){return n===void 0&&(n=e.currentMonth),s===void 0&&(s=e.currentYear),n===1&&(s%4===0&&s%100!==0||s%400===0)?29:e.l10n.daysInMonth[n]}}}function D(){e.element=e.input=o,e.isOpen=!1,_t(),be(),v(),K(),b(),e.isMobile||M(),ie(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&P(e.config.noCalendar?e.latestSelectedDateObj:void 0),Oe(!1)),H();var n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&n&&Ge(),se("onReady")}function f(){var n;return((n=e.calendarContainer)===null||n===void 0?void 0:n.getRootNode()).activeElement||document.activeElement}function T(n){return n.bind(e)}function H(){var n=e.config;n.weekNumbers===!1&&n.showMonths===1||n.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var s=(e.days.offsetWidth+1)*n.showMonths;e.daysContainer.style.width=s+"px",e.calendarContainer.style.width=s+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function g(n){if(e.selectedDates.length===0){var s=e.config.minDate===void 0||Me(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),l=Pt(e.config);s.setHours(l.hours,l.minutes,l.seconds,s.getMilliseconds()),e.selectedDates=[s],e.latestSelectedDateObj=s}n!==void 0&&n.type!=="blur"&&Xt(n);var p=e._input.value;G(),Oe(),e._input.value!==p&&e._debouncedChange()}function Q(n,s){return n%12+12*Se(s===e.l10n.amPM[1])}function B(n){switch(n%24){case 0:case 12:return 12;default:return n%12}}function G(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var n=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,s=(parseInt(e.minuteElement.value,10)||0)%60,l=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(n=Q(n,e.amPM.textContent));var p=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&Me(e.latestSelectedDateObj,e.config.minDate,!0)===0,_=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&Me(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var $=jt(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),U=jt(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),A=jt(n,s,l);if(A>U&&A<$){var z=na($);n=z[0],s=z[1],l=z[2]}}else{if(_){var E=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;n=Math.min(n,E.getHours()),n===E.getHours()&&(s=Math.min(s,E.getMinutes())),s===E.getMinutes()&&(l=Math.min(l,E.getSeconds()))}if(p){var L=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;n=Math.max(n,L.getHours()),n===L.getHours()&&s<L.getMinutes()&&(s=L.getMinutes()),s===L.getMinutes()&&(l=Math.max(l,L.getSeconds()))}}I(n,s,l)}}function P(n){var s=n||e.latestSelectedDateObj;s&&s instanceof Date&&I(s.getHours(),s.getMinutes(),s.getSeconds())}function I(n,s,l){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(n%24,s,l||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=xe(e.config.time_24hr?n:(12+n)%12+12*Se(n%12===0)),e.minuteElement.value=xe(s),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[Se(n>=12)]),e.secondElement!==void 0&&(e.secondElement.value=xe(l)))}function V(n){var s=Ce(n),l=parseInt(s.value)+(n.delta||0);(l/1e3>1||n.key==="Enter"&&!/[^\d]/.test(l.toString()))&&me(l)}function w(n,s,l,p){if(s instanceof Array)return s.forEach(function(_){return w(n,_,l,p)});if(n instanceof Array)return n.forEach(function(_){return w(_,s,l,p)});n.addEventListener(s,l,p),e._handlers.push({remove:function(){return n.removeEventListener(s,l,p)}})}function oe(){se("onChange")}function ie(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(l){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+l+"]"),function(p){return w(p,"click",e[l])})}),e.isMobile){Ye();return}var n=Vt(Pe,50);if(e._debouncedChange=Vt(oe,sa),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&w(e.daysContainer,"mouseover",function(l){e.config.mode==="range"&&Ve(Ce(l))}),w(e._input,"keydown",at),e.calendarContainer!==void 0&&w(e.calendarContainer,"keydown",at),!e.config.inline&&!e.config.static&&w(window,"resize",n),window.ontouchstart!==void 0?w(window.document,"touchstart",X):w(window.document,"mousedown",X),w(window.document,"focus",X,{capture:!0}),e.config.clickOpens===!0&&(w(e._input,"focus",e.open),w(e._input,"click",e.open)),e.daysContainer!==void 0&&(w(e.monthNav,"click",qt),w(e.monthNav,["keyup","increment"],V),w(e.daysContainer,"click",Je)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var s=function(l){return Ce(l).select()};w(e.timeContainer,["increment"],g),w(e.timeContainer,"blur",g,{capture:!0}),w(e.timeContainer,"click",k),w([e.hourElement,e.minuteElement],["focus","click"],s),e.secondElement!==void 0&&w(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&w(e.amPM,"click",function(l){g(l)})}e.config.allowInput&&w(e._input,"blur",F)}function W(n,s){var l=n!==void 0?e.parseDate(n):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),p=e.currentYear,_=e.currentMonth;try{l!==void 0&&(e.currentYear=l.getFullYear(),e.currentMonth=l.getMonth())}catch($){$.message="Invalid date supplied: "+l,e.config.errorHandler($)}s&&e.currentYear!==p&&(se("onYearChange"),C()),s&&(e.currentYear!==p||e.currentMonth!==_)&&se("onMonthChange"),e.redraw()}function k(n){var s=Ce(n);~s.className.indexOf("arrow")&&y(n,s.classList.contains("arrowUp")?1:-1)}function y(n,s,l){var p=n&&Ce(n),_=l||p&&p.parentNode&&p.parentNode.firstChild,$=Mt("increment");$.delta=s,_&&_.dispatchEvent($)}function M(){var n=window.document.createDocumentFragment();if(e.calendarContainer=Z("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(n.appendChild(ye()),e.innerContainer=Z("div","flatpickr-innerContainer"),e.config.weekNumbers){var s=kt(),l=s.weekWrapper,p=s.weekNumbers;e.innerContainer.appendChild(l),e.weekNumbers=p,e.weekWrapper=l}e.rContainer=Z("div","flatpickr-rContainer"),e.rContainer.appendChild(Fe()),e.daysContainer||(e.daysContainer=Z("div","flatpickr-days"),e.daysContainer.tabIndex=-1),c(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),n.appendChild(e.innerContainer)}e.config.enableTime&&n.appendChild(_e()),ve(e.calendarContainer,"rangeMode",e.config.mode==="range"),ve(e.calendarContainer,"animate",e.config.animate===!0),ve(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(n);var _=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!_&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var $=Z("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore($,e.element),$.appendChild(e.element),e.altInput&&$.appendChild(e.altInput),$.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function O(n,s,l,p){var _=je(s,!0),$=Z("span",n,s.getDate().toString());return $.dateObj=s,$.$i=p,$.setAttribute("aria-label",e.formatDate(s,e.config.ariaDateFormat)),n.indexOf("hidden")===-1&&Me(s,e.now)===0&&(e.todayDateElem=$,$.classList.add("today"),$.setAttribute("aria-current","date")),_?($.tabIndex=-1,$t(s)&&($.classList.add("selected"),e.selectedDateElem=$,e.config.mode==="range"&&(ve($,"startRange",e.selectedDates[0]&&Me(s,e.selectedDates[0],!0)===0),ve($,"endRange",e.selectedDates[1]&&Me(s,e.selectedDates[1],!0)===0),n==="nextMonthDay"&&$.classList.add("inRange")))):$.classList.add("flatpickr-disabled"),e.config.mode==="range"&&Jt(s)&&!$t(s)&&$.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&n!=="prevMonthDay"&&p%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(s)+"</span>"),se("onDayCreate",$),$}function q(n){n.focus(),e.config.mode==="range"&&Ve(n)}function le(n){for(var s=n>0?0:e.config.showMonths-1,l=n>0?e.config.showMonths:-1,p=s;p!=l;p+=n)for(var _=e.daysContainer.children[p],$=n>0?0:_.children.length-1,U=n>0?_.children.length:-1,A=$;A!=U;A+=n){var z=_.children[A];if(z.className.indexOf("hidden")===-1&&je(z.dateObj))return z}}function Te(n,s){for(var l=n.className.indexOf("Month")===-1?n.dateObj.getMonth():e.currentMonth,p=s>0?e.config.showMonths:-1,_=s>0?1:-1,$=l-e.currentMonth;$!=p;$+=_)for(var U=e.daysContainer.children[$],A=l-e.currentMonth===$?n.$i+s:s<0?U.children.length-1:0,z=U.children.length,E=A;E>=0&&E<z&&E!=(s>0?z:-1);E+=_){var L=U.children[E];if(L.className.indexOf("hidden")===-1&&je(L.dateObj)&&Math.abs(n.$i-E)>=Math.abs(s))return q(L)}e.changeMonth(_),pe(le(_),0)}function pe(n,s){var l=f(),p=Ke(l||document.body),_=n!==void 0?n:p?l:e.selectedDateElem!==void 0&&Ke(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Ke(e.todayDateElem)?e.todayDateElem:le(s>0?1:-1);_===void 0?e._input.focus():p?Te(_,s):q(_)}function S(n,s){for(var l=(new Date(n,s,1).getDay()-e.l10n.firstDayOfWeek+7)%7,p=e.utils.getDaysInMonth((s-1+12)%12,n),_=e.utils.getDaysInMonth(s,n),$=window.document.createDocumentFragment(),U=e.config.showMonths>1,A=U?"prevMonthDay hidden":"prevMonthDay",z=U?"nextMonthDay hidden":"nextMonthDay",E=p+1-l,L=0;E<=p;E++,L++)$.appendChild(O("flatpickr-day "+A,new Date(n,s-1,E),E,L));for(E=1;E<=_;E++,L++)$.appendChild(O("flatpickr-day",new Date(n,s,E),E,L));for(var ne=_+1;ne<=42-l&&(e.config.showMonths===1||L%7!==0);ne++,L++)$.appendChild(O("flatpickr-day "+z,new Date(n,s+1,ne%_),ne,L));var Ie=Z("div","dayContainer");return Ie.appendChild($),Ie}function c(){if(e.daysContainer!==void 0){mt(e.daysContainer),e.weekNumbers&&mt(e.weekNumbers);for(var n=document.createDocumentFragment(),s=0;s<e.config.showMonths;s++){var l=new Date(e.currentYear,e.currentMonth,1);l.setMonth(e.currentMonth+s),n.appendChild(S(l.getFullYear(),l.getMonth()))}e.daysContainer.appendChild(n),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Ve()}}function C(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var n=function(p){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&p<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&p>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var s=0;s<12;s++)if(n(s)){var l=Z("option","flatpickr-monthDropdown-month");l.value=new Date(e.currentYear,s).getMonth().toString(),l.textContent=bt(s,e.config.shorthandCurrentMonth,e.l10n),l.tabIndex=-1,e.currentMonth===s&&(l.selected=!0),e.monthsDropdownContainer.appendChild(l)}}}function re(){var n=Z("div","flatpickr-month"),s=window.document.createDocumentFragment(),l;e.config.showMonths>1||e.config.monthSelectorType==="static"?l=Z("span","cur-month"):(e.monthsDropdownContainer=Z("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),w(e.monthsDropdownContainer,"change",function(U){var A=Ce(U),z=parseInt(A.value,10);e.changeMonth(z-e.currentMonth),se("onMonthChange")}),C(),l=e.monthsDropdownContainer);var p=ht("cur-year",{tabindex:"-1"}),_=p.getElementsByTagName("input")[0];_.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&_.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(_.setAttribute("max",e.config.maxDate.getFullYear().toString()),_.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var $=Z("div","flatpickr-current-month");return $.appendChild(l),$.appendChild(p),s.appendChild($),n.appendChild(s),{container:n,yearElement:_,monthElement:l}}function Ae(){mt(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var n=e.config.showMonths;n--;){var s=re();e.yearElements.push(s.yearElement),e.monthElements.push(s.monthElement),e.monthNav.appendChild(s.container)}e.monthNav.appendChild(e.nextMonthNav)}function ye(){return e.monthNav=Z("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=Z("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=Z("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Ae(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(n){e.__hidePrevMonthArrow!==n&&(ve(e.prevMonthNav,"flatpickr-disabled",n),e.__hidePrevMonthArrow=n)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(n){e.__hideNextMonthArrow!==n&&(ve(e.nextMonthNav,"flatpickr-disabled",n),e.__hideNextMonthArrow=n)}}),e.currentYearElement=e.yearElements[0],vt(),e.monthNav}function _e(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var n=Pt(e.config);e.timeContainer=Z("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var s=Z("span","flatpickr-time-separator",":"),l=ht("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=l.getElementsByTagName("input")[0];var p=ht("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=p.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=xe(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?n.hours:B(n.hours)),e.minuteElement.value=xe(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():n.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(l),e.timeContainer.appendChild(s),e.timeContainer.appendChild(p),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var _=ht("flatpickr-second");e.secondElement=_.getElementsByTagName("input")[0],e.secondElement.value=xe(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():n.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(Z("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(_)}return e.config.time_24hr||(e.amPM=Z("span","flatpickr-am-pm",e.l10n.amPM[Se((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function Fe(){e.weekdayContainer?mt(e.weekdayContainer):e.weekdayContainer=Z("div","flatpickr-weekdays");for(var n=e.config.showMonths;n--;){var s=Z("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(s)}return ut(),e.weekdayContainer}function ut(){if(e.weekdayContainer){var n=e.l10n.firstDayOfWeek,s=Bt(e.l10n.weekdays.shorthand);n>0&&n<s.length&&(s=Bt(s.splice(n,s.length),s.splice(0,n)));for(var l=e.config.showMonths;l--;)e.weekdayContainer.children[l].innerHTML=`
      <span class='flatpickr-weekday'>
        `+s.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function kt(){e.calendarContainer.classList.add("hasWeeks");var n=Z("div","flatpickr-weekwrapper");n.appendChild(Z("span","flatpickr-weekday",e.l10n.weekAbbreviation));var s=Z("div","flatpickr-weeks");return n.appendChild(s),{weekWrapper:n,weekNumbers:s}}function ze(n,s){s===void 0&&(s=!0);var l=s?n:n-e.currentMonth;l<0&&e._hidePrevMonthArrow===!0||l>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=l,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,se("onYearChange"),C()),c(),se("onMonthChange"),vt())}function ct(n,s){if(n===void 0&&(n=!0),s===void 0&&(s=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,s===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var l=Pt(e.config),p=l.hours,_=l.minutes,$=l.seconds;I(p,_,$)}e.redraw(),n&&se("onChange")}function pt(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),se("onClose")}function ft(){e.config!==void 0&&se("onDestroy");for(var n=e._handlers.length;n--;)e._handlers[n].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var s=e.calendarContainer.parentNode;if(s.lastChild&&s.removeChild(s.lastChild),s.parentNode){for(;s.firstChild;)s.parentNode.insertBefore(s.firstChild,s);s.parentNode.removeChild(s)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(l){try{delete e[l]}catch{}})}function He(n){return e.calendarContainer.contains(n)}function X(n){if(e.isOpen&&!e.config.inline){var s=Ce(n),l=He(s),p=s===e.input||s===e.altInput||e.element.contains(s)||n.path&&n.path.indexOf&&(~n.path.indexOf(e.input)||~n.path.indexOf(e.altInput)),_=!p&&!l&&!He(n.relatedTarget),$=!e.config.ignoredFocusElements.some(function(U){return U.contains(s)});_&&$&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&g(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function me(n){if(!(!n||e.config.minDate&&n<e.config.minDate.getFullYear()||e.config.maxDate&&n>e.config.maxDate.getFullYear())){var s=n,l=e.currentYear!==s;e.currentYear=s||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),l&&(e.redraw(),se("onYearChange"),C())}}function je(n,s){var l;s===void 0&&(s=!0);var p=e.parseDate(n,void 0,s);if(e.config.minDate&&p&&Me(p,e.config.minDate,s!==void 0?s:!e.minDateHasTime)<0||e.config.maxDate&&p&&Me(p,e.config.maxDate,s!==void 0?s:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(p===void 0)return!1;for(var _=!!e.config.enable,$=(l=e.config.enable)!==null&&l!==void 0?l:e.config.disable,U=0,A=void 0;U<$.length;U++){if(A=$[U],typeof A=="function"&&A(p))return _;if(A instanceof Date&&p!==void 0&&A.getTime()===p.getTime())return _;if(typeof A=="string"){var z=e.parseDate(A,void 0,!0);return z&&z.getTime()===p.getTime()?_:!_}else if(typeof A=="object"&&p!==void 0&&A.from&&A.to&&p.getTime()>=A.from.getTime()&&p.getTime()<=A.to.getTime())return _}return!_}function Ke(n){return e.daysContainer!==void 0?n.className.indexOf("hidden")===-1&&n.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(n):!1}function F(n){var s=n.target===e._input,l=e._input.value.trimEnd()!==Tt();s&&l&&!(n.relatedTarget&&He(n.relatedTarget))&&e.setDate(e._input.value,!0,n.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function at(n){var s=Ce(n),l=e.config.wrap?o.contains(s):s===e._input,p=e.config.allowInput,_=e.isOpen&&(!p||!l),$=e.config.inline&&l&&!p;if(n.keyCode===13&&l){if(p)return e.setDate(e._input.value,!0,s===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),s.blur();e.open()}else if(He(s)||_||$){var U=!!e.timeContainer&&e.timeContainer.contains(s);switch(n.keyCode){case 13:U?(n.preventDefault(),g(),st()):Je(n);break;case 27:n.preventDefault(),st();break;case 8:case 46:l&&!e.config.allowInput&&(n.preventDefault(),e.clear());break;case 37:case 39:if(!U&&!l){n.preventDefault();var A=f();if(e.daysContainer!==void 0&&(p===!1||A&&Ke(A))){var z=n.keyCode===39?1:-1;n.ctrlKey?(n.stopPropagation(),ze(z),pe(le(1),0)):pe(void 0,z)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:n.preventDefault();var E=n.keyCode===40?1:-1;e.daysContainer&&s.$i!==void 0||s===e.input||s===e.altInput?n.ctrlKey?(n.stopPropagation(),me(e.currentYear-E),pe(le(1),0)):U||pe(void 0,E*7):s===e.currentYearElement?me(e.currentYear-E):e.config.enableTime&&(!U&&e.hourElement&&e.hourElement.focus(),g(n),e._debouncedChange());break;case 9:if(U){var L=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(De){return De}),ne=L.indexOf(s);if(ne!==-1){var Ie=L[ne+(n.shiftKey?-1:1)];n.preventDefault(),(Ie||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(s)&&n.shiftKey&&(n.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&s===e.amPM)switch(n.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],G(),Oe();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],G(),Oe();break}(l||He(s))&&se("onKeyDown",n)}function Ve(n,s){if(s===void 0&&(s="flatpickr-day"),!(e.selectedDates.length!==1||n&&(!n.classList.contains(s)||n.classList.contains("flatpickr-disabled")))){for(var l=n?n.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),p=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),_=Math.min(l,e.selectedDates[0].getTime()),$=Math.max(l,e.selectedDates[0].getTime()),U=!1,A=0,z=0,E=_;E<$;E+=aa.DAY)je(new Date(E),!0)||(U=U||E>_&&E<$,E<p&&(!A||E>A)?A=E:E>p&&(!z||E<z)&&(z=E));var L=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+s));L.forEach(function(ne){var Ie=ne.dateObj,De=Ie.getTime(),rt=A>0&&De<A||z>0&&De>z;if(rt){ne.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(qe){ne.classList.remove(qe)});return}else if(U&&!rt)return;["startRange","inRange","endRange","notAllowed"].forEach(function(qe){ne.classList.remove(qe)}),n!==void 0&&(n.classList.add(l<=e.selectedDates[0].getTime()?"startRange":"endRange"),p<l&&De===p?ne.classList.add("startRange"):p>l&&De===p&&ne.classList.add("endRange"),De>=A&&(z===0||De<=z)&&ta(De,p,l)&&ne.classList.add("inRange"))})}}function Pe(){e.isOpen&&!e.config.static&&!e.config.inline&&Ge()}function yt(n,s){if(s===void 0&&(s=e._positionElement),e.isMobile===!0){if(n){n.preventDefault();var l=Ce(n);l&&l.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),se("onOpen");return}else if(e._input.disabled||e.config.inline)return;var p=e.isOpen;e.isOpen=!0,p||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),se("onOpen"),Ge(s)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(n===void 0||!e.timeContainer.contains(n.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function he(n){return function(s){var l=e.config["_"+n+"Date"]=e.parseDate(s,e.config.dateFormat),p=e.config["_"+(n==="min"?"max":"min")+"Date"];l!==void 0&&(e[n==="min"?"minDateHasTime":"maxDateHasTime"]=l.getHours()>0||l.getMinutes()>0||l.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(_){return je(_)}),!e.selectedDates.length&&n==="min"&&P(l),Oe()),e.daysContainer&&(gt(),l!==void 0?e.currentYearElement[n]=l.getFullYear().toString():e.currentYearElement.removeAttribute(n),e.currentYearElement.disabled=!!p&&l!==void 0&&p.getFullYear()===l.getFullYear())}}function _t(){var n=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],s=fe(fe({},JSON.parse(JSON.stringify(o.dataset||{}))),i),l={};e.config.parseDate=s.parseDate,e.config.formatDate=s.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(L){e.config._enable=r(L)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(L){e.config._disable=r(L)}});var p=s.mode==="time";if(!s.dateFormat&&(s.enableTime||p)){var _=de.defaultConfig.dateFormat||Qe.dateFormat;l.dateFormat=s.noCalendar||p?"H:i"+(s.enableSeconds?":S":""):_+" H:i"+(s.enableSeconds?":S":"")}if(s.altInput&&(s.enableTime||p)&&!s.altFormat){var $=de.defaultConfig.altFormat||Qe.altFormat;l.altFormat=s.noCalendar||p?"h:i"+(s.enableSeconds?":S K":" K"):$+(" h:i"+(s.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:he("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:he("max")});var U=function(L){return function(ne){e.config[L==="min"?"_minTime":"_maxTime"]=e.parseDate(ne,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:U("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:U("max")}),s.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,l,s);for(var A=0;A<n.length;A++)e.config[n[A]]=e.config[n[A]]===!0||e.config[n[A]]==="true";It.filter(function(L){return e.config[L]!==void 0}).forEach(function(L){e.config[L]=At(e.config[L]||[]).map(T)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var A=0;A<e.config.plugins.length;A++){var z=e.config.plugins[A](e)||{};for(var E in z)It.indexOf(E)>-1?e.config[E]=At(z[E]).map(T).concat(e.config[E]):typeof s[E]>"u"&&(e.config[E]=z[E])}s.altInputClass||(e.config.altInputClass=Be().className+" "+e.config.altInputClass),se("onParseConfig")}function Be(){return e.config.wrap?o.querySelector("[data-input]"):o}function be(){typeof e.config.locale!="object"&&typeof de.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=fe(fe({},de.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?de.l10ns[e.config.locale]:void 0),Re.D="("+e.l10n.weekdays.shorthand.join("|")+")",Re.l="("+e.l10n.weekdays.longhand.join("|")+")",Re.M="("+e.l10n.months.shorthand.join("|")+")",Re.F="("+e.l10n.months.longhand.join("|")+")",Re.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var n=fe(fe({},i),JSON.parse(JSON.stringify(o.dataset||{})));n.time_24hr===void 0&&de.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=Gt(e),e.parseDate=Nt({config:e.config,l10n:e.l10n})}function Ge(n){if(typeof e.config.position=="function")return void e.config.position(e,n);if(e.calendarContainer!==void 0){se("onPreCalendarPosition");var s=n||e._positionElement,l=Array.prototype.reduce.call(e.calendarContainer.children,(function(on,rn){return on+rn.offsetHeight}),0),p=e.calendarContainer.offsetWidth,_=e.config.position.split(" "),$=_[0],U=_.length>1?_[1]:null,A=s.getBoundingClientRect(),z=window.innerHeight-A.bottom,E=$==="above"||$!=="below"&&z<l&&A.top>l,L=window.pageYOffset+A.top+(E?-l-2:s.offsetHeight+2);if(ve(e.calendarContainer,"arrowTop",!E),ve(e.calendarContainer,"arrowBottom",E),!e.config.inline){var ne=window.pageXOffset+A.left,Ie=!1,De=!1;U==="center"?(ne-=(p-A.width)/2,Ie=!0):U==="right"&&(ne-=p-A.width,De=!0),ve(e.calendarContainer,"arrowLeft",!Ie&&!De),ve(e.calendarContainer,"arrowCenter",Ie),ve(e.calendarContainer,"arrowRight",De);var rt=window.document.body.offsetWidth-(window.pageXOffset+A.right),qe=ne+p>window.document.body.offsetWidth,Zt=rt+p>window.document.body.offsetWidth;if(ve(e.calendarContainer,"rightMost",qe),!e.config.static)if(e.calendarContainer.style.top=L+"px",!qe)e.calendarContainer.style.left=ne+"px",e.calendarContainer.style.right="auto";else if(!Zt)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=rt+"px";else{var St=Dt();if(St===void 0)return;var Qt=window.document.body.offsetWidth,en=Math.max(0,Qt/2-p/2),tn=".flatpickr-calendar.centerMost:before",nn=".flatpickr-calendar.centerMost:after",an=St.cssRules.length,sn="{left:"+A.left+"px;right:auto;}";ve(e.calendarContainer,"rightMost",!1),ve(e.calendarContainer,"centerMost",!0),St.insertRule(tn+","+nn+sn,an),e.calendarContainer.style.left=en+"px",e.calendarContainer.style.right="auto"}}}}function Dt(){for(var n=null,s=0;s<document.styleSheets.length;s++){var l=document.styleSheets[s];if(l.cssRules){try{l.cssRules}catch{continue}n=l;break}}return n??Ct()}function Ct(){var n=document.createElement("style");return document.head.appendChild(n),n.sheet}function gt(){e.config.noCalendar||e.isMobile||(C(),vt(),c())}function st(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function Je(n){n.preventDefault(),n.stopPropagation();var s=function(L){return L.classList&&L.classList.contains("flatpickr-day")&&!L.classList.contains("flatpickr-disabled")&&!L.classList.contains("notAllowed")},l=Kt(Ce(n),s);if(l!==void 0){var p=l,_=e.latestSelectedDateObj=new Date(p.dateObj.getTime()),$=(_.getMonth()<e.currentMonth||_.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=p,e.config.mode==="single")e.selectedDates=[_];else if(e.config.mode==="multiple"){var U=$t(_);U?e.selectedDates.splice(parseInt(U),1):e.selectedDates.push(_)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=_,e.selectedDates.push(_),Me(_,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(L,ne){return L.getTime()-ne.getTime()}));if(G(),$){var A=e.currentYear!==_.getFullYear();e.currentYear=_.getFullYear(),e.currentMonth=_.getMonth(),A&&(se("onYearChange"),C()),se("onMonthChange")}if(vt(),c(),Oe(),!$&&e.config.mode!=="range"&&e.config.showMonths===1?q(p):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var z=e.config.mode==="single"&&!e.config.enableTime,E=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(z||E)&&st()}oe()}}var Ne={locale:[be,ut],showMonths:[Ae,H,Fe],minDate:[W],maxDate:[W],positionElement:[te],clickOpens:[function(){e.config.clickOpens===!0?(w(e._input,"focus",e.open),w(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function m(n,s){if(n!==null&&typeof n=="object"){Object.assign(e.config,n);for(var l in n)Ne[l]!==void 0&&Ne[l].forEach(function(p){return p()})}else e.config[n]=s,Ne[n]!==void 0?Ne[n].forEach(function(p){return p()}):It.indexOf(n)>-1&&(e.config[n]=At(s));e.redraw(),Oe(!0)}function a(n,s){var l=[];if(n instanceof Array)l=n.map(function(p){return e.parseDate(p,s)});else if(n instanceof Date||typeof n=="number")l=[e.parseDate(n,s)];else if(typeof n=="string")switch(e.config.mode){case"single":case"time":l=[e.parseDate(n,s)];break;case"multiple":l=n.split(e.config.conjunction).map(function(p){return e.parseDate(p,s)});break;case"range":l=n.split(e.l10n.rangeSeparator).map(function(p){return e.parseDate(p,s)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(n)));e.selectedDates=e.config.allowInvalidPreload?l:l.filter(function(p){return p instanceof Date&&je(p,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(p,_){return p.getTime()-_.getTime()})}function N(n,s,l){if(s===void 0&&(s=!1),l===void 0&&(l=e.config.dateFormat),n!==0&&!n||n instanceof Array&&n.length===0)return e.clear(s);a(n,l),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),W(void 0,s),P(),e.selectedDates.length===0&&e.clear(!1),Oe(s),s&&se("onChange")}function r(n){return n.slice().map(function(s){return typeof s=="string"||typeof s=="number"||s instanceof Date?e.parseDate(s,void 0,!0):s&&typeof s=="object"&&s.from&&s.to?{from:e.parseDate(s.from,void 0),to:e.parseDate(s.to,void 0)}:s}).filter(function(s){return s})}function K(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var n=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);n&&a(n,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function v(){if(e.input=Be(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=Z(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),te()}function te(){e._positionElement=e.config.positionElement||e._input}function Ye(){var n=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=Z("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=n,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=n==="datetime-local"?"Y-m-d\\TH:i:S":n==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}w(e.mobileInput,"change",function(s){e.setDate(Ce(s).value,!1,e.mobileFormatStr),se("onChange"),se("onClose")})}function ot(n){if(e.isOpen===!0)return e.close();e.open(n)}function se(n,s){if(e.config!==void 0){var l=e.config[n];if(l!==void 0&&l.length>0)for(var p=0;l[p]&&p<l.length;p++)l[p](e.selectedDates,e.input.value,e,s);n==="onChange"&&(e.input.dispatchEvent(Mt("change")),e.input.dispatchEvent(Mt("input")))}}function Mt(n){var s=document.createEvent("Event");return s.initEvent(n,!0,!0),s}function $t(n){for(var s=0;s<e.selectedDates.length;s++){var l=e.selectedDates[s];if(l instanceof Date&&Me(l,n)===0)return""+s}return!1}function Jt(n){return e.config.mode!=="range"||e.selectedDates.length<2?!1:Me(n,e.selectedDates[0])>=0&&Me(n,e.selectedDates[1])<=0}function vt(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(n,s){var l=new Date(e.currentYear,e.currentMonth,1);l.setMonth(e.currentMonth+s),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[s].textContent=bt(l.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=l.getMonth().toString(),n.value=l.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Tt(n){var s=n||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(l){return e.formatDate(l,s)}).filter(function(l,p,_){return e.config.mode!=="range"||e.config.enableTime||_.indexOf(l)===p}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function Oe(n){n===void 0&&(n=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Tt(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=Tt(e.config.altFormat)),n!==!1&&se("onValueUpdate")}function qt(n){var s=Ce(n),l=e.prevMonthNav.contains(s),p=e.nextMonthNav.contains(s);l||p?ze(l?-1:1):e.yearElements.indexOf(s)>=0?s.select():s.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):s.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function Xt(n){n.preventDefault();var s=n.type==="keydown",l=Ce(n),p=l;e.amPM!==void 0&&l===e.amPM&&(e.amPM.textContent=e.l10n.amPM[Se(e.amPM.textContent===e.l10n.amPM[0])]);var _=parseFloat(p.getAttribute("min")),$=parseFloat(p.getAttribute("max")),U=parseFloat(p.getAttribute("step")),A=parseInt(p.value,10),z=n.delta||(s?n.which===38?1:-1:0),E=A+U*z;if(typeof p.value<"u"&&p.value.length===2){var L=p===e.hourElement,ne=p===e.minuteElement;E<_?(E=$+E+Se(!L)+(Se(L)&&Se(!e.amPM)),ne&&y(void 0,-1,e.hourElement)):E>$&&(E=p===e.hourElement?E-$-Se(!e.amPM):_,ne&&y(void 0,1,e.hourElement)),e.amPM&&L&&(U===1?E+A===23:Math.abs(E-A)>U)&&(e.amPM.textContent=e.l10n.amPM[Se(e.amPM.textContent===e.l10n.amPM[0])]),p.value=xe(E)}}return D(),e}function et(o,i){for(var e=Array.prototype.slice.call(o).filter(function(T){return T instanceof HTMLElement}),b=[],D=0;D<e.length;D++){var f=e[D];try{if(f.getAttribute("data-fp-omit")!==null)continue;f._flatpickr!==void 0&&(f._flatpickr.destroy(),f._flatpickr=void 0),f._flatpickr=oa(f,i||{}),b.push(f._flatpickr)}catch(T){console.error(T)}}return b.length===1?b[0]:b}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(o){return et(this,o)},HTMLElement.prototype.flatpickr=function(o){return et([this],o)});var de=function(o,i){return typeof o=="string"?et(window.document.querySelectorAll(o),i):o instanceof Node?et([o],i):et(o,i)};de.defaultConfig={};de.l10ns={en:fe({},dt),default:fe({},dt)};de.localize=function(o){de.l10ns.default=fe(fe({},de.l10ns.default),o)};de.setDefaults=function(o){de.defaultConfig=fe(fe({},de.defaultConfig),o)};de.parseDate=Nt({});de.formatDate=Gt({});de.compareDates=Me;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(o){return et(this,o)});Date.prototype.fp_incr=function(o){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof o=="string"?parseInt(o,10):o))};typeof window<"u"&&(window.flatpickr=de);const ra={class:"relative w-full group"},ia=["id","name","value","placeholder","disabled"],xt={__name:"CustomDatePicker",props:{id:{type:String,default:null},name:{type:String,default:null},modelValue:{type:String,default:""},placeholder:{type:String,default:"dd/mm/yyyy"},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(o,{emit:i}){const e=o,b=i,D=R(null);let f=null;return wt(()=>{f=de(D.value,{dateFormat:"d/m/Y",allowInput:!0,altInput:!1,defaultDate:e.modelValue,disableMobile:!0,onChange:(T,H)=>{b("update:modelValue",H),b("change",H)}})}),We(()=>e.modelValue,T=>{f&&T!==f.input.value&&f.setDate(T,!1)}),dn(()=>{f&&f.destroy()}),(T,H)=>(d(),u("div",ra,[t("input",{ref_key:"inputRef",ref:D,type:"text",id:o.id,name:o.name,value:o.modelValue,placeholder:o.placeholder,disabled:o.disabled,class:j(["w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-2xl px-5 py-3 outline-none focus:ring-4 focus:ring-indigo-500/20 text-sm font-bold text-slate-600 dark:text-slate-200 transition-all cursor-pointer group-hover:border-slate-300 dark:group-hover:border-slate-600",{"opacity-50 cursor-not-allowed":o.disabled}])},null,10,ia),H[0]||(H[0]=Ee('<div class="absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400"><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg></div>',1))]))}},la={key:0,class:"fixed inset-0 z-[10000] flex justify-end overflow-hidden"},da={key:0,class:"relative w-full max-w-2xl bg-white dark:bg-slate-900 h-full shadow-2xl flex flex-col z-10 drawer-content transition-all duration-300"},ua={key:0,class:"bg-[var(--color-status-done)] text-white px-6 py-2 flex items-center gap-2 justify-center text-xs font-heading font-bold uppercase tracking-[0.3em] relative overflow-hidden group"},ca={class:"flex items-center justify-between p-6 border-b border-slate-100 dark:border-slate-800"},pa={class:"flex items-center gap-4"},fa=["disabled"],ga=["disabled"],va={key:0,value:"testing"},ma={key:0,class:"hidden sm:flex items-center gap-2 px-3 py-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-800 ml-2 transition-all"},ha={class:"flex items-center gap-2"},ba={class:"hidden sm:flex items-center gap-2 mr-4"},xa={class:"text-[10px] font-heading font-bold text-slate-400 uppercase tracking-[0.2em]"},wa={class:"flex-1 overflow-y-auto p-8 space-y-10 custom-scrollbar"},ka=["disabled"],ya=["disabled"],_a={key:0,class:"p-8 bg-slate-50 dark:bg-slate-800/40 rounded-[2rem] border border-slate-100 dark:border-slate-800 space-y-6"},Da={class:"flex items-center justify-between"},Ca={key:0,class:"space-y-10"},Ma={class:"space-y-4"},$a={class:"flex items-center justify-between"},Ta={class:"flex items-center gap-2"},Sa={class:"text-[10px] font-black uppercase tracking-widest text-emerald-600"},Ea={class:"text-[8px] font-black uppercase text-slate-400 px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 rounded"},Ia=["onClick"],Aa={key:0,class:"bg-white dark:bg-slate-900/50 p-4 rounded-2xl text-sm italic text-slate-600 dark:text-slate-300 border border-slate-100 dark:border-slate-800/50"},Fa={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},ja=["onDblclick"],Pa={class:"w-10 h-10 rounded-xl bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center text-emerald-600 shrink-0"},Oa={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Na={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Ya={key:2,xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},La={class:"flex-1 min-w-0 pr-8 text-left"},Ha={class:"text-[11px] font-black text-slate-800 dark:text-white truncate uppercase tracking-tight"},Va={key:0,class:"text-[9px] font-bold text-slate-400 uppercase truncate"},Ba={class:"absolute right-3 top-1/2 -translate-y-1/2 flex gap-1"},Ra=["href"],Wa=["href"],Ua={key:1,class:"text-center py-10 bg-white/50 dark:bg-slate-900/50 rounded-2xl border border-dashed border-slate-200 dark:border-slate-800 flex flex-col items-center justify-center gap-4"},za={class:"grid grid-cols-1 sm:grid-cols-2 gap-8 py-6 border-y border-slate-50 dark:border-slate-800/50"},Ka={class:"space-y-4"},Ga={class:"space-y-2"},Ja={class:"flex items-center justify-between"},qa=["for"],Xa={key:0,class:"text-[9px] font-black uppercase tracking-widest px-2 py-0.5 bg-indigo-50 dark:bg-indigo-500/10 text-indigo-600 rounded flex items-center gap-1"},Za={class:"flex gap-2"},Qa=["id","disabled"],es={key:0,class:"space-y-2"},ts=["for"],ns=["id","disabled"],as=["value"],ss={class:"space-y-2"},os={class:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-800/50"},rs={class:"text-xs font-bold text-slate-600 dark:text-slate-300"},is=["disabled"],ls={class:"space-y-2"},ds=["for"],us={class:"flex gap-2"},cs=["id"],ps={class:"space-y-4"},fs={class:"flex items-center justify-between"},gs={class:"flex items-center gap-2"},vs={key:0,class:"text-[10px] bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded-full text-slate-400 font-bold"},ms={key:0,class:"space-y-2"},hs=["onClick"],bs={class:"space-y-6 pt-6 border-t border-slate-100 dark:border-slate-800"},xs={class:"space-y-6"},ws=["src"],ks={class:"space-y-1"},ys={class:"text-sm"},_s={class:"font-bold text-slate-800 dark:text-white"},Ds={class:"text-slate-500 ml-1"},Cs={class:"text-[12px] text-slate-400 font-bold tracking-widest"},Ms={class:"p-6 bg-slate-50 dark:bg-slate-900/50 border-t border-slate-100 dark:border-slate-800 grid grid-cols-2 sm:grid-cols-3 gap-6"},$s={class:"flex items-center gap-3"},Ts=["src"],Ss={class:"text-left"},Es={class:"text-sm font-bold text-slate-700 dark:text-slate-200"},Is={class:"text-right sm:text-left flex flex-col justify-center"},As={class:"text-sm font-bold text-slate-700 dark:text-slate-200 truncate"},Fs={key:0,class:"fixed top-8 left-1/2 -translate-x-1/2 px-6 py-2 bg-slate-900 text-white rounded-full text-[10px] font-black uppercase tracking-widest z-[10001] shadow-2xl flex items-center gap-3"},js={__name:"TaskDetails",props:{taskId:{type:[Number,String],required:!0},role:{type:String,default:"viewer"}},emits:["close","updated"],setup(o,{emit:i}){const e=Rt(),b=o,D=i,f=$e(()=>!e.user||!g.value?!1:b.role==="owner"||b.role==="editor"||g.value.created_by===e.user.id),T=$e(()=>!0),H=$e(()=>b.role==="owner"),g=R(null),Q=R([]),B=R(!1),G=R(null),P=R(null),I=R(!1),V=R(!1),w=R({title:"",description:"",priority:"",status:"",due_date:"",due_time:"",start_date:"",start_time:"",assigned_to:null,is_reviewed:!1,is_public:!0}),oe=async()=>{try{const S=await ke.get(`/api/tasks/${b.taskId}`);g.value=S.data,ie(),k(S.data.board.plan.workspace_id)}catch(S){console.error("Error fetching task details",S)}},ie=()=>{if(!g.value)return;const S=C=>{if(!C)return"";const re=new Date(C),Ae=String(re.getDate()).padStart(2,"0"),ye=String(re.getMonth()+1).padStart(2,"0"),_e=re.getFullYear();return`${Ae}/${ye}/${_e}`},c=C=>{if(!C)return"";const re=new Date(C);return re.getHours().toString().padStart(2,"0")+":"+re.getMinutes().toString().padStart(2,"0")};w.value={title:g.value.title,description:g.value.description,priority:g.value.priority,status:g.value.status,due_date:S(g.value.deadline),due_time:c(g.value.deadline),start_date:S(g.value.start_date),start_time:c(g.value.start_date),assigned_to:g.value.assigned_to,is_reviewed:!!g.value.is_reviewed,is_public:!!g.value.is_public}},W=async()=>{if(!g.value)return;const S=(ye,_e)=>ye?`${ye} ${_e||"00:00"}:00`:null,c=S(w.value.due_date,w.value.due_time||"23:59"),C=S(w.value.start_date,w.value.start_time||"09:00");if(!(w.value.title!==g.value.title||w.value.description!==g.value.description||w.value.priority!==g.value.priority||w.value.status!==g.value.status||w.value.assigned_to!==g.value.assigned_to||w.value.is_reviewed!==!!g.value.is_reviewed||w.value.is_public!==!!g.value.is_public||w.value.due_date!==(g.value.deadline?O(g.value.deadline):"")||w.value.due_time!==(g.value.deadline?q(g.value.deadline):"")||w.value.start_date!==(g.value.start_date?O(g.value.start_date):"")||w.value.start_time!==(g.value.start_date?q(g.value.start_date):"")))return;B.value=!0;const Ae=JSON.parse(JSON.stringify(g.value));try{const ye={...w.value,deadline:c,start_date:C},_e=await ke.patch(`/api/tasks/${b.taskId}`,ye);g.value={...g.value,..._e.data};const Fe=document.querySelector(".drawer-content");Fe&&(Fe.classList.add("animate-pulse-success"),setTimeout(()=>Fe.classList.remove("animate-pulse-success"),400)),_e.data.calendar_sync_status&&(G.value="Google Linked",clearTimeout(P.value),P.value=setTimeout(()=>{G.value=null},3e3)),D("updated"),oe()}catch(ye){console.error("Update failed",ye),g.value=Ae,ie(),alert("Failed to sync changes. Please check your connection.")}finally{setTimeout(()=>{B.value=!1},800)}},k=async S=>{try{const c=await ke.get(`/api/share/members/workspace/${S}`);Q.value=c.data}catch(c){console.error("Failed to fetch workspace members",c)}},y=async S=>{const c=S.status==="done"?"todo":"done",C=S.status;S.status=c;try{await ke.patch(`/api/tasks/${S.id}`,{status:c}),oe(),D("updated")}catch{S.status=C,alert("Toggle failed")}},M=async()=>{if(confirm("Permanently delete?"))try{await ke.delete(`/api/tasks/${b.taskId}`),D("updated"),D("close")}catch{alert("Failed to delete")}},O=S=>{if(!S)return"";const c=new Date(S);return`${String(c.getDate()).padStart(2,"0")}/${String(c.getMonth()+1).padStart(2,"0")}/${c.getFullYear()}`},q=S=>{if(!S)return"";const c=new Date(S);return c.getHours().toString().padStart(2,"0")+":"+c.getMinutes().toString().padStart(2,"0")},le=S=>S.action==="updated_status"?`moved to ${S.changes.to?.replace("_"," ")}`:S.action==="assigned_task"?`assigned to ${S.changes.to}`:S.action.startsWith("updated_")?`updated ${S.action.replace("updated_","")}`:S.action.replace("_"," "),Te=S=>{switch(S){case"urgent":return"bg-rose-500 text-white";case"high":return"bg-orange-500 text-white";case"medium":return"bg-indigo-100 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-400";default:return"bg-slate-100 text-slate-500"}},pe=(S,c=!1)=>S?S.includes("/storage/deliveries/")?`/delivery-file/${S.split("/").pop()}${c?"?download=1":""}`:S:"#";return wt(oe),(S,c)=>(d(),u(J,null,[ue(Ue,{name:"fade"},{default:Le(()=>[g.value?(d(),u("div",la,[t("div",{class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:c[0]||(c[0]=C=>S.$emit("close"))}),ue(Ue,{name:"slide-right",appear:""},{default:Le(()=>[g.value?(d(),u("div",da,[g.value.status==="done"?(d(),u("div",ua,x(g.value.deliveries?.length>0?"Task Delivered":"Task Completed"),1)):h("",!0),t("div",ca,[t("div",pa,[t("button",{onClick:c[1]||(c[1]=C=>S.$emit("close")),class:"sm:hidden flex items-center gap-2 text-slate-500 font-heading font-bold uppercase tracking-widest text-xs pr-2 border-r border-slate-100 dark:border-slate-800"},[...c[21]||(c[21]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("path",{d:"M15 18l-6-6 6-6"})],-1),we(" Back ",-1)])]),ae(t("select",{"onUpdate:modelValue":c[2]||(c[2]=C=>w.value.priority=C),onChange:W,disabled:!f.value,class:j([[Te(w.value.priority),{"cursor-not-allowed opacity-80":!f.value}],"text-[10px] font-heading font-extrabold uppercase px-3 py-1 rounded-full tracking-widest border-none outline-none cursor-pointer appearance-none transition-pop active-tap"])},[...c[22]||(c[22]=[t("option",{value:"low"},"Low",-1),t("option",{value:"medium"},"Medium",-1),t("option",{value:"high"},"High",-1),t("option",{value:"urgent"},"Urgent",-1)])],42,fa),[[Ze,w.value.priority]]),ae(t("select",{"onUpdate:modelValue":c[3]||(c[3]=C=>w.value.status=C),onChange:W,disabled:!T.value,class:j(["text-[10px] font-heading font-extrabold uppercase px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-lg tracking-widest border-none outline-none cursor-pointer transition-pop active-tap",{"cursor-not-allowed opacity-80":!T.value}])},[c[23]||(c[23]=t("option",{value:"todo"},"Plan",-1)),c[24]||(c[24]=t("option",{value:"in_progress"},"Work",-1)),g.value?.board?.plan?.workspace?.settings?.enable_review_step!==!1?(d(),u("option",va,"Review")):h("",!0),c[25]||(c[25]=t("option",{value:"done"},"Complete",-1))],42,ga),[[Ze,w.value.status]]),w.value.status==="testing"?(d(),u("div",ma,[ae(t("input",{type:"checkbox",id:"review-check","onUpdate:modelValue":c[4]||(c[4]=C=>w.value.is_reviewed=C),onChange:W,class:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 cursor-pointer"},null,544),[[un,w.value.is_reviewed]]),c[26]||(c[26]=t("label",{for:"review-check",class:"text-[10px] font-bold uppercase tracking-widest text-blue-700 dark:text-blue-300 cursor-pointer select-none"},"Mark Reviewed",-1))])):h("",!0)]),t("div",ha,[t("div",ba,[c[27]||(c[27]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3 text-slate-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1-2.5-2.5Z"}),t("path",{d:"M8 7h6"}),t("path",{d:"M8 11h8"})],-1)),t("p",xa,"TASK-"+x(g.value.id),1)]),H.value?(d(),u("button",{key:0,onClick:M,class:"p-2 hover:bg-rose-50 dark:hover:bg-rose-500/10 text-slate-300 hover:text-rose-500 rounded-xl transition-all active-tap",title:"Delete Task"},[...c[28]||(c[28]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M3 6h18"}),t("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),t("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),t("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),t("line",{x1:"14",y1:"11",x2:"14",y2:"17"})],-1)])])):h("",!0),t("button",{onClick:c[5]||(c[5]=C=>S.$emit("close")),class:"hidden sm:block p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-colors active-tap"},[...c[29]||(c[29]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),t("div",wa,[t("section",null,[ae(t("input",{"onUpdate:modelValue":c[6]||(c[6]=C=>w.value.title=C),onBlur:W,disabled:!f.value,class:j(["w-full text-3xl font-heading font-bold text-slate-900 dark:text-white bg-transparent border-none outline-none focus:ring-0 mb-4 p-0",{"cursor-not-allowed":!f.value}]),placeholder:"Task Title"},null,42,ka),[[ce,w.value.title]]),ae(t("textarea",{"onUpdate:modelValue":c[7]||(c[7]=C=>w.value.description=C),onBlur:W,disabled:!f.value,class:j(["w-full text-base text-slate-500 dark:text-slate-400 bg-transparent border-none outline-none focus:ring-0 p-0 resize-none min-h-[100px]",{"cursor-not-allowed":!f.value}]),placeholder:"Add a detailed description..."},null,42,ya),[[ce,w.value.description]])]),g.value.deliveries?.length||f.value?(d(),u("section",_a,[t("div",Da,[c[31]||(c[31]=t("h3",{class:"text-xs font-heading font-bold uppercase tracking-[0.2em] text-slate-400"},"Task Deliveries",-1)),f.value?(d(),u("button",{key:0,onClick:c[8]||(c[8]=C=>I.value=!0),class:"text-[10px] font-heading font-bold uppercase tracking-widest px-4 py-2 bg-emerald-500 text-white rounded-xl shadow-lg shadow-emerald-500/20 hover:scale-105 hover:bg-emerald-600 transition-all flex items-center gap-2 active-tap"},[...c[30]||(c[30]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("path",{d:"M5 12h14"}),t("path",{d:"M12 5v14"})],-1),we(" Add New Delivery ",-1)])])):h("",!0)]),g.value.deliveries?.length?(d(),u("div",Ca,[(d(!0),u(J,null,ee(g.value.deliveries,C=>(d(),u("div",{key:C.id,class:"space-y-6 relative pl-6 border-l-2 border-emerald-500/20"},[c[37]||(c[37]=t("div",{class:"absolute -left-[5px] top-0 w-2 h-2 rounded-full bg-emerald-500"},null,-1)),t("div",Ma,[t("div",$a,[t("div",Ta,[t("p",Sa,"Package from "+x(C.user?.display_name),1),t("span",Ea,x(O(C.created_at)),1)]),C.user_id===Y(e).user.id||o.role==="owner"?(d(),u("button",{key:0,onClick:re=>S.deleteDelivery(C.id),class:"p-1 px-2 text-[9px] font-black uppercase tracking-widest bg-rose-50 text-rose-500 hover:bg-rose-500 hover:text-white rounded-lg transition-all active-tap"}," Delete Package ",8,Ia)):h("",!0)]),C.notes?(d(),u("div",Aa,x(C.notes),1)):h("",!0),t("div",Fa,[(d(!0),u(J,null,ee(C.items,re=>(d(),u("div",{key:re.id,onDblclick:Ae=>S.openItem(pe(re.content)),class:"flex items-center gap-3 p-4 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-[2rem] hover:border-emerald-500/50 hover:shadow-lg hover:shadow-emerald-500/5 transition-all group relative cursor-pointer active-tap"},[t("div",Pa,[re.type==="link"?(d(),u("svg",Oa,[...c[32]||(c[32]=[t("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},null,-1),t("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},null,-1)])])):re.name.toLowerCase().endsWith(".pdf")?(d(),u("svg",Na,[...c[33]||(c[33]=[t("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},null,-1),t("polyline",{points:"14 2 14 8 20 8"},null,-1),t("path",{d:"M9 15h3a1.5 1.5 0 0 0 0-3H9v6"},null,-1),t("path",{d:"M5 12v6"},null,-1),t("path",{d:"M5 15h3"},null,-1)])])):(d(),u("svg",Ya,[...c[34]||(c[34]=[t("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},null,-1),t("polyline",{points:"14 2 14 8 20 8"},null,-1)])]))]),t("div",La,[t("p",Ha,x(re.name),1),re.description?(d(),u("p",Va,x(re.description),1)):h("",!0)]),t("div",Ba,[re.type!=="link"?(d(),u("a",{key:0,href:pe(re.content,!0),onClick:c[9]||(c[9]=ge(()=>{},["stop"])),class:"p-2 bg-emerald-50 dark:bg-emerald-500/10 text-emerald-600 hover:bg-emerald-600 hover:text-white rounded-lg transition-all"},[...c[35]||(c[35]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)])],8,Ra)):h("",!0),t("a",{href:pe(re.content,!1),target:"_blank",rel:"noopener noreferrer",onClick:c[10]||(c[10]=ge(()=>{},["stop"])),class:"p-2 bg-slate-50 dark:bg-slate-800 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-500/10 rounded-lg transition-all"},[...c[36]||(c[36]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),t("polyline",{points:"15 3 21 3 21 9"}),t("line",{x1:"10",y1:"14",x2:"21",y2:"3"})],-1)])],8,Wa)])],40,ja))),128))])])]))),128))])):(d(),u("div",Ua,[c[39]||(c[39]=t("div",{class:"w-16 h-16 rounded-2xl bg-slate-50 dark:bg-slate-800 flex items-center justify-center text-slate-300 mb-2"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"17 8 12 3 7 8"}),t("line",{x1:"12",y1:"3",x2:"12",y2:"15"})])],-1)),c[40]||(c[40]=t("div",null,[t("p",{class:"text-xs font-heading font-bold uppercase tracking-widest text-slate-500 dark:text-slate-400"},"Professional Delivery Terminal"),t("p",{class:"text-[10px] font-medium text-slate-400 mt-1"},"Ready for hand-over artifacts")],-1)),f.value?(d(),u("button",{key:0,onClick:c[11]||(c[11]=C=>I.value=!0),class:"mt-2 px-6 py-3 bg-emerald-500 text-white rounded-xl shadow-xl shadow-emerald-500/20 hover:scale-105 hover:bg-emerald-600 transition-all font-heading font-bold text-xs uppercase tracking-widest flex items-center gap-2 active-tap"},[...c[38]||(c[38]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("path",{d:"M5 12h14"}),t("path",{d:"M12 5v14"})],-1),we(" Process Delivery ",-1)])])):h("",!0)]))])):h("",!0),t("section",za,[t("div",Ka,[t("div",Ga,[t("div",Ja,[t("label",{for:"start-date-"+o.taskId,class:"text-[10px] font-heading font-bold uppercase tracking-widest text-slate-400"},"Start Date & Time",8,qa),ue(Ue,{name:"fade"},{default:Le(()=>[G.value?(d(),u("span",Xa,[c[41]||(c[41]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),t("polyline",{points:"22 4 12 14.01 9 11.01"})],-1)),we(" "+x(G.value),1)])):h("",!0)]),_:1})]),t("div",Za,[ue(xt,{id:"start-date-"+o.taskId,name:"start_date_"+o.taskId,modelValue:w.value.start_date,"onUpdate:modelValue":c[12]||(c[12]=C=>w.value.start_date=C),onChange:W,disabled:!f.value},null,8,["id","name","modelValue","disabled"]),ae(t("input",{id:"start-time-"+o.taskId,type:"time","onUpdate:modelValue":c[13]||(c[13]=C=>w.value.start_time=C),onChange:W,disabled:!f.value,class:j(["w-24 bg-slate-50 dark:bg-slate-800/50 border-none rounded-xl px-4 py-3 text-base font-bold text-slate-700 dark:text-slate-200 outline-none focus:ring-2 focus:ring-indigo-500/20 active-tap",{"cursor-not-allowed opacity-80":!f.value}])},null,42,Qa),[[ce,w.value.start_time]])])]),Q.value.length>1?(d(),u("div",es,[t("label",{for:"assignee-"+o.taskId,class:"text-[10px] font-heading font-bold uppercase tracking-widest text-slate-400"},"Assignee",8,ts),ae(t("select",{id:"assignee-"+o.taskId,"onUpdate:modelValue":c[14]||(c[14]=C=>w.value.assigned_to=C),onChange:W,disabled:!f.value,class:j(["w-full bg-slate-50 dark:bg-slate-800/50 border-none rounded-xl px-4 py-3 text-base font-bold text-slate-700 dark:text-slate-200 outline-none focus:ring-2 focus:ring-indigo-500/20 appearance-none cursor-pointer transition-pop active-tap",{"cursor-not-allowed opacity-80":!f.value}])},[c[42]||(c[42]=t("option",{value:null},"Unassigned",-1)),(d(!0),u(J,null,ee(Q.value,C=>(d(),u("option",{key:C.id,value:C.id},x(C.display_name),9,as))),128))],42,ns),[[Ze,w.value.assigned_to]])])):h("",!0),t("div",ss,[c[43]||(c[43]=t("label",{class:"text-[10px] font-heading font-bold uppercase tracking-widest text-slate-400"},"Visibility",-1)),t("div",os,[t("span",rs,x(w.value.is_public?"Public Team Task":"Private Task"),1),t("button",{onClick:c[15]||(c[15]=C=>{w.value.is_public=!w.value.is_public,W()}),disabled:!f.value,class:j(["w-11 h-6 rounded-full transition-all relative",w.value.is_public?"bg-indigo-600":"bg-slate-300 dark:bg-slate-600",{"opacity-50 cursor-not-allowed":!f.value}])},[t("div",{class:j(["absolute top-1 w-4 h-4 bg-white rounded-full transition-all shadow-sm",w.value.is_public?"left-6":"left-1"])},null,2)],10,is)])])]),t("div",ls,[t("label",{for:"due-date-"+o.taskId,class:"text-[10px] font-heading font-bold uppercase tracking-widest text-slate-400"},"Due Date",8,ds),t("div",us,[ue(xt,{id:"due-date-"+o.taskId,name:"due_date_"+o.taskId,modelValue:w.value.due_date,"onUpdate:modelValue":c[16]||(c[16]=C=>w.value.due_date=C),onChange:W,disabled:!f.value},null,8,["id","name","modelValue","disabled"]),ae(t("input",{id:"due-time-"+o.taskId,type:"time","onUpdate:modelValue":c[17]||(c[17]=C=>w.value.due_time=C),onChange:W,class:"w-24 bg-slate-50 dark:bg-slate-800/50 border-none rounded-xl px-4 py-3 text-base font-bold text-slate-700 dark:text-slate-200 outline-none focus:ring-2 focus:ring-indigo-500/20 active-tap"},null,40,cs),[[ce,w.value.due_time]])])])]),t("section",ps,[t("div",fs,[t("div",gs,[c[44]||(c[44]=t("h3",{class:"text-sm font-heading font-bold uppercase tracking-[0.2em] text-slate-400"},"Sub-tasks",-1)),g.value.subtasks?.length?(d(),u("span",vs,x(g.value.subtasks.length),1)):h("",!0)]),f.value?(d(),u("button",{key:0,onClick:c[18]||(c[18]=C=>V.value=!0),class:"text-[10px] font-heading font-bold text-indigo-600 hover:opacity-80 uppercase tracking-widest flex items-center gap-1 active-tap"},[...c[45]||(c[45]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"4"},[t("path",{d:"M5 12h14"}),t("path",{d:"M12 5v14"})],-1),we(" Add Sub-task ",-1)])])):h("",!0)]),g.value.subtasks?.length?(d(),u("div",ms,[(d(!0),u(J,null,ee(g.value.subtasks,C=>(d(),u("div",{key:C.id,class:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800 group hover:border-indigo-500/30 transition-all active-tap"},[t("button",{onClick:ge(re=>y(C),["stop"]),class:"w-5 h-5 rounded-md border-2 border-slate-200 dark:border-slate-700 flex items-center justify-center transition-all hover:border-indigo-500"},[t("div",{class:j(["w-2 h-2 rounded-sm bg-indigo-500 opacity-0 group-hover:opacity-20",{"opacity-100":C.status==="done"}])},null,2)],8,hs),t("span",{class:j(["flex-1 text-sm font-bold text-slate-700 dark:text-slate-200",{"line-through text-slate-400":C.status==="done"}])},x(C.title),3)]))),128))])):h("",!0)]),t("section",bs,[c[46]||(c[46]=t("h3",{class:"text-sm font-black uppercase tracking-[0.2em] text-slate-400"},"Activity Log",-1)),t("div",xs,[(d(!0),u(J,null,ee(g.value.activity_logs,C=>(d(),u("div",{key:C.id,class:"flex gap-4"},[t("img",{src:C.user?.avatar||"https://ui-avatars.com/api/?name="+C.user?.display_name,class:"w-8 h-8 rounded-full shrink-0 mt-1"},null,8,ws),t("div",ks,[t("p",ys,[t("span",_s,x(C.user?.display_name||"System"),1),t("span",Ds,"did "+x(le(C)),1)]),t("p",Cs,x(O(C.created_at)),1)])]))),128))])])]),t("div",Ms,[t("div",$s,[t("img",{src:g.value.creator?.avatar||"https://ui-avatars.com/api/?name="+(g.value.creator?.display_name||"System"),class:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-slate-800 object-cover"},null,8,Ts),t("div",Ss,[c[47]||(c[47]=t("p",{class:"text-[10px] font-heading font-bold uppercase tracking-widest text-slate-400"},"Owner",-1)),t("p",Es,x(g.value.creator?.display_name),1)])]),t("div",Is,[c[48]||(c[48]=t("p",{class:"text-[10px] font-heading font-bold uppercase tracking-widest text-slate-400"},"Recipient",-1)),t("p",As,x(g.value.assignee?.display_name||"Unassigned"),1)])])])):h("",!0)]),_:1})])):h("",!0)]),_:1}),ue(Ue,{name:"fade"},{default:Le(()=>[B.value?(d(),u("div",Fs,[...c[49]||(c[49]=[t("div",{class:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"},null,-1),we(" Syncing Artifacts... ",-1)])])):h("",!0)]),_:1}),I.value?(d(),Xe(zt,{key:0,show:I.value,task:g.value,onClose:c[19]||(c[19]=C=>I.value=!1),onDelivered:c[20]||(c[20]=C=>{oe(),D("updated")})},null,8,["show","task"])):h("",!0)],64))}},Ps=tt(js,[["__scopeId","data-v-6ce90be6"]]),Os={class:"bg-transparent p-0"},Ns={key:0},Ys={class:"flex items-center justify-between mb-8"},Ls={class:"flex items-center gap-6"},Hs={class:"text-2xl font-heading font-extrabold text-slate-800 dark:text-white capitalize"},Vs={class:"flex items-center bg-slate-100 dark:bg-slate-800 p-1 rounded-xl"},Bs={class:"grid grid-cols-7 gap-3 sm:gap-4"},Rs={class:"text-[13px] font-heading font-bold uppercase tracking-widest text-slate-400 dark:text-slate-500"},Ws={class:"flex justify-between items-start mb-4 shrink-0"},Us={key:0,class:"text-[10px] uppercase font-black text-indigo-500 bg-indigo-50 dark:bg-indigo-500/10 px-2 py-0.5 rounded-md"},zs={class:"flex-1 overflow-y-auto space-y-2 pr-1 custom-scrollbar scrollbar-hide hover:scrollbar-default"},Ks=["onClick"],Gs={class:"relative shrink-0"},Js=["src"],qs={key:0,class:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 bg-indigo-500 rounded-full ring-2 ring-white dark:ring-slate-800"},Xs={class:"min-w-0 flex-1"},Zs={class:"text-[13px] font-semibold text-slate-700 dark:text-slate-200 leading-tight truncate group-hover/task:text-indigo-600 transition-colors"},Qs={key:1,class:"space-y-8"},eo={class:"space-y-4"},to={class:"flex items-center justify-between"},no={class:"text-lg font-heading font-extrabold text-slate-800 dark:text-white uppercase tracking-widest"},ao={class:"flex gap-2"},so=["onClick"],oo={class:"text-[10px] font-heading font-extrabold uppercase tracking-widest opacity-60"},ro={class:"text-lg font-heading font-extrabold"},io={key:0,class:"w-1 h-1 rounded-full bg-current"},lo={class:"space-y-4"},uo={class:"flex items-center justify-between"},co={class:"text-xs font-heading font-extrabold uppercase tracking-[0.2em] text-slate-400"},po={class:"text-[10px] font-heading font-extrabold uppercase text-indigo-600 bg-indigo-50 dark:bg-indigo-500/10 px-2 py-1 rounded-md"},fo={class:"space-y-3"},go=["onClick"],vo={class:"flex items-center justify-between mb-3"},mo={class:"flex items-center gap-2"},ho={class:"text-[10px] font-heading font-extrabold uppercase tracking-widest text-slate-400"},bo={class:"text-base font-bold text-slate-800 dark:text-white mb-2"},xo={class:"flex items-center justify-between"},wo={key:0,class:"flex items-center gap-2"},ko=["src"],yo={class:"text-[10px] font-heading font-extrabold uppercase tracking-widest text-indigo-600"},_o={key:1,class:"flex items-center gap-2 opacity-50"},Do=["src"],Co={key:0,class:"py-12 text-center bg-slate-50 dark:bg-slate-800/30 rounded-[2.5rem] border border-dashed border-slate-200 dark:border-slate-800"},Mo={__name:"CalendarView",props:{tasks:{type:Array,default:()=>[]},monthYear:{type:String,default:""},isMobile:{type:Boolean,default:!1},globalMode:{type:Boolean,default:!1}},emits:["task-click","update:monthYear"],setup(o,{emit:i}){const e=o,b=i,D=R(new Date),f=R(new Date),T=R(0);We(()=>e.monthYear,k=>{if(k){const[y,M]=k.split("-"),O=new Date(y,M-1,1);(O.getMonth()!==D.value.getMonth()||O.getFullYear()!==D.value.getFullYear())&&(D.value=O,f.value.getMonth()!==D.value.getMonth()&&(f.value=new Date(y,M-1,1)))}},{immediate:!0});const H=$e(()=>D.value.toLocaleString("default",{month:"long",year:"numeric"})),g=$e(()=>{const k=D.value.getFullYear(),y=D.value.getMonth(),M=new Date(k,y+1,0).getDate(),O=[],q=new Date;for(let le=1;le<=M;le++){const Te=new Date(k,y,le);O.push({day:le,date:Te,isToday:Te.toDateString()===q.toDateString()})}return O}),Q=$e(()=>{const k=[],y=D.value.getFullYear(),M=D.value.getMonth(),O=new Date(y,M,1).getDay(),q=new Date(y,M+1,0).getDate(),le=new Date(y,M,0).getDate();for(let S=O-1;S>=0;S--)k.push({day:le-S,date:new Date(y,M-1,le-S),isOtherMonth:!0});const Te=new Date;for(let S=1;S<=q;S++){const c=new Date(y,M,S);k.push({day:S,date:c,isOtherMonth:!1,isToday:c.toDateString()===Te.toDateString()})}const pe=42-k.length;for(let S=1;S<=pe;S++)k.push({day:S,date:new Date(y,M+1,S),isOtherMonth:!0});return k}),B=k=>{const y=new Date(D.value.getFullYear(),D.value.getMonth()+k,1);D.value=y,f.value=new Date(y.getFullYear(),y.getMonth(),1);const M=y.getFullYear(),O=String(y.getMonth()+1).padStart(2,"0");b("update:monthYear",`${M}-${O}`)},G=k=>{if(!k)return[];const y=k.toDateString();return e.tasks.filter(M=>new Date(M.deadline||M.created_at).toDateString()===y)},P=k=>G(k).length>0,I=(k,y)=>k&&y&&k.toDateString()===y.toDateString(),V=k=>k.toLocaleString("default",{weekday:"short"}).slice(0,3),w=k=>{if(!k)return"";const y=String(k.getDate()).padStart(2,"0"),M=String(k.getMonth()+1).padStart(2,"0"),O=k.getFullYear();return`${y}/${M}/${O}`},oe=k=>{T.value=k.touches[0].clientX},ie=k=>{const y=k.changedTouches[0].clientX,M=T.value-y;if(Math.abs(M)>70){const O=f.value.getDate(),q=new Date(D.value.getFullYear(),D.value.getMonth()+1,0).getDate();M>0&&O<q?f.value=new Date(D.value.getFullYear(),D.value.getMonth(),O+1):M<0&&O>1&&(f.value=new Date(D.value.getFullYear(),D.value.getMonth(),O-1))}},W=k=>{switch(k){case"urgent":return"bg-rose-500 text-white";case"high":return"bg-orange-500 text-white";case"medium":return"bg-indigo-100 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-400";default:return"bg-slate-100 text-slate-500 dark:bg-slate-800"}};return(k,y)=>(d(),u("div",Os,[o.isMobile?(d(),u("div",Qs,[t("div",eo,[t("div",to,[t("h2",no,x(H.value),1),t("div",ao,[t("button",{onClick:y[2]||(y[2]=M=>B(-1)),class:"p-2 bg-slate-100 dark:bg-slate-800 rounded-xl text-slate-500"},[...y[7]||(y[7]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("polyline",{points:"15 18 9 12 15 6"})],-1)])]),t("button",{onClick:y[3]||(y[3]=M=>B(1)),class:"p-2 bg-slate-100 dark:bg-slate-800 rounded-xl text-slate-500"},[...y[8]||(y[8]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])])])]),t("div",{class:"flex items-center gap-3 overflow-x-auto pb-4 no-scrollbar scroll-smooth",onTouchstart:oe,onTouchend:ie},[(d(!0),u(J,null,ee(g.value,M=>(d(),u("button",{key:M.date.toISOString(),onClick:O=>f.value=M.date,class:j(["flex-shrink-0 w-16 h-20 rounded-[1.5rem] flex flex-col items-center justify-center gap-1 transition-all duration-300",[I(f.value,M.date)?"bg-indigo-600 text-white shadow-xl shadow-indigo-500/30 -translate-y-1":"bg-slate-50 dark:bg-slate-800 text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700"]])},[t("span",oo,x(V(M.date)),1),t("span",ro,x(M.day),1),P(M.date)?(d(),u("div",io)):h("",!0)],10,so))),128))],32)]),t("div",lo,[t("div",uo,[t("h3",co,"Tasks for "+x(w(f.value)),1),t("span",po,x(G(f.value).length)+" Tasks",1)]),t("div",fo,[(d(!0),u(J,null,ee(G(f.value),M=>(d(),u("div",{key:M.id,onClick:O=>k.$emit("task-click",M.id),class:"bg-slate-50 dark:bg-slate-800/50 p-5 rounded-[2rem] border border-slate-100 dark:border-slate-700/50 active:scale-[0.98] transition-all"},[t("div",vo,[t("span",{class:j([W(M.priority),"text-[10px] font-heading font-extrabold uppercase tracking-widest px-2.5 py-1 rounded-full"])},x(M.priority),3),t("div",mo,[t("p",ho,x(M.status.replace("_"," ")),1)])]),t("h4",bo,x(M.title),1),t("div",xo,[M.working_by?(d(),u("div",wo,[t("img",{src:M.working_by.avatar||"https://ui-avatars.com/api/?name="+M.working_by.display_name,class:"w-6 h-6 rounded-full border-2 border-indigo-500"},null,8,ko),t("span",yo,"Work by  "+x(M.working_by.display_name),1)])):(d(),u("div",_o,[t("img",{src:M.creator?.avatar||"https://ui-avatars.com/api/?name="+M.creator?.display_name,class:"w-6 h-6 rounded-full grayscale"},null,8,Do),y[9]||(y[9]=t("span",{class:"text-[10px] font-heading font-extrabold uppercase tracking-widest text-slate-400"},"Waiting Room",-1))]))])],8,go))),128)),G(f.value).length===0?(d(),u("div",Co,[...y[10]||(y[10]=[Ee('<svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10 mx-auto text-slate-300 mb-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-70fbfe92><rect width="18" height="18" x="3" y="4" rx="2" ry="2" data-v-70fbfe92></rect><line x1="16" y1="2" x2="16" y2="6" data-v-70fbfe92></line><line x1="8" y1="2" x2="8" y2="6" data-v-70fbfe92></line><line x1="3" y1="10" x2="21" y2="10" data-v-70fbfe92></line><path d="m9 16 2 2 4-4" data-v-70fbfe92></path></svg><p class="text-sm font-bold text-slate-400 uppercase tracking-widest" data-v-70fbfe92>Clear for takeoff!</p>',2)])])):h("",!0)])])])):(d(),u("div",Ns,[t("div",Ys,[t("div",Ls,[t("h2",Hs,x(H.value),1),t("div",Vs,[t("button",{onClick:y[0]||(y[0]=M=>B(-1)),class:"p-2 hover:bg-white dark:hover:bg-slate-700 rounded-lg transition-all text-slate-400 hover:text-indigo-600"},[...y[4]||(y[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("polyline",{points:"15 18 9 12 15 6"})],-1)])]),t("button",{onClick:y[1]||(y[1]=M=>B(1)),class:"p-2 hover:bg-white dark:hover:bg-slate-700 rounded-lg transition-all text-slate-400 hover:text-indigo-600"},[...y[5]||(y[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])])])]),y[6]||(y[6]=t("div",{class:"flex items-center gap-2"},[t("span",{class:"w-3 h-3 rounded-full bg-indigo-500"}),t("p",{class:"text-[10px] font-heading font-extrabold uppercase tracking-widest text-slate-400"},"Monthly View")],-1))]),t("div",Bs,[(d(),u(J,null,ee(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],M=>t("div",{key:M,class:"text-center mb-2"},[t("span",Rs,x(M),1)])),64)),(d(!0),u(J,null,ee(Q.value,(M,O)=>(d(),u("div",{key:O,class:j(["min-h-[240px] p-4 bg-white dark:bg-slate-900 rounded-[1.5rem] border border-slate-200 dark:border-slate-800 shadow-sm transition-all hover:shadow-md flex flex-col relative group",[M.isOtherMonth?"opacity-50 grayscale bg-slate-50 dark:bg-slate-950":"",M.isToday?"ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-slate-950":""]])},[t("div",Ws,[t("span",{class:j(["text-2xl font-heading font-bold leading-none",M.isToday?"text-indigo-600 dark:text-indigo-400":"text-slate-700 dark:text-slate-200"])},x(M.day),3),M.isToday?(d(),u("span",Us,"Today")):h("",!0)]),t("div",zs,[(d(!0),u(J,null,ee(G(M.date),q=>(d(),u("div",{key:q.id,onClick:le=>k.$emit("task-click",q.id),class:"group/task flex items-center gap-3 p-2.5 rounded-xl bg-slate-50 dark:bg-slate-800 hover:bg-white dark:hover:bg-slate-700 hover:shadow-md transition-all cursor-pointer border border-transparent hover:border-slate-100 dark:hover:border-slate-600 select-none relative overflow-hidden"},[t("div",Gs,[t("img",{src:(q.working_by?q.working_by.avatar:q.creator?.avatar)||"https://ui-avatars.com/api/?name="+(q.working_by?q.working_by.display_name:q.creator?.display_name),class:"w-7 h-7 rounded-full object-cover ring-2 ring-white dark:ring-slate-800 shadow-sm"},null,8,Js),q.status==="in_progress"?(d(),u("div",qs)):h("",!0)]),t("div",Xs,[t("p",Zs,x(q.title),1)])],8,Ks))),128))])],2))),128))])]))]))}},$o=tt(Mo,[["__scopeId","data-v-70fbfe92"]]),To={class:"relative z-50"},So={class:"w-8 h-8 rounded-lg bg-indigo-50 dark:bg-indigo-500/10 flex items-center justify-center text-indigo-600 transition-transform"},Eo={key:0,class:"text-lg"},Io={key:1,class:"text-lg"},Ao={key:2,class:"text-lg"},Fo={key:3,class:"text-lg"},jo={class:"flex-1 text-left"},Po={class:"flex items-center gap-1.5 mb-1"},Oo={key:0,class:"text-[8px] px-1.5 py-0.5 bg-indigo-50 dark:bg-indigo-500/10 text-indigo-600 rounded-full font-black uppercase tracking-tighter"},No={class:"text-base font-bold text-slate-800 dark:text-white leading-none truncate w-32"},Yo={key:0,class:"absolute top-full left-0 mt-2 w-72 bg-white dark:bg-slate-900 rounded-2xl shadow-2xl border border-slate-100 dark:border-slate-800 p-2 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200"},Lo={class:"max-h-[300px] overflow-y-auto space-y-1 my-2 custom-scrollbar"},Ho=["onClick"],Vo={class:"w-8 h-8 rounded-lg bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 flex items-center justify-center text-lg shadow-sm"},Bo={class:"flex-1 text-left"},Ro={class:"text-[11px] font-medium text-slate-400 uppercase tracking-wider"},Wo={key:0,class:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse"},Uo=["onClick"],zo={__name:"ContextSwitcher",emits:["create"],setup(o,{emit:i}){const e=i,b=Ut(),{workspaces:D,currentWorkspace:f}=Wt(b),T=R(!1),H=P=>{switch(P){case"Personal":return"";case"Work":return"";case"Company":return"";case"Team":return"";default:return""}},g=P=>{b.switchWorkspace(P),T.value=!1},Q=()=>{e("create"),T.value=!1},B=async P=>{if(confirm(`Are you sure you want to delete "${P.name}"? This action cannot be undone.`))try{await b.deleteWorkspace(P.id)}catch(I){const V=I.response?.data?.message||"Failed to delete workspace. Please check your permissions or network.";alert(V)}},G={mounted(P,I){P.clickOutsideEvent=function(V){P===V.target||P.contains(V.target)||I.value(V,P)},document.body.addEventListener("click",P.clickOutsideEvent)},unmounted(P){document.body.removeEventListener("click",P.clickOutsideEvent)}};return(P,I)=>(d(),u("div",To,[t("button",{onClick:I[0]||(I[0]=ge(V=>T.value=!T.value,["stop"])),class:"flex items-center gap-3 bg-white dark:bg-slate-900 px-3 py-2 sm:py-2.5 rounded-xl border border-slate-200 dark:border-slate-800 hover:border-indigo-500 hover:shadow-lg transition-all duration-300 group min-w-[200px] h-11 lg:h-auto"},[t("div",So,[Y(b).globalMode?(d(),u("span",Eo,"")):Y(f)?.type==="Personal"?(d(),u("span",Io,"")):Y(f)?.type==="Work"?(d(),u("span",Ao,"")):(d(),u("span",Fo,""))]),t("div",jo,[t("div",Po,[I[1]||(I[1]=t("p",{class:"text-[10px] font-black uppercase tracking-widest text-slate-400 leading-none"},"Context",-1)),Y(f)?.pivot?.role?(d(),u("span",Oo,x(Y(f).pivot.role),1)):h("",!0)]),t("p",No,x(Y(b).globalMode?"Global View":Y(f)?.name||"Loading..."),1)]),(d(),u("svg",{xmlns:"http://www.w3.org/2000/svg",class:j(["w-4 h-4 text-slate-400 transition-transform duration-300",{"rotate-180":T.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[...I[2]||(I[2]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 9l-7 7-7-7"},null,-1)])],2))]),T.value?ae((d(),u("div",Yo,[I[5]||(I[5]=t("div",{class:"px-4 py-2 text-[10px] font-black uppercase tracking-widest text-slate-400"},"Switch Context",-1)),t("div",Lo,[(d(!0),u(J,null,ee(Y(D),V=>(d(),u("button",{key:V.id,onClick:w=>g(V),class:j([[Y(f)?.id===V.id?"bg-indigo-50 dark:bg-indigo-500/10 border-indigo-200 dark:border-indigo-500/30":"border-transparent hover:bg-slate-50 dark:hover:bg-slate-800/50"],"w-full flex items-center gap-3 px-3 py-2.5 rounded-xl border transition-all group"])},[t("div",Vo,[t("span",null,x(H(V.type)),1)]),t("div",Bo,[t("p",{class:j(["text-base font-bold leading-none mb-1 transition-colors",[Y(f)?.id===V.id?"text-indigo-600 dark:text-indigo-400":"text-slate-700 dark:text-slate-300"]])},x(V.name),3),t("p",Ro,x(V.type),1)]),Y(f)?.id===V.id?(d(),u("div",Wo)):h("",!0),V.pivot?.role==="owner"?(d(),u("button",{key:1,onClick:ge(w=>B(V),["stop"]),class:"p-2 text-slate-300 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 rounded-lg transition-all opacity-0 group-hover:opacity-100",title:"Delete Context"},[...I[3]||(I[3]=[Ee('<svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-e5ded903><path d="M3 6h18" data-v-e5ded903></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" data-v-e5ded903></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" data-v-e5ded903></path><line x1="10" y1="11" x2="10" y2="17" data-v-e5ded903></line><line x1="14" y1="11" x2="14" y2="17" data-v-e5ded903></line></svg>',1)])],8,Uo)):h("",!0)],10,Ho))),128))]),I[6]||(I[6]=t("div",{class:"h-px bg-slate-100 dark:bg-slate-800 my-2"},null,-1)),t("button",{onClick:Q,class:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-slate-50 dark:bg-slate-800 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 text-slate-600 dark:text-slate-300 hover:text-indigo-600 rounded-xl transition-all text-sm font-bold uppercase tracking-wider border border-dashed border-slate-200 dark:border-slate-700 hover:border-indigo-300"},[...I[4]||(I[4]=[t("span",{class:"text-lg"},"+",-1),we(" Create New Context ",-1)])])])),[[G,()=>T.value=!1]]):h("",!0)]))}},Ko=tt(zo,[["__scopeId","data-v-e5ded903"]]),Go={key:0,class:"fixed inset-0 z-[20000] flex items-center justify-center p-4"},Jo={class:"relative bg-white dark:bg-slate-900 w-full max-w-md rounded-[2.5rem] shadow-2xl p-8 border border-slate-100 dark:border-slate-800 animate-in zoom-in-95 duration-200"},qo={class:"mb-8"},Xo={class:"text-2xl font-black text-slate-800 dark:text-white mb-2"},Zo={class:"text-slate-500 text-sm"},Qo={class:"font-bold text-indigo-600"},er={class:"space-y-6"},tr={class:"space-y-4"},nr={class:"grid grid-cols-3 gap-2"},ar=["onClick"],sr={class:"mt-2 text-[10px] text-slate-400 font-medium px-1"},or=["disabled"],rr={class:"space-y-4"},ir={class:"space-y-3 max-h-48 overflow-y-auto custom-scrollbar pr-2"},lr={class:"flex items-center gap-3"},dr=["src"],ur={class:"text-sm font-bold text-slate-800 dark:text-white leading-none"},cr={class:"text-[10px] text-slate-400 font-bold uppercase tracking-widest"},pr=["onClick"],fr={__name:"ShareModal",props:{show:Boolean,type:String,id:[Number,String],entity:Object},emits:["close"],setup(o,{emit:i}){const e=o,b=R(!1),D=R([]),f=R({email:"",role:"editor"}),T=[{id:"owner",label:"Owner",desc:"Full control over data and sharing."},{id:"editor",label:"Editor",desc:"Can add, edit and delete tasks."},{id:"viewer",label:"Viewer",desc:"Read-only access to all data."}],H=$e(()=>T.find(P=>P.id===f.value.role)?.desc),g=$e(()=>!0),Q=async()=>{if(e.id)try{const P=await ke.get(`/api/share/members/${e.type.toLowerCase()}/${e.id}`);D.value=P.data}catch{console.error("Failed to fetch members")}},B=async()=>{b.value=!0;try{await ke.post("/api/share/invite",{email:f.value.email,role:f.value.role,type:e.type,id:e.id}),f.value.email="",Q()}catch(P){alert(P.response?.data?.message||"Failed to invite user")}finally{b.value=!1}},G=async P=>{if(confirm("Remove this member from access?"))try{await ke.delete(`/api/share/members/${e.type.toLowerCase()}/${e.id}/${P}`),Q()}catch{alert("Failed to remove member")}};return We(()=>e.show,P=>{P&&Q()}),wt(()=>{e.show&&Q()}),(P,I)=>o.show?(d(),u("div",Go,[t("div",{class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:I[0]||(I[0]=V=>P.$emit("close"))}),t("div",Jo,[t("div",qo,[t("h2",Xo,"Share "+x(o.type),1),t("p",Zo,[I[2]||(I[2]=we("Invite others to collaborate on ",-1)),t("span",Qo,x(o.entity?.name),1)])]),t("div",er,[t("div",tr,[t("div",null,[I[3]||(I[3]=t("label",{for:"invite-email",class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Email Address",-1)),ae(t("input",{id:"invite-email","onUpdate:modelValue":I[1]||(I[1]=V=>f.value.email=V),type:"email",placeholder:"colleague@company.com",class:"w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl px-5 py-4 outline-none focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-bold"},null,512),[[ce,f.value.email]])]),t("div",null,[I[4]||(I[4]=t("label",{class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Access Level",-1)),t("div",nr,[(d(),u(J,null,ee(T,V=>t("button",{key:V.id,onClick:w=>f.value.role=V.id,class:j(["py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all border",f.value.role===V.id?"bg-indigo-600 text-white border-transparent shadow-lg shadow-indigo-500/30":"bg-slate-50 dark:bg-slate-800 text-slate-500 border-slate-100 dark:border-slate-700 hover:bg-slate-100"])},x(V.label),11,ar)),64))]),t("p",sr,x(H.value),1)]),t("button",{onClick:B,disabled:b.value||!f.value.email,class:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-black uppercase tracking-widest text-xs shadow-xl shadow-indigo-500/30 hover:bg-indigo-700 disabled:opacity-50 transition-all"},x(b.value?"SENDING...":"INVITE PERSON"),9,or)]),I[7]||(I[7]=t("div",{class:"h-px bg-slate-100 dark:bg-slate-800"},null,-1)),t("div",rr,[I[6]||(I[6]=t("h3",{class:"text-[11px] font-black uppercase tracking-widest text-slate-400 px-1"},"Current Members",-1)),t("div",ir,[(d(!0),u(J,null,ee(D.value,V=>(d(),u("div",{key:V.id,class:"flex items-center justify-between group"},[t("div",lr,[t("img",{src:V.avatar||"https://ui-avatars.com/api/?name="+V.display_name,class:"w-8 h-8 rounded-full object-cover"},null,8,dr),t("div",null,[t("p",ur,x(V.display_name),1),t("p",cr,x(V.pivot?.role||"member"),1)])]),g.value?(d(),u("button",{key:0,onClick:w=>G(V.id),class:"opacity-0 group-hover:opacity-100 p-2 text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 rounded-lg transition-all"},[...I[5]||(I[5]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("path",{d:"M18 6 6 18"}),t("path",{d:"m6 6 12 12"})],-1)])],8,pr)):h("",!0)]))),128))])])])])])):h("",!0)}},gr=tt(fr,[["__scopeId","data-v-a500b6d5"]]),vr={class:"p-6 transition-all duration-500 min-h-screen bg-slate-50/50 dark:bg-slate-950/50"},mr={class:"mb-10 space-y-6 px-2"},hr={class:"flex flex-col xl:flex-row items-center justify-between gap-3"},br={class:"flex items-center gap-6 w-full sm:w-auto"},xr={key:0,class:"flex items-center bg-white dark:bg-slate-900 p-1 rounded-xl border border-slate-100 dark:border-slate-800 shadow-sm"},wr={class:"flex items-center gap-4 w-full sm:w-auto justify-between sm:justify-end"},kr={class:"flex items-center gap-3 bg-white dark:bg-slate-900 p-1.5 pr-4 rounded-xl border border-slate-100 dark:border-slate-800 shadow-sm"},yr=["src"],_r={class:"hidden lg:block"},Dr={class:"text-sm font-bold text-slate-800 dark:text-white leading-none"},Cr={class:"flex items-center gap-1 border-l border-slate-100 dark:border-slate-800 ml-2 pl-2"},Mr={key:2,class:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-xl border border-dashed border-slate-200 dark:border-slate-700"},$r={key:0,class:"flex items-center gap-4 pt-4 border-t border-slate-100 dark:border-slate-800/50"},Tr={key:0,class:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse"},Sr={key:0},Er={class:"flex items-center justify-between mb-10"},Ir={class:"space-y-10"},Ar={key:0,class:"space-y-4"},Fr=["value"],jr={class:"space-y-4"},Pr={class:"grid grid-cols-2 gap-2"},Or=["onClick"],Nr={class:"space-y-4"},Yr={class:"grid grid-cols-1 gap-2"},Lr=["onClick"],Hr={class:"text-[10px] uppercase tracking-widest"},Vr={key:0,class:"w-1.5 h-1.5 rounded-full bg-indigo-600 animate-pulse"},Br={class:"space-y-4"},Rr={key:0,class:"grid grid-cols-2 gap-4 animate-in fade-in slide-in-from-top-2 duration-300"},Wr={class:"space-y-1"},Ur={class:"space-y-1"},zr={class:"mt-12 flex items-center gap-3"},Kr={key:1,class:"flex items-center justify-between px-6 mb-4"},Gr={class:"flex items-center gap-1.5"},Jr={class:"text-[10px] font-black uppercase tracking-widest text-slate-400 italic"},qr=["onDragover","onDrop"],Xr={class:"flex items-center justify-between mb-8 px-2"},Zr={class:"flex items-center gap-3"},Qr={class:"text-sm font-heading font-black text-slate-800 dark:text-slate-100 uppercase tracking-widest"},ei={class:"text-[12px] text-slate-400 font-bold uppercase tracking-tighter"},ti={class:"space-y-5"},ni=["draggable","onDragstart","onTouchstart","onTouchend","onClick"],ai={class:"flex justify-between items-start mb-4"},si={class:"flex items-center gap-2"},oi={class:"flex items-center -space-x-1.5 flex-row-reverse justify-end"},ri=["src","title"],ii=["src","title"],li=["src","title"],di=["src","title"],ui=["onClick"],ci=["onClick"],pi={class:"flex-1"},fi={class:"font-bold text-slate-800 dark:text-slate-100 group-hover:text-indigo-600 transition-colors mb-2 leading-tight text-lg"},gi={key:0,class:"flex items-center gap-1.5 mb-2"},vi={class:"text-[10px] font-black uppercase tracking-widest text-indigo-600/80 bg-indigo-50 dark:bg-indigo-500/10 px-2 py-0.5 rounded-md"},mi={key:1,class:"flex items-center gap-1.5 mb-2"},hi={class:"text-[10px] font-black uppercase tracking-widest text-slate-400 bg-slate-50 dark:bg-slate-800/50 px-2 py-0.5 rounded-md"},bi={key:2,class:"mb-3 flex items-center gap-2"},xi={class:"text-[9px] font-black uppercase tracking-[0.15em] px-2.5 py-1 bg-slate-100 dark:bg-slate-800 text-slate-500 rounded-lg flex items-center gap-1.5 ring-1 ring-slate-200 dark:ring-slate-700 shadow-sm transition-all group-hover:bg-indigo-50 dark:group-hover:bg-indigo-500/10 group-hover:text-indigo-600 group-hover:ring-indigo-100 dark:group-hover:ring-indigo-500/30"},wi={class:"text-xs"},ki={key:3,class:"mb-2 flex items-center gap-1.5"},yi={key:4,class:"mb-2 flex items-center gap-1.5"},_i=["onClick"],Di={key:0,class:"text-sm text-slate-400 dark:text-slate-500 line-clamp-1 italic leading-relaxed mb-4"},Ci={key:0,class:"mt-4 space-y-4 border-t border-slate-50 dark:border-slate-700/50 pt-4 animate-in slide-in-from-top-2"},Mi={class:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed"},$i={key:0,class:"space-y-1.5"},Ti=["onClick"],Si={key:0,class:"w-2 h-2 rounded-sm bg-emerald-500"},Ei={key:1,class:"flex items-center gap-2"},Ii={class:"h-1 flex-1 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden"},Ai={class:"text-[11px] font-black text-slate-400"},Fi={class:"flex items-center justify-between mt-6 pt-4 border-t border-slate-50 dark:border-slate-700/50"},ji={class:"flex items-center gap-3"},Pi=["title"],Oi={key:1,class:"flex items-center gap-1.5 text-[12px] font-black text-slate-400 uppercase tracking-widest"},Ni={class:"flex items-center gap-2"},Yi={class:"text-[9px] font-bold text-slate-300 uppercase tracking-widest"},Li={key:0,class:"py-12 flex flex-col items-center justify-center text-slate-300 dark:text-slate-700 space-y-4"},Hi={key:3,class:"w-full"},Vi={key:0,class:"bg-white dark:bg-slate-900 rounded-[3rem] shadow-2xl p-8 border border-slate-100 dark:border-slate-800 overflow-hidden"},Bi={class:"w-full text-left"},Ri={class:"divide-y divide-slate-50 dark:divide-slate-800"},Wi=["onClick"],Ui={class:"py-6 px-4"},zi={class:"font-bold text-slate-800 dark:text-white group-hover:text-indigo-600 transition-colors"},Ki={key:0,class:"text-[9px] font-black uppercase tracking-widest text-slate-400 mt-1"},Gi={class:"py-6 px-4"},Ji={class:"text-[12px] font-black uppercase tracking-tight py-1 px-3 rounded-lg bg-slate-100 dark:bg-slate-800 text-slate-500 w-fit block mb-1"},qi={key:0,class:"text-[9px] font-black uppercase text-emerald-500 font-bold tracking-widest pl-1"},Xi={key:1,class:"text-[9px] font-black uppercase text-amber-500 font-bold tracking-widest pl-1"},Zi={class:"py-6 px-4"},Qi={class:"py-6 px-4"},el={class:"flex items-center -space-x-2"},tl=["title","src"],nl=["title","src"],al=["title","src"],sl={key:0,class:"text-[8px] font-black uppercase tracking-tighter text-slate-400 mt-1"},ol={class:"py-6 px-4 text-sm font-bold text-slate-400"},rl={class:"py-6 px-4 text-right"},il={class:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity"},ll=["onClick"],dl=["onClick"],ul={key:1,class:"space-y-4 px-2"},cl=["onTouchstart","onTouchend"],pl={class:"flex flex-col gap-4"},fl={class:"flex items-center gap-2"},gl={class:"text-right flex flex-col items-end gap-1"},vl={class:"text-[10px] font-black uppercase tracking-widest text-slate-400 bg-slate-50 dark:bg-slate-800 px-3 py-1 rounded-lg block"},ml={key:0,class:"text-[8px] font-black uppercase text-emerald-500 mt-1"},hl={key:1,class:"text-[8px] font-black uppercase text-amber-500 mt-1"},bl={class:"space-y-2"},xl={class:"text-xl font-bold text-slate-800 dark:text-white leading-tight"},wl={key:0,class:"flex items-center gap-2"},kl=["src"],yl={class:"text-[10px] font-black uppercase tracking-widest text-indigo-600"},_l={key:1,class:"flex items-center gap-2"},Dl={class:"text-[10px] font-black uppercase tracking-widest text-slate-400 bg-slate-50 dark:bg-slate-800 px-2 py-0.5 rounded"},Cl={class:"flex items-center justify-between pt-4 border-t border-slate-50 dark:border-slate-800"},Ml={class:"flex items-center gap-2"},$l={class:"text-[10px] font-black uppercase tracking-widest text-slate-400"},Tl={class:"flex items-center -space-x-1.5"},Sl=["src","title"],El={key:0,class:"py-20 text-center bg-white dark:bg-slate-900 rounded-[3rem] border-2 border-dashed border-slate-100 dark:border-slate-800"},Il={class:"fixed inset-0 bg-slate-900/60 backdrop-blur-md flex items-center justify-center p-4 sm:p-6 z-[9999] overflow-y-auto"},Al={class:"bg-white dark:bg-slate-900 rounded-[2rem] sm:rounded-[3rem] shadow-2xl w-full max-w-[95%] sm:max-w-lg lg:max-w-xl max-h-[90vh] flex flex-col border border-slate-200 dark:border-slate-800 transition-all duration-500 relative animate-in zoom-in-95 duration-200"},Fl={key:0,class:"absolute top-0 left-0 right-0 bg-indigo-600 text-white px-6 py-2 flex items-center justify-between z-20 rounded-t-[2rem] sm:rounded-t-[3rem]"},jl={class:"flex items-center gap-2"},Pl={class:"text-[10px] font-black uppercase tracking-widest"},Ol={class:"flex-1 overflow-y-auto px-5 sm:px-8 py-6 space-y-5 custom-scrollbar-hide"},Nl={class:"flex p-1 bg-slate-50 dark:bg-slate-800/50 rounded-2xl gap-1 overflow-x-auto no-scrollbar"},Yl=["onClick"],Ll={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Hl={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Vl={key:0},Bl=["value"],Rl={class:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800"},Wl={class:"px-5 sm:px-8 py-4 sm:py-6 flex gap-3 sm:gap-4 sticky bottom-0 bg-white dark:bg-slate-900 z-10 rounded-b-[2rem] sm:rounded-b-[3rem] border-t border-slate-50 dark:border-slate-800"},Ul=["disabled"],zl={key:6,class:"fixed inset-0 bg-slate-900/60 backdrop-blur-md flex items-center justify-center p-4 sm:p-6 z-[9999] overflow-y-auto"},Kl={class:"bg-white dark:bg-slate-900 rounded-[2rem] sm:rounded-[3rem] shadow-2xl w-full max-w-[95%] sm:max-w-md max-h-[90vh] flex flex-col border border-slate-200 dark:border-slate-800 relative overflow-hidden animate-in zoom-in-95 duration-200"},Gl={class:"flex-1 overflow-y-auto p-5 sm:p-10 space-y-6"},Jl={class:"grid grid-cols-3 gap-2"},ql=["onClick"],Xl={class:"p-5 sm:p-10 pt-4 flex gap-4 border-t border-slate-50 dark:border-slate-800"},Zl={key:0,class:"fixed inset-0 z-[10001] flex items-end"},Ql={class:"relative w-full bg-white dark:bg-slate-900 h-full sm:h-auto sm:rounded-t-[2.5rem] flex flex-col shadow-2xl animate-in slide-in-from-bottom duration-300 overflow-hidden"},ed={class:"flex items-center justify-between p-6 border-b border-slate-100 dark:border-slate-800"},td={class:"flex-1 overflow-y-auto p-8 space-y-10"},nd={class:"space-y-4"},ad={class:"grid grid-cols-3 gap-2 bg-slate-50 dark:bg-slate-800 p-1 rounded-xl"},sd=["onClick"],od={class:"grid grid-cols-1 gap-6"},rd={class:"space-y-4"},id={class:"flex gap-4"},ld={class:"space-y-10"},dd={class:"space-y-4"},ud={class:"flex items-center justify-between px-1"},cd={key:0,class:"text-[8px] font-black uppercase text-indigo-500 bg-indigo-50 px-2 py-1 rounded"},pd=["disabled"],fd=["value"],gd={class:"space-y-4"},vd={class:"grid grid-cols-2 gap-3"},md=["onClick"],hd={class:"space-y-4"},bd={class:"grid grid-cols-2 gap-3"},xd=["onClick"],wd={class:"space-y-4"},kd={class:"grid grid-cols-1 gap-3"},yd={key:0,class:"grid grid-cols-2 gap-4 animate-in fade-in duration-300"},_d={class:"p-6 border-t border-slate-100 dark:border-slate-800"},Dd={key:8,class:"fixed bottom-6 left-1/2 -translate-x-1/2 bg-slate-900/90 backdrop-blur-md text-white px-8 py-3 rounded-2xl shadow-2xl border border-slate-800 z-[40] flex items-center gap-4 animate-in slide-in-from-bottom-10 duration-500"},Cd={__name:"Dashboard",setup(o){const i=Rt(),e=Ut(),{currentWorkspace:b}=Wt(e),D=[{id:"todo",name:"Plan",bgClass:"bg-indigo-500/10",dotClass:"bg-indigo-500"},{id:"in_progress",name:"Work",bgClass:"bg-amber-500/10",dotClass:"bg-amber-500"},{id:"testing",name:"Review",bgClass:"bg-blue-500/10",dotClass:"bg-blue-500"},{id:"done",name:"Complete",bgClass:"bg-emerald-500/10",dotClass:"bg-emerald-500"}],f=$e(()=>(b.value?.settings||{}).enable_review_step!==!1||e.globalMode?D:D.filter(N=>N.id!=="testing")),T=R("board"),H=R([]),g=R(null),Q=R(!1),B=R(!1),G=R(null),P=R(!1),I=R(!1),V=R(null),w=R(!1),oe=R([]),ie=R(!1),W=R(!1),k=R(0),y=R(!1),M=R(null),O=R(!1),q=()=>{const m=window.innerWidth;ie.value=m<768,W.value=m>=768&&m<1200};let le=null;const Te=m=>{!ie.value||le||(le=setTimeout(()=>{const a=m.target.scrollLeft,N=m.target.offsetWidth,r=Math.round(a/N);r!==k.value&&(k.value=r,navigator.vibrate&&navigator.vibrate(5)),le=null},100))},pe=R(null),S=(m,a)=>{ie.value&&(O.value=!1,pe.value=a.id,M.value=setTimeout(()=>{O.value=!0,navigator.vibrate&&navigator.vibrate([10,30,10])},600))},c=(m,a)=>{clearTimeout(M.value),!O.value&&pe.value===a.id&&(g.value=a.id)},C=()=>{clearTimeout(M.value)};wt(()=>{q(),window.addEventListener("resize",q),window.addEventListener("focus",()=>{he(!0)});const m=setInterval(()=>{document.visibilityState==="visible"&&he(!0)},3e4);e.fetchWorkspaces(),cn(()=>{window.removeEventListener("resize",q),window.removeEventListener("focus",he),clearInterval(m)})});const re=m=>{oe.value.includes(m)?oe.value=oe.value.filter(a=>a!==m):oe.value.push(m)},Ae=m=>m.subtasks?.length>0||m.checklists?.length>0||m.description,ye=m=>m.subtasks?.length?m.subtasks.every(a=>a.status==="done"):!1,_e=$e(()=>!b.value||!i.user?"viewer":String(b.value.owner_id)===String(i.user.id)?"owner":b.value.members?.find(a=>a.id===i.user.id)?.pivot?.role||b.value.pivot?.role||"viewer"),Fe=$e(()=>!e.globalMode),ut=m=>{const a=m.subtasks?.filter(r=>r.status==="done").length||0,N=m.subtasks?.length||0;return`${a}/${N} Sub-tasks Completed`},kt=m=>m.checklists?.length?m.checklists.filter(N=>N.is_completed).length/m.checklists.length*100:0,ze=m=>{if(!m||!i.user)return"viewer";const a=m.board?.plan?.workspace;if(!a)return"viewer";const N=e.workspaces.find(r=>r.id===a.id);return N?N.owner_id===i.user.id?"owner":N.pivot?.role||"viewer":a.owner_id===i.user.id?"owner":"viewer"},ct=m=>{if(!m||!i.user)return!1;const a=m.created_by===i.user.id,N=ze(m);return a||N==="owner"||N==="admin"},pt=async m=>{if(confirm("Are you sure you want to delete this task?"))try{await ke.delete(`/api/tasks/${m.id}`),he()}catch{alert("Delete failed")}},ft=[{id:"all",label:"All Time"},{id:"today",label:"Today"},{id:"last_7_days",label:"Last 7 Days"},{id:"last_30_days",label:"Last 30 Days"},{id:"last_360_days",label:"Last 360 Days"}],He=()=>{X.value={title:"",description:"",priority:"medium",status:"todo",due_date:"",due_time:"",start_date:"",start_time:"",assigned_to:null,is_public:!0}},X=R({title:"",description:"",priority:"medium",status:"todo",due_date:"",due_time:"",start_date:"",start_time:"",assigned_to:null,is_public:!0}),me=R(null);We(()=>X.value.due_date,m=>{if(!m){me.value=null;return}const a=new Date,r=(new Date(m)-a)/(1e3*60*60);r>0&&r<24?me.value={message:"This is due soon. Set to High priority?",priority:"high"}:r>0&&r<72?me.value={message:"Short deadline. Set to Medium priority?",priority:"medium"}:me.value=null}),We(()=>X.value.start_date,m=>{m&&!X.value.due_date&&(X.value.due_date=m)});const je=()=>{me.value&&(X.value.priority=me.value.priority,me.value=null)},Ke=m=>{switch(m){case"Personal":return"";case"Work":return"";case"Company":return"";case"Team":return"";default:return""}},F=R({priority:null,monthYear:"",timeRange:"all",customStart:"",customEnd:"",workspaceId:null}),at=$e(()=>F.value.priority!==null||F.value.timeRange!=="all"||!!F.value.monthYear||e.globalMode&&F.value.workspaceId!==null),Ve=()=>{F.value={priority:null,monthYear:null,timeRange:"all",workspaceId:null}},Pe=$e(()=>H.value.filter(m=>{if(e.globalMode&&F.value.workspaceId){const r=m.board?.plan?.workspace_id;if(Number(r)!==Number(F.value.workspaceId))return!1}if(F.value.priority&&m.priority!==F.value.priority)return!1;const a=new Date,N=new Date(m.deadline||m.created_at);if(F.value.timeRange!=="all"){if(F.value.timeRange==="today"){const r=new Date().toISOString().slice(0,10);if((m.deadline||m.created_at).slice(0,10)!==r)return!1}else if(F.value.timeRange==="last_7_days"){const r=new Date(new Date().setDate(a.getDate()-7));if(N<r)return!1}else if(F.value.timeRange==="last_14_days"){const r=new Date(new Date().setDate(a.getDate()-14));if(N<r)return!1}else if(F.value.timeRange==="last_30_days"){const r=new Date(new Date().setDate(a.getDate()-30));if(N<r)return!1}else if(F.value.timeRange==="last_360_days"){const r=new Date(new Date().setDate(a.getDate()-360));if(N<r)return!1}else if(F.value.timeRange==="custom"){if(F.value.customStart&&N<new Date(F.value.customStart))return!1;if(F.value.customEnd){const r=new Date(F.value.customEnd);if(r.setHours(23,59,59),N>r)return!1}}}if(F.value.monthYear){const[r,K]=F.value.monthYear.split("-");if(N.getFullYear()!==parseInt(r)||N.getMonth()+1!==parseInt(K))return!1}return!0}).sort((m,a)=>{const N={urgent:4,high:3,medium:2,low:1};return(N[a.priority]||0)-(N[m.priority]||0)})),yt=()=>{Q.value=!0},he=async(m=!1)=>{const a=e.globalMode?"all":b.value?.id;if(!(!a&&!e.globalMode)){m||(B.value=!0);try{const N=await ke.get("/api/tasks",{params:{workspace_id:a}}),r=Array.isArray(N.data)?N.data:[];JSON.stringify(H.value)!==JSON.stringify(r)&&(H.value=r)}catch(N){console.error("Error fetching tasks:",N)}finally{m||(B.value=!1)}}};We(b,m=>{!e.globalMode&&m&&he()},{deep:!0}),We(()=>e.globalMode,m=>{F.value.workspaceId=null,he()},{immediate:!0});const _t=async()=>{if(X.value.title){B.value=!0;try{const m={...X.value},a=(r,K)=>{if(!r)return null;const v=K||"00:00";if(r.includes("/"))return`${r} ${v}:00`;const[te,Ye,ot]=r.split("-");return`${ot}/${Ye}/${te} ${v}:00`};if(m.due_date&&(m.deadline=a(m.due_date,m.due_time||"23:59")),m.start_date&&(m.start_date=a(m.start_date,m.start_time||"09:00")),b.value){m.workspace_id=b.value.id;const K=b.value.plans?.[0]?.boards?.[0];if(K)m.board_id=K.id;else{alert("No boards found in this workspace. Please create a plan and board first."),B.value=!1;return}}const N={...m};delete N.due_date,delete N.due_time,delete N.start_time,await ke.post("/api/tasks",N),Q.value=!1,He(),await he()}catch(m){console.error("Task save error:",m),alert("Error: "+(m.response?.data?.message||"Connection failed"))}finally{B.value=!1}}},Be=R(!1),be=R({name:"",type:"Personal",intent:"Personal Use"}),Ge=()=>{Be.value=!0},Dt=async()=>{if(be.value.name)try{await e.createWorkspace({name:be.value.name,type:be.value.type,intent:be.value.intent}),Be.value=!1,be.value={name:"",type:"Personal",intent:"Personal Use"},await e.fetchWorkspaces()}catch(m){const a=m.response?.data?.message||"Failed to create workspace";alert(a)}},Ct=m=>{if(!m)return"";const a=new Date(m),N=new Date,r=a.toDateString()===N.toDateString(),K=a.getHours()!==23||a.getMinutes()!==59,v=String(a.getDate()).padStart(2,"0"),te=String(a.getMonth()+1).padStart(2,"0"),Ye=a.getFullYear(),ot=`${v}/${te}/${Ye}`,se=K?a.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"";return r?`Today ${se}`.trim():`${ot} ${se}`.trim()},gt=(m,a)=>{m.dataTransfer.dropEffect="move",m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("taskId",a.id),m.target.classList.add("dragging")},st=async(m,a)=>{if(G.value=null,!Fe.value)return;const N=m.dataTransfer.getData("taskId"),r=H.value.find(K=>K.id==N);if(r){if(r.status===a)return;let K={status:a};a==="in_progress"&&r.assigned_to!==i.user.id&&(K.assigned_to=i.user.id);const v=r.status,te=r.assigned_to;r.status=a;try{await ke.patch(`/api/tasks/${N}`,K),a==="done"&&!r.delivery&&(V.value=r,I.value=!0),he()}catch(Ye){r.status=v,r.assigned_to=te,alert("Failed to sync. "+(Ye.response?.data?.message||"Server error"))}}},Je=m=>{switch(m){case"urgent":return"bg-rose-500 text-white shadow-lg shadow-rose-500/30";case"high":return"bg-orange-500 text-white shadow-lg shadow-orange-500/30";case"medium":return"bg-indigo-100 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-400";default:return"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}},Ne=m=>{if(!m)return"No date";const a=new Date(m),N=String(a.getDate()).padStart(2,"0"),r=String(a.getMonth()+1).padStart(2,"0"),K=a.getFullYear();return`${N}/${r}/${K}`};return(m,a)=>{const N=fn("router-link");return d(),u("div",vr,[t("header",mr,[t("div",hr,[t("div",br,[a[47]||(a[47]=t("img",{src:"https://i.postimg.cc/jqQRtc95/thinker-(1).png",alt:"THINKER Logo",class:"h-20 lg:h-30 w-auto object-contain"},null,-1)),ue(Ko,{onCreate:Ge})]),ie.value?h("",!0):(d(),u("div",xr,[t("button",{onClick:a[0]||(a[0]=r=>T.value="board"),class:j([[T.value==="board"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"],"px-5 py-2 rounded-lg text-xs font-black uppercase tracking-widest transition-colors duration-200"])}," Board ",2),t("button",{onClick:a[1]||(a[1]=r=>T.value="list"),class:j([[T.value==="list"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"],"px-5 py-2 rounded-lg text-xs font-black uppercase tracking-widest transition-colors duration-200"])}," List ",2),t("button",{onClick:a[2]||(a[2]=r=>T.value="calendar"),class:j([[T.value==="calendar"?"bg-indigo-600 text-white":"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"],"px-5 py-2 rounded-lg text-xs font-black uppercase tracking-widest transition-colors duration-200"])}," Calendar ",2)])),t("div",wr,[ie.value?(d(),u("button",{key:0,onClick:a[3]||(a[3]=r=>y.value=!0),class:"p-2 sm:hidden bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl text-slate-500"},[...a[48]||(a[48]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M4 4h16v2.17a2 2 0 0 1-.58 1.42L13 14v5l-2 2v-7L4.58 7.59A2 2 0 0 1 4 6.17V4z"})],-1)])])):h("",!0),t("div",kr,[t("img",{src:Y(i).user?.avatar||"https://ui-avatars.com/api/?name="+Y(i).user?.display_name,class:"w-8 h-8 rounded-full object-cover"},null,8,yr),t("div",_r,[t("p",Dr,x(Y(i).user?.display_name),1)]),t("div",Cr,[ue(N,{to:"/settings",class:"p-1.5 text-slate-300 hover:text-indigo-600 transition-colors",title:"Settings"},{default:Le(()=>[...a[49]||(a[49]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M12 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),t("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})],-1)])]),_:1}),t("button",{onClick:a[4]||(a[4]=(...r)=>Y(i).logout&&Y(i).logout(...r)),class:"p-1.5 text-slate-300 hover:text-rose-500 transition-colors"},[...a[50]||(a[50]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M14 8v-2a2 2 0 0 0-2-2h-7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2v-2"}),t("path",{d:"M9 12h12l-3-3"}),t("path",{d:"M18 15l3-3"})],-1)])])])]),_e.value!=="viewer"&&!Y(e).globalMode?(d(),u("button",{key:1,onClick:yt,class:"px-5 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl transition-colors shadow-lg shadow-indigo-500/20 font-bold flex items-center gap-2"},[...a[51]||(a[51]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("path",{d:"M5 12h14"}),t("path",{d:"M12 5v14"})],-1),t("span",{class:"hidden sm:inline"},"New Task",-1)])])):Y(e).globalMode?(d(),u("div",Mr,[...a[52]||(a[52]=[t("p",{class:"text-[10px] font-black uppercase tracking-widest text-slate-400"},"View Only Mode",-1)])])):h("",!0)])]),ie.value?h("",!0):(d(),u("div",$r,[t("button",{onClick:a[5]||(a[5]=r=>Y(e).toggleGlobalMode()),class:j(["flex items-center gap-2 px-4 py-2 rounded-xl transition-colors border",Y(e).globalMode?"bg-indigo-600 text-white border-indigo-600 shadow-md":"bg-white dark:bg-slate-900 text-slate-400 border-slate-200 dark:border-slate-800 hover:text-indigo-600"])},[...a[53]||(a[53]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})],-1),t("span",{class:"text-[10px] font-black uppercase tracking-widest"},"Global View",-1)])],2),t("button",{onClick:a[6]||(a[6]=r=>w.value=!0),class:j(["flex items-center gap-2 px-4 py-2 rounded-xl border transition-colors",at.value?"bg-indigo-50 border-indigo-100 text-indigo-600 dark:bg-indigo-500/10 dark:border-indigo-500/20":"bg-white dark:bg-slate-900 text-slate-400 border-slate-200 dark:border-slate-800 hover:text-indigo-600"])},[a[54]||(a[54]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M4 4h16v2.17a2 2 0 0 1-.58 1.42L13 14v5l-2 2v-7L4.58 7.59A2 2 0 0 1 4 6.17V4z"})],-1)),a[55]||(a[55]=t("span",{class:"text-[10px] font-black uppercase tracking-widest"},"Filter",-1)),at.value?(d(),u("div",Tr)):h("",!0)],2),Y(b)&&_e.value==="owner"&&!Y(e).globalMode?(d(),u("button",{key:0,onClick:a[7]||(a[7]=r=>P.value=!0),class:"flex items-center gap-2 px-4 py-2 rounded-xl border bg-indigo-50 dark:bg-indigo-500/10 text-indigo-600 border-indigo-100 dark:border-indigo-500/20 hover:bg-indigo-600 hover:text-white transition-colors"},[...a[56]||(a[56]=[Ee('<svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-319f685a><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" data-v-319f685a></path><circle cx="9" cy="7" r="4" data-v-319f685a></circle><line x1="19" y1="8" x2="19" y2="14" data-v-319f685a></line><line x1="16" y1="11" x2="22" y2="11" data-v-319f685a></line></svg><span class="text-[10px] font-black uppercase tracking-widest" data-v-319f685a>Share</span>',2)])])):h("",!0)]))]),ie.value?h("",!0):(d(),u("div",Sr,[w.value?(d(),u("div",{key:0,class:"fixed inset-0 z-[10000]",onClick:a[15]||(a[15]=r=>w.value=!1)},[a[66]||(a[66]=t("div",{class:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm"},null,-1)),t("div",{onClick:a[14]||(a[14]=ge(()=>{},["stop"])),class:"absolute right-0 top-0 bottom-0 w-96 bg-white dark:bg-slate-900 shadow-2xl border-l border-slate-100 dark:border-slate-800 p-10 overflow-y-auto animate-in slide-in-from-right duration-300"},[t("div",Er,[a[58]||(a[58]=t("div",null,[t("h2",{class:"text-2xl font-black text-slate-800 dark:text-white uppercase tracking-widest"},"Filters"),t("p",{class:"text-[10px] font-black uppercase text-slate-400 mt-1"},"Refine your view")],-1)),t("button",{onClick:a[8]||(a[8]=r=>w.value=!1),class:"p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-all"},[...a[57]||(a[57]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Ir,[Y(e).globalMode?(d(),u("div",Ar,[a[60]||(a[60]=t("div",{class:"flex items-center justify-between px-1"},[t("p",{class:"text-[10px] font-black uppercase tracking-widest text-slate-400"},"Context")],-1)),ae(t("select",{"onUpdate:modelValue":a[9]||(a[9]=r=>F.value.workspaceId=r),class:"w-full h-14 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl px-6 text-sm font-bold shadow-sm outline-none transition-all"},[a[59]||(a[59]=t("option",{value:null},"All Contexts",-1)),(d(!0),u(J,null,ee(Y(e).workspaces,r=>(d(),u("option",{key:r.id,value:r.id},x(r.name),9,Fr))),128))],512),[[Ze,F.value.workspaceId]])])):h("",!0),t("div",jr,[a[61]||(a[61]=t("p",{class:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1"},"Priority",-1)),t("div",Pr,[(d(),u(J,null,ee([null,"urgent","high","medium","low"],r=>t("button",{key:r,onClick:K=>F.value.priority=r,class:j(["h-12 rounded-xl text-[10px] font-black uppercase tracking-widest border transition-all",[F.value.priority===r?"bg-indigo-600 text-white border-indigo-600 shadow-md translate-y-[-2px]":"bg-slate-50 dark:bg-slate-800 text-slate-500 border-transparent hover:border-slate-200 dark:hover:border-slate-700"]])},x(r||"All Priorities"),11,Or)),64))])]),t("div",Nr,[a[62]||(a[62]=t("p",{class:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1"},"Timeline",-1)),t("div",Yr,[(d(),u(J,null,ee(ft,r=>t("button",{key:r.id,onClick:K=>{F.value.timeRange=r.id,F.value.monthYear=""},class:j(["h-12 rounded-xl border flex items-center justify-between px-6 transition-all",[F.value.timeRange===r.id?"bg-indigo-50 border-indigo-100 text-indigo-600 dark:bg-indigo-500/10 dark:border-indigo-500/30 font-black":"bg-white dark:bg-slate-900 text-slate-500 border-slate-100 dark:border-slate-800"]])},[t("span",Hr,x(r.label),1),F.value.timeRange===r.id?(d(),u("div",Vr)):h("",!0)],10,Lr)),64))])]),t("div",Br,[t("div",{onClick:a[12]||(a[12]=r=>F.value.timeRange="custom"),class:j(["p-6 rounded-2xl border cursor-pointer transition-all",F.value.timeRange==="custom"?"bg-indigo-50 border-indigo-200 dark:bg-indigo-500/5 dark:border-indigo-500/20":"bg-slate-50 dark:bg-slate-800 border-transparent"])},[a[65]||(a[65]=Ee('<div class="flex items-center gap-3 mb-4" data-v-319f685a><div class="w-8 h-8 rounded-lg bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 flex items-center justify-center" data-v-319f685a><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-319f685a><rect width="18" height="18" x="3" y="4" rx="2" ry="2" data-v-319f685a></rect><line x1="16" y1="2" x2="16" y2="6" data-v-319f685a></line><line x1="8" y1="2" x2="8" y2="6" data-v-319f685a></line><line x1="3" y1="10" x2="21" y2="10" data-v-319f685a></line></svg></div><span class="text-[10px] font-black uppercase tracking-widest text-slate-800 dark:text-white" data-v-319f685a>Custom Range</span></div>',1)),F.value.timeRange==="custom"?(d(),u("div",Rr,[t("div",Wr,[a[63]||(a[63]=t("p",{class:"text-[8px] font-black uppercase text-slate-400 px-1"},"From",-1)),ae(t("input",{type:"date","onUpdate:modelValue":a[10]||(a[10]=r=>F.value.customStart=r),class:"w-full bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-xl px-3 py-2 text-[10px] font-bold shadow-sm"},null,512),[[ce,F.value.customStart]])]),t("div",Ur,[a[64]||(a[64]=t("p",{class:"text-[8px] font-black uppercase text-slate-400 px-1"},"To",-1)),ae(t("input",{type:"date","onUpdate:modelValue":a[11]||(a[11]=r=>F.value.customEnd=r),class:"w-full bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-xl px-3 py-2 text-[10px] font-bold shadow-sm"},null,512),[[ce,F.value.customEnd]])])])):h("",!0)],2)])]),t("div",zr,[t("button",{onClick:Ve,class:"flex-1 py-4 rounded-2xl border border-slate-100 dark:border-slate-800 text-[10px] font-black uppercase tracking-widest text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all"},"Reset All"),t("button",{onClick:a[13]||(a[13]=r=>w.value=!1),class:"flex-[2] py-4 bg-indigo-600 text-white rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl shadow-indigo-500/20 active:scale-95 transition-all"},"Apply Refinement")])])])):h("",!0)])),ie.value&&T.value==="board"?(d(),u("div",Kr,[t("div",Gr,[(d(!0),u(J,null,ee(f.value,(r,K)=>(d(),u("div",{key:"indicator-"+r.id,class:j(["h-1.5 rounded-full transition-all duration-300",k.value===K?"w-6 bg-indigo-600":"w-1.5 bg-slate-200 dark:bg-slate-800"])},null,2))),128))]),t("span",Jr,x(f.value[k.value].name),1)])):h("",!0),T.value==="board"?(d(),u("div",{key:2,id:"kanban-container",class:j(["flex gap-4 sm:gap-8 transition-all duration-300 overflow-x-auto pb-4 lg:grid",[f.value.length===3?"lg:grid-cols-3":"lg:grid-cols-4",ie.value?"snap-x snap-mandatory scrollbar-hide":"custom-scrollbar"]]),onScroll:Te},[(d(!0),u(J,null,ee(f.value,(r,K)=>(d(),u("div",{key:r.id,onDragover:ge(v=>G.value=r.id,["prevent"]),onDragleave:a[17]||(a[17]=v=>G.value=null),onDrop:v=>st(v,r.id),class:j(["flex-shrink-0 w-[85vw] sm:w-[70vw] lg:w-auto snap-center pl-4 first:pl-0 lg:pl-0",["rounded-[2.5rem] p-4 sm:p-6 min-h-[500px] lg:min-h-[700px] transition-all duration-500 border-2 border-dashed",G.value===r.id?"bg-slate-200/80 dark:bg-slate-800/80 border-indigo-400 shadow-2xl z-10":"bg-slate-100/40 dark:bg-slate-900/40 border-slate-200/50 dark:border-slate-800/50"]])},[t("header",Xr,[t("div",Zr,[t("div",{class:j(["w-10 h-10 rounded-2xl flex items-center justify-center shadow-lg",r.bgClass])},[t("span",{class:j(["w-3 h-3 rounded-full",r.dotClass])},null,2)],2),t("div",null,[t("h3",Qr,x(r.name),1),t("p",ei,x(Pe.value.filter(v=>v.status===r.id).length)+" Tasks",1)])])]),t("div",ti,[(d(!0),u(J,null,ee(Pe.value.filter(v=>v.status===r.id),v=>(d(),u("div",{key:v.id,draggable:!ie.value||O.value&&pe.value===v.id,onDragstart:te=>gt(te,v),onDragend:a[16]||(a[16]=te=>pe.value=null),onTouchstart:te=>S(te,v),onTouchend:te=>c(te,v),onTouchmove:C,onClick:te=>g.value=v.id,class:j(["bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-xl shadow-slate-200/40 dark:shadow-none border border-slate-100 dark:border-slate-700/50 hover:border-indigo-500 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all duration-300 cursor-pointer group relative overflow-hidden transition-pop active-tap",{"ring-4 ring-indigo-500/20 scale-105 z-20":O.value&&pe.value===v.id}])},[t("div",{class:j(["absolute left-0 top-0 bottom-0 w-1",r.dotClass])},null,2),t("div",ai,[t("span",{class:j([Je(v.priority),"text-[12px] uppercase font-black px-3 py-1 rounded-full tracking-widest"])},x(v.priority),3),t("div",si,[t("div",oi,[v.working_by?(d(),u("img",{key:0,src:v.working_by.avatar||"https://ui-avatars.com/api/?name="+v.working_by.display_name,title:"Working: "+v.working_by.display_name,class:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-slate-800 border-2 border-indigo-500 hover:z-20 hover:scale-110 transition-all object-cover relative z-30"},null,8,ri)):h("",!0),v.assignee&&(!v.working_by||v.assignee.id!==v.working_by.id)?(d(),u("img",{key:1,src:v.assignee?.avatar||"https://ui-avatars.com/api/?name="+v.assignee?.display_name,title:"Assigned to: "+v.assignee?.display_name,class:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-slate-800 hover:z-20 hover:scale-110 transition-all object-cover relative z-20"},null,8,ii)):h("",!0),v.assigned_by&&v.assigned_by.id!==v.creator?.id&&v.assigned_by.id!==v.assignee?.id&&(!v.working_by||v.assigned_by.id!==v.working_by.id)?(d(),u("img",{key:2,src:v.assigned_by.avatar||"https://ui-avatars.com/api/?name="+v.assigned_by.display_name,title:"Assigned by: "+v.assigned_by.display_name,class:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-slate-800 hover:z-20 hover:scale-110 transition-all object-cover relative z-15"},null,8,li)):h("",!0),v.creator&&(!v.assignee||v.assignee.id!==v.creator.id)&&(!v.working_by||v.creator.id!==v.working_by.id)?(d(),u("img",{key:3,src:v.creator?.avatar||"https://ui-avatars.com/api/?name="+(v.creator?.display_name||"System"),title:"Created by: "+(v.creator?.display_name||"System"),class:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-slate-800 hover:z-20 hover:scale-110 transition-all object-cover"},null,8,di)):h("",!0)]),ct(v)?(d(),u("button",{key:0,onClick:ge(te=>pt(v),["stop"]),class:"opacity-0 group-hover:opacity-100 p-1.5 text-slate-300 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 rounded-lg transition-all"},[...a[67]||(a[67]=[Ee('<svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-319f685a><path d="M3 6h18" data-v-319f685a></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" data-v-319f685a></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" data-v-319f685a></path><line x1="10" y1="11" x2="10" y2="17" data-v-319f685a></line><line x1="14" y1="11" x2="14" y2="17" data-v-319f685a></line></svg>',1)])],8,ui)):h("",!0)])]),t("div",{class:"flex items-start justify-between gap-2",onClick:te=>g.value=v.id},[t("div",pi,[t("h4",fi,x(v.title),1),r.id==="in_progress"&&v.working_by?(d(),u("div",gi,[t("span",vi," Work by  "+x(v.working_by.display_name),1)])):h("",!0),v.assigned_by?(d(),u("div",mi,[t("span",hi," Assigned by  "+x(v.assigned_by.display_name),1)])):h("",!0),Y(e).globalMode?(d(),u("div",bi,[t("span",xi,[t("span",wi,x(Ke(v.board?.plan?.workspace?.type)),1),we(" "+x(v.board?.plan?.workspace?.name),1)])])):h("",!0),v.status==="done"&&v.deliveries?.length>0?(d(),u("div",ki,[...a[68]||(a[68]=[t("span",{class:"text-[10px] font-black uppercase tracking-[0.2em] bg-emerald-500 text-white px-2.5 py-1 rounded-lg shadow-lg shadow-emerald-500/20 flex items-center gap-1"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"4"},[t("polyline",{points:"20 6 9 17 4 12"})]),we(" Delivered ")],-1)])])):h("",!0),v.status==="done"&&(!v.deliveries||v.deliveries.length===0)?(d(),u("div",yi,[...a[69]||(a[69]=[t("span",{class:"text-[10px] font-black uppercase tracking-[0.2em] bg-amber-100 dark:bg-amber-500/10 text-amber-600 dark:text-amber-400 px-2.5 py-1 rounded-lg border border-amber-200 dark:border-amber-500/20"}," Done  Needs Delivery ",-1)])])):h("",!0)]),Ae(v)?(d(),u("button",{key:0,onClick:ge(te=>re(v.id),["stop"]),class:j(["p-1 text-slate-300 hover:text-indigo-600 transition-all transform",{"rotate-180":oe.value.includes(v.id)}])},[...a[70]||(a[70]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("path",{d:"m6 9 6 6 6-6"})],-1)])],10,_i)):h("",!0)],8,ci),v.description&&!oe.value.includes(v.id)?(d(),u("p",Di,x(v.description),1)):h("",!0),ue(Ue,{name:"expand"},{default:Le(()=>[oe.value.includes(v.id)?(d(),u("div",Ci,[t("p",Mi,x(v.description||"No description provided."),1),v.subtasks?.length?(d(),u("div",$i,[a[71]||(a[71]=t("p",{class:"text-[11px] font-black uppercase tracking-widest text-slate-400"},"Sub-tasks",-1)),(d(!0),u(J,null,ee(v.subtasks,te=>(d(),u("div",{key:te.id,class:"flex items-center gap-2 text-[11px] font-bold text-slate-500 group/sub"},[t("button",{onClick:ge(Ye=>m.toggleSubtask(v,te),["stop"]),class:"w-4 h-4 rounded-md border-2 border-slate-300 dark:border-slate-600 flex items-center justify-center transition-all hover:border-indigo-500"},[te.status==="done"?(d(),u("div",Si)):h("",!0)],8,Ti),t("span",{class:j({"line-through opacity-50":te.status==="done"})},x(te.title),3)]))),128))])):h("",!0),v.checklists?.length?(d(),u("div",Ei,[a[72]||(a[72]=t("p",{class:"text-[11px] font-black uppercase tracking-widest text-slate-400"},"Checklist",-1)),t("div",Ii,[t("div",{class:"h-full bg-indigo-500 transition-all duration-500",style:gn({width:kt(v)+"%"})},null,4)]),t("span",Ai,x(v.checklists.filter(te=>te.is_completed).length)+"/"+x(v.checklists.length),1)])):h("",!0)])):h("",!0)]),_:2},1024),t("div",Fi,[t("div",ji,[v.subtasks?.length?(d(),u("div",{key:0,class:"flex items-center gap-1.5 px-2 py-1 bg-slate-50 dark:bg-slate-800/80 rounded-lg group/sub transition-all",title:ut(v)},[(d(),u("svg",{xmlns:"http://www.w3.org/2000/svg",class:j(["w-3 h-3",ye(v)?"text-emerald-500":"text-slate-400"]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[...a[73]||(a[73]=[t("path",{d:"M12 2v20"},null,-1),t("path",{d:"m17 7-5-5-5 5"},null,-1),t("path",{d:"m17 17-5 5-5-5"},null,-1)])],2)),t("span",{class:j(["text-[9px] font-black uppercase tracking-widest",ye(v)?"text-emerald-500":"text-slate-400"])},x(v.subtasks.filter(te=>te.status==="done").length)+"/"+x(v.subtasks.length),3)],8,Pi)):h("",!0),v.deadline?(d(),u("div",Oi,[a[74]||(a[74]=Ee('<svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" data-v-319f685a><rect width="18" height="18" x="3" y="4" rx="2" ry="2" data-v-319f685a></rect><line x1="16" y1="2" x2="16" y2="6" data-v-319f685a></line><line x1="8" y1="2" x2="8" y2="6" data-v-319f685a></line><line x1="3" y1="10" x2="21" y2="10" data-v-319f685a></line></svg>',1)),t("span",null,x(Ct(v.deadline)),1)])):h("",!0)]),t("div",Ni,[t("div",Yi,x(Ne(v.created_at)),1)])])],42,ni))),128)),Pe.value.filter(v=>v.status===r.id).length===0?(d(),u("div",Li,[...a[75]||(a[75]=[Ee('<svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 opacity-20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" data-v-319f685a><rect width="18" height="18" x="3" y="3" rx="2" data-v-319f685a></rect><path d="M3 9h18" data-v-319f685a></path><path d="M9 21V9" data-v-319f685a></path></svg><p class="text-sm font-black uppercase tracking-widest opacity-50" data-v-319f685a>Empty Slot</p>',2)])])):h("",!0)])],42,qr))),128))],34)):T.value==="list"?(d(),u("div",Hi,[ie.value?(d(),u("div",ul,[(d(!0),u(J,null,ee(Pe.value,r=>(d(),u("div",{key:r.id,onTouchstart:K=>S(K,r),onTouchmove:C,onTouchend:K=>c(K,r),class:"relative bg-white dark:bg-slate-900 rounded-[2.5rem] p-6 shadow-xl border border-slate-100 dark:border-slate-800 transition-all active:scale-[0.98] overflow-hidden"},[t("div",pl,[t("div",fl,[t("span",{class:j([Je(r.priority),"text-[10px] font-black uppercase tracking-widest px-3 py-1 rounded-full shadow-sm"])},x(r.priority),3)]),t("div",gl,[t("span",vl,x(r.status.replace("_"," ")),1),t("span",{class:j(["text-[8px] font-black uppercase tracking-tighter px-2 py-0.5 rounded-md border",r.is_public?"bg-indigo-50 text-indigo-600 border-indigo-100 dark:bg-indigo-500/10 dark:border-indigo-500/20":"bg-slate-50 text-slate-500 border-slate-100 dark:bg-slate-800/50 dark:border-slate-800"])},x(r.is_public?"Public Team":"Private"),3),r.status==="done"?(d(),u(J,{key:0},[r.delivery?(d(),u("span",ml,"Delivered")):(d(),u("span",hl,"Pending Delivery"))],64)):h("",!0)]),t("div",bl,[t("h3",xl,x(r.title),1),r.working_by?(d(),u("div",wl,[t("img",{src:r.working_by.avatar||"https://ui-avatars.com/api/?name="+r.working_by.display_name,class:"w-6 h-6 rounded-full border-2 border-indigo-500 shadow-sm"},null,8,kl),t("span",yl,"Work by  "+x(r.working_by.display_name),1)])):h("",!0),r.assigned_by?(d(),u("div",_l,[t("span",Dl,"Assigned by  "+x(r.assigned_by.display_name),1)])):h("",!0)]),t("div",Cl,[t("div",Ml,[a[79]||(a[79]=Ee('<svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-319f685a><rect width="18" height="18" x="3" y="4" rx="2" ry="2" data-v-319f685a></rect><line x1="16" y1="2" x2="16" y2="6" data-v-319f685a></line><line x1="8" y1="2" x2="8" y2="6" data-v-319f685a></line><line x1="3" y1="10" x2="21" y2="10" data-v-319f685a></line></svg>',1)),t("span",$l,x(Ne(r.deadline||r.created_at)),1)]),t("div",Tl,[t("img",{src:r.creator?.avatar||"https://ui-avatars.com/api/?name="+r.creator?.display_name,title:"Created by: "+(r.creator?.display_name||"System"),class:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-slate-900 grayscale"},null,8,Sl)])])]),a[80]||(a[80]=t("div",{class:"absolute inset-y-0 -left-16 w-16 bg-emerald-500 flex items-center justify-center text-white transition-opacity opacity-0"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("polyline",{points:"20 6 9 17 4 12"})])],-1))],40,cl))),128)),Pe.value.length===0?(d(),u("div",El,[...a[81]||(a[81]=[t("div",{class:"w-20 h-20 bg-slate-50 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-10 h-10 text-slate-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5.586a1 1 0 0 1 .707.293l5.414 5.414a1 1 0 0 1 .293.707V19a2 2 0 0 1-2 2z"})])],-1),t("p",{class:"text-sm font-black uppercase tracking-[0.2em] text-slate-400"},"No tasks found",-1)])])):h("",!0)])):(d(),u("div",Vi,[t("table",Bi,[a[78]||(a[78]=t("thead",null,[t("tr",{class:"text-[12px] font-heading font-black uppercase tracking-widest text-slate-400 border-b border-slate-50 dark:border-slate-800"},[t("th",{class:"pb-6 px-4"},"Task Name"),t("th",{class:"pb-6 px-4"},"Status"),t("th",{class:"pb-6 px-4"},"Priority"),t("th",{class:"pb-6 px-4"},"People"),t("th",{class:"pb-6 px-4"},"Due Date"),t("th",{class:"pb-6 px-4 text-right"},"Actions")])],-1)),t("tbody",Ri,[(d(!0),u(J,null,ee(Pe.value,r=>(d(),u("tr",{key:r.id,onClick:K=>g.value=r.id,class:"group cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors"},[t("td",Ui,[t("p",zi,x(r.title),1),Y(e).globalMode?(d(),u("p",Ki,x(r.board?.plan?.workspace?.name)+"  "+x(r.board?.plan?.workspace?.type),1)):h("",!0)]),t("td",Gi,[t("span",Ji,x(r.status.replace("_"," ")),1),r.status==="done"?(d(),u(J,{key:0},[r.deliveries?.length>0?(d(),u("span",qi,"Delivered")):(d(),u("span",Xi,"Pending Delivery"))],64)):h("",!0)]),t("td",Zi,[t("span",{class:j([Je(r.priority),"text-[12px] font-black uppercase tracking-widest px-3 py-1 rounded-full"])},x(r.priority),3)]),t("td",Qi,[t("div",el,[t("img",{title:"Creator: "+r.creator?.display_name,src:r.creator?.avatar||"https://ui-avatars.com/api/?name="+r.creator?.display_name,class:"w-8 h-8 rounded-full border-2 border-white dark:border-slate-900 object-cover shadow-sm"},null,8,tl),r.assigned_by&&r.assigned_by.id!==r.creator?.id?(d(),u("img",{key:0,title:"Assigned by: "+r.assigned_by.display_name,src:r.assigned_by.avatar||"https://ui-avatars.com/api/?name="+r.assigned_by.display_name,class:"w-8 h-8 rounded-full border-2 border-white dark:border-slate-900 object-cover shadow-sm z-10"},null,8,nl)):h("",!0),r.working_by?(d(),u("img",{key:1,title:"Working: "+r.working_by.display_name,src:r.working_by.avatar||"https://ui-avatars.com/api/?name="+r.working_by.display_name,class:"w-8 h-8 rounded-full border-2 border-indigo-500 object-cover shadow-md z-20"},null,8,al)):h("",!0)]),r.assigned_by?(d(),u("p",sl,"By: "+x(r.assigned_by.display_name),1)):h("",!0)]),t("td",ol,x(Ne(r.deadline||r.created_at)),1),t("td",rl,[t("div",il,[ze(r)!=="viewer"?(d(),u("button",{key:0,onClick:ge(K=>g.value=r.id,["stop"]),class:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 rounded-xl transition-all",title:"Edit Task"},[...a[76]||(a[76]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,ll)):h("",!0),ct(r)?(d(),u("button",{key:1,onClick:ge(K=>pt(r),["stop"]),class:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-500/10 rounded-xl transition-all",title:"Delete Task"},[...a[77]||(a[77]=[Ee('<svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-319f685a><path d="M3 6h18" data-v-319f685a></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" data-v-319f685a></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" data-v-319f685a></path><line x1="10" y1="11" x2="10" y2="17" data-v-319f685a></line><line x1="14" y1="11" x2="14" y2="17" data-v-319f685a></line></svg>',1)])],8,dl)):h("",!0)])])],8,Wi))),128))])])]))])):T.value==="calendar"?(d(),Xe($o,{key:4,tasks:Pe.value,"is-mobile":ie.value,"global-mode":Y(e).globalMode,monthYear:F.value.monthYear,"onUpdate:monthYear":a[18]||(a[18]=r=>F.value.monthYear=r),onTaskClick:a[19]||(a[19]=r=>g.value=r)},null,8,["tasks","is-mobile","global-mode","monthYear"])):h("",!0),g.value?(d(),Xe(Ps,{key:5,taskId:g.value,role:_e.value,onClose:a[20]||(a[20]=r=>g.value=null),onUpdated:a[21]||(a[21]=r=>he(!0))},null,8,["taskId","role"])):h("",!0),ae(t("div",Il,[t("div",Al,[ue(Ue,{name:"fade"},{default:Le(()=>[me.value?(d(),u("div",Fl,[t("div",jl,[a[82]||(a[82]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),t("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})],-1)),t("span",Pl,x(me.value.message),1)]),t("button",{onClick:je,class:"text-[10px] font-black underline uppercase tracking-widest"},"Apply")])):h("",!0)]),_:1}),a[94]||(a[94]=t("div",{class:"px-5 sm:px-8 py-4 sm:py-6 sticky top-0 bg-white dark:bg-slate-900 z-30 rounded-t-[2rem] sm:rounded-t-[3rem] border-b border-slate-50 dark:border-slate-800/50"},[t("h2",{class:"text-xl sm:text-2xl font-black text-slate-800 dark:text-white mb-0.5"},"Create Task"),t("p",{class:"text-slate-500 text-[10px] sm:text-xs"},"Define your next milestone")],-1)),t("div",Ol,[t("div",null,[a[83]||(a[83]=t("label",{class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Urgency",-1)),t("div",Nl,[(d(),u(J,null,ee(["low","medium","high","urgent"],r=>t("button",{key:r,onClick:K=>X.value.priority=r,class:j(["flex-1 min-w-[70px] py-2.5 sm:py-3 rounded-xl text-[10px] sm:text-[11px] font-black uppercase tracking-widest transition-all",X.value.priority===r?r==="urgent"?"bg-rose-500 text-white shadow-lg shadow-rose-500/30":r==="high"?"bg-orange-500 text-white shadow-lg shadow-orange-500/30":r==="medium"?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30":"bg-slate-300 dark:bg-slate-600 text-white":"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200"])},x(r),11,Yl)),64))])]),t("div",null,[a[84]||(a[84]=t("label",{for:"task-title",class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Task Title",-1)),ae(t("input",{id:"task-title","onUpdate:modelValue":a[22]||(a[22]=r=>X.value.title=r),type:"text",placeholder:"What needs to be done?",class:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-2xl px-5 py-3.5 sm:py-4 outline-none focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium text-sm sm:text-base"},null,512),[[ce,X.value.title]])]),t("div",Ll,[t("div",null,[a[85]||(a[85]=t("label",{for:"task-start-date",class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Start Date",-1)),ue(xt,{id:"task-start-date",modelValue:X.value.start_date,"onUpdate:modelValue":a[23]||(a[23]=r=>X.value.start_date=r)},null,8,["modelValue"])]),t("div",null,[a[86]||(a[86]=t("label",{for:"task-start-time",class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Start Time",-1)),ae(t("input",{id:"task-start-time","onUpdate:modelValue":a[24]||(a[24]=r=>X.value.start_time=r),type:"time",class:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-2xl px-5 py-3 outline-none focus:ring-4 focus:ring-indigo-500/20 text-sm font-bold text-slate-600 dark:text-slate-200"},null,512),[[ce,X.value.start_time]])])]),t("div",Hl,[t("div",null,[a[87]||(a[87]=t("label",{for:"task-due-date",class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Due Date",-1)),ue(xt,{id:"task-due-date",modelValue:X.value.due_date,"onUpdate:modelValue":a[25]||(a[25]=r=>X.value.due_date=r)},null,8,["modelValue"])]),t("div",null,[a[88]||(a[88]=t("label",{for:"task-due-time",class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Due Time",-1)),ae(t("input",{id:"task-due-time","onUpdate:modelValue":a[26]||(a[26]=r=>X.value.due_time=r),type:"time",class:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-2xl px-5 py-3 outline-none focus:ring-4 focus:ring-indigo-500/20 text-sm font-bold text-slate-600 dark:text-slate-200"},null,512),[[ce,X.value.due_time]])])]),t("div",null,[a[89]||(a[89]=t("label",{for:"task-description",class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Description",-1)),ae(t("textarea",{id:"task-description","onUpdate:modelValue":a[27]||(a[27]=r=>X.value.description=r),placeholder:"Add some context...",class:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-2xl px-5 py-4 outline-none focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium text-sm",rows:"3"},null,512),[[ce,X.value.description]])]),Y(b)&&Y(b).members?(d(),u("div",Vl,[a[91]||(a[91]=t("label",{for:"task-assignee",class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Assign to",-1)),ae(t("select",{id:"task-assignee","onUpdate:modelValue":a[28]||(a[28]=r=>X.value.assigned_to=r),class:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-2xl px-5 py-3 outline-none focus:ring-4 focus:ring-indigo-500/20 text-sm font-bold text-slate-600 dark:text-white"},[a[90]||(a[90]=t("option",{value:null},"Unassigned",-1)),(d(!0),u(J,null,ee(Y(b).members,r=>(d(),u("option",{key:r.id,value:r.id},x(r.display_name),9,Bl))),128))],512),[[Ze,X.value.assigned_to]])])):h("",!0),t("div",Rl,[a[92]||(a[92]=t("div",{class:"space-y-1"},[t("p",{class:"text-[10px] font-black uppercase tracking-widest text-slate-700 dark:text-slate-200"},"Public Visibility"),t("p",{class:"text-[9px] font-medium text-slate-500 dark:text-slate-400"},"Everyone in workspace can see this task")],-1)),t("button",{onClick:a[29]||(a[29]=r=>X.value.is_public=!X.value.is_public),class:j(["w-12 h-6 rounded-full transition-all relative",X.value.is_public?"bg-indigo-600":"bg-slate-300 dark:bg-slate-600"])},[t("div",{class:j(["absolute top-1 w-4 h-4 bg-white rounded-full transition-all shadow-sm",X.value.is_public?"left-7":"left-1"])},null,2)],2)]),a[93]||(a[93]=Ee('<div class="p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-800" data-v-319f685a><div class="flex gap-3" data-v-319f685a><div class="w-8 h-8 rounded-lg bg-indigo-100 dark:bg-indigo-500/20 flex items-center justify-center shrink-0" data-v-319f685a><svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-indigo-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" data-v-319f685a><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" data-v-319f685a></path><polyline points="22,6 12,13 2,6" data-v-319f685a></polyline></svg></div><div class="space-y-1" data-v-319f685a><p class="text-[10px] font-black uppercase tracking-widest text-slate-700 dark:text-slate-200" data-v-319f685a>Notifications</p><p class="text-[9px] font-medium text-slate-500 dark:text-slate-400 leading-relaxed uppercase tracking-wide" data-v-319f685a>Gmail and Calendar automation enabled.</p></div></div></div>',1))]),t("div",Wl,[t("button",{onClick:a[30]||(a[30]=r=>Q.value=!1),class:"flex-1 px-4 py-3 sm:py-3.5 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:bg-slate-200 transition-colors text-xs sm:text-sm"},"Cancel"),t("button",{onClick:_t,disabled:B.value,class:"flex-2 px-6 py-3 sm:py-3.5 bg-indigo-600 text-white rounded-2xl font-black shadow-xl shadow-indigo-500/30 hover:bg-indigo-700 disabled:opacity-50 transition-all text-xs sm:text-sm"},x(B.value?"CREATING...":"CREATE NOW"),9,Ul)])])],512),[[pn,Q.value]]),Be.value?(d(),u("div",zl,[t("div",Kl,[a[98]||(a[98]=t("div",{class:"px-5 sm:px-10 py-6 sm:py-8 border-b border-slate-50 dark:border-slate-800/50"},[t("h2",{class:"text-2xl sm:text-3xl font-black text-slate-800 dark:text-white mb-1"},"New Context"),t("p",{class:"text-slate-500 text-xs sm:text-sm"},"Create a separate space for your work.")],-1)),t("div",Gl,[t("div",null,[a[95]||(a[95]=t("label",{class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Context Name",-1)),ae(t("input",{"onUpdate:modelValue":a[31]||(a[31]=r=>be.value.name=r),type:"text",placeholder:"e.g. My Side Hustle",class:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-2xl px-5 py-3.5 sm:py-4 outline-none focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium text-sm sm:text-base"},null,512),[[ce,be.value.name]])]),t("div",null,[a[96]||(a[96]=t("label",{class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Type",-1)),t("div",Jl,[(d(),u(J,null,ee(["Personal","Work","Team"],r=>t("button",{key:r,onClick:K=>be.value.type=r,class:j(["py-3 rounded-xl text-[10px] sm:text-[11px] font-black uppercase tracking-widest transition-all border border-transparent",be.value.type===r?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30":"bg-slate-50 dark:bg-slate-800 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700"])},x(r),11,ql)),64))])]),t("div",null,[a[97]||(a[97]=t("label",{class:"block text-[11px] font-black uppercase tracking-widest text-slate-400 mb-2 px-1"},"Purpose",-1)),ae(t("input",{"onUpdate:modelValue":a[32]||(a[32]=r=>be.value.intent=r),type:"text",placeholder:"Briefly describe what this is for...",class:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-2xl px-5 py-3.5 sm:py-4 outline-none focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all font-medium text-sm"},null,512),[[ce,be.value.intent]])])]),t("div",Xl,[t("button",{onClick:a[33]||(a[33]=r=>Be.value=!1),class:"flex-1 px-6 py-3.5 sm:py-4 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded-2xl font-bold hover:bg-slate-200 transition-colors text-xs sm:text-sm"},"Cancel"),t("button",{onClick:Dt,class:"flex-1 px-6 py-3.5 sm:py-4 bg-indigo-600 text-white rounded-2xl font-black shadow-xl shadow-indigo-500/30 hover:bg-indigo-700 transition-all text-xs sm:text-sm"}," CREATE CONTEXT ")])])])):h("",!0),ue(gr,{show:P.value,type:"Workspace",id:Y(b)?.id,entity:Y(b),onClose:a[34]||(a[34]=r=>P.value=!1)},null,8,["show","id","entity"]),I.value?(d(),Xe(zt,{key:7,show:I.value,task:V.value,onClose:a[35]||(a[35]=r=>{I.value=!1,he()}),onDelivered:a[36]||(a[36]=r=>he())},null,8,["show","task"])):h("",!0),ue(Ue,{name:"sheet"},{default:Le(()=>[ie.value&&y.value?(d(),u("div",Zl,[t("div",{class:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:a[37]||(a[37]=r=>y.value=!1)}),t("div",Ql,[t("div",ed,[t("button",{onClick:a[38]||(a[38]=r=>y.value=!1),class:"flex items-center gap-2 text-slate-500 font-black uppercase tracking-widest text-xs"},[...a[99]||(a[99]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("path",{d:"M15 18l-6-6 6-6"})],-1),we(" Back ",-1)])]),a[100]||(a[100]=t("h3",{class:"text-sm font-black uppercase tracking-widest text-slate-800 dark:text-white"},"Filters",-1)),t("button",{onClick:Ve,class:"text-xs font-black uppercase text-indigo-600 px-2"},"Reset")]),t("div",td,[t("div",nd,[a[101]||(a[101]=t("p",{class:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1"},"View Mode",-1)),t("div",ad,[(d(),u(J,null,ee(["board","list","calendar"],r=>t("button",{key:r,onClick:K=>T.value=r,class:j([[T.value===r?"bg-indigo-600 text-white shadow-md":"text-slate-500"],"py-3 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all"])},x(r),11,sd)),64))])]),t("div",od,[t("div",rd,[a[104]||(a[104]=t("p",{class:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1"},"Toggles",-1)),t("div",id,[t("button",{onClick:a[39]||(a[39]=r=>Y(e).toggleGlobalMode()),class:j(["flex-1 h-14 flex items-center justify-center rounded-2xl transition-colors border",Y(e).globalMode?"bg-indigo-600 text-white border-indigo-600":"bg-slate-50 dark:bg-slate-800 text-slate-400 border-slate-100 dark:border-slate-700"])},[...a[102]||(a[102]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 mr-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})],-1),t("span",{class:"text-xs font-black uppercase tracking-widest"},"Global View",-1)])],2),Y(b)&&_e.value==="owner"&&!Y(e).globalMode?(d(),u("button",{key:0,onClick:a[40]||(a[40]=r=>P.value=!0),class:"flex-1 h-14 flex items-center justify-center rounded-2xl border bg-indigo-50 dark:bg-indigo-500/10 text-indigo-600 border-indigo-100 dark:border-indigo-500/20"},[...a[103]||(a[103]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 mr-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),t("circle",{cx:"9",cy:"7",r:"4"}),t("line",{x1:"19",y1:"8",x2:"19",y2:"14"}),t("line",{x1:"16",y1:"11",x2:"22",y2:"11"})],-1),t("span",{class:"text-xs font-black uppercase tracking-widest"},"Share",-1)])])):h("",!0)])]),t("div",ld,[t("div",dd,[t("div",ud,[a[105]||(a[105]=t("p",{class:"text-[10px] font-black uppercase tracking-widest text-slate-400"},"Context",-1)),Y(e).globalMode?h("",!0):(d(),u("span",cd,"Active Workspace Only"))]),ae(t("select",{"onUpdate:modelValue":a[41]||(a[41]=r=>F.value.workspaceId=r),disabled:!Y(e).globalMode,class:"w-full h-14 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl px-6 text-sm font-bold shadow-sm outline-none disabled:opacity-50"},[a[106]||(a[106]=t("option",{value:null},"All Contexts",-1)),(d(!0),u(J,null,ee(Y(e).workspaces,r=>(d(),u("option",{key:r.id,value:r.id},x(r.name),9,fd))),128))],8,pd),[[Ze,F.value.workspaceId]])]),t("div",gd,[a[107]||(a[107]=t("p",{class:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1"},"Priority",-1)),t("div",vd,[(d(),u(J,null,ee([null,"low","medium","high","urgent"],r=>t("button",{key:r,onClick:K=>F.value.priority=r,class:j(["h-14 rounded-2xl border text-xs font-black uppercase tracking-widest transition-all",[F.value.priority===r?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-500/20":"bg-slate-50 dark:bg-slate-800 border-transparent text-slate-500"]])},x(r||"All"),11,md)),64))])]),t("div",hd,[a[108]||(a[108]=t("p",{class:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1"},"Timeline",-1)),t("div",bd,[(d(),u(J,null,ee(ft,r=>t("button",{key:r.id,onClick:K=>{F.value.timeRange=r.id,F.value.monthYear=""},class:j(["h-14 rounded-2xl border text-xs font-black uppercase tracking-widest transition-all",[F.value.timeRange===r.id?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-500/20":"bg-slate-50 dark:bg-slate-800 border-transparent text-slate-500"]])},x(r.label),11,xd)),64))])]),t("div",wd,[a[110]||(a[110]=t("p",{class:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1"},"Custom Dates",-1)),t("div",kd,[t("button",{onClick:a[42]||(a[42]=r=>F.value.timeRange="custom"),class:j(["h-14 rounded-2xl border text-xs font-black uppercase tracking-widest transition-all flex items-center justify-center gap-2",[F.value.timeRange==="custom"?"bg-indigo-600 text-white border-indigo-600 shadow-lg shadow-indigo-500/20":"bg-slate-50 dark:bg-slate-800 border-transparent text-slate-500"]])},[...a[109]||(a[109]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[t("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2"}),t("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),t("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),t("line",{x1:"3",y1:"10",x2:"21",y2:"10"})],-1),we(" Custom Range ",-1)])],2),F.value.timeRange==="custom"?(d(),u("div",yd,[ae(t("input",{type:"date","onUpdate:modelValue":a[43]||(a[43]=r=>F.value.customStart=r),class:"h-14 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl px-4 text-xs font-bold shadow-inner"},null,512),[[ce,F.value.customStart]]),ae(t("input",{type:"date","onUpdate:modelValue":a[44]||(a[44]=r=>F.value.customEnd=r),class:"h-14 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl px-4 text-xs font-bold shadow-inner"},null,512),[[ce,F.value.customEnd]])])):h("",!0)])])])])]),t("div",_d,[t("button",{onClick:a[45]||(a[45]=r=>y.value=!1),class:"w-full h-14 bg-indigo-600 text-white rounded-2xl font-black uppercase tracking-widest text-xs shadow-xl shadow-indigo-500/20"}," Apply View ")])])])):h("",!0)]),_:1}),Y(e).globalMode?(d(),u("div",Dd,[a[111]||(a[111]=t("div",{class:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse"},null,-1)),a[112]||(a[112]=t("p",{class:"text-xs font-black uppercase tracking-[0.2em]"},"Global Management Mode  All Contexts",-1)),t("button",{onClick:a[46]||(a[46]=r=>Y(e).toggleGlobalMode()),class:"ml-4 text-[10px] font-black uppercase bg-white/10 hover:bg-white/20 px-3 py-1 rounded-lg transition-all"},"Exit")])):h("",!0)])}}},Sd=tt(Cd,[["__scopeId","data-v-319f685a"]]);export{Sd as default};
