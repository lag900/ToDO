import{k as e,w as t,c as a,a as s,b as l,u as r,n as i,F as d,r as o,t as n,i as c,x as u,j as p,e as v,p as x,q as b,T as w,g as f,f as g,N as k,o as m}from"./vendor-vue-C0IDuzMx.js";import{a as h}from"./vendor-utils-bzb-uA31.js";import{_ as y,u as _,c as C}from"./pages-dashboard-Hu4J_6cY.js";const j={class:"p-8 max-w-4xl mx-auto space-y-12 font-outfit min-h-screen relative"},S={key:0,class:"fixed inset-0 bg-white dark:bg-slate-950 z-[100] flex flex-col items-center justify-center"},A={key:1,class:"animate-in fade-in zoom-in-95 duration-500"},z={class:"flex justify-between items-end"},B={class:"grid grid-cols-1 md:grid-cols-3 gap-12"},W={class:"space-y-2"},E={key:0,class:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},N={class:"md:col-span-2 space-y-10 relative"},I={key:0,class:"absolute inset-0 bg-white/50 dark:bg-slate-950/50 backdrop-blur-sm z-50 flex flex-col items-center justify-center rounded-[3rem]"},P={key:1,class:"space-y-6"},R={class:"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden"},L={class:"p-8 flex items-center justify-between border-b border-slate-50 dark:border-slate-800/50 bg-slate-50/50 dark:bg-slate-800/20"},M={class:"space-y-4"},T=["onClick"],U={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"4"},V={class:"pt-6 border-t border-slate-50 dark:border-slate-800/50 flex items-center justify-between"},D={class:"pt-6 border-t border-slate-50 dark:border-slate-800/50 flex items-center justify-between"},F={class:"flex justify-end gap-4 mt-8"},G=["disabled"],H={key:2,class:"space-y-6"},O={class:"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm p-8 space-y-4"},q=["value"],K={key:0,class:"space-y-6"},Y={class:"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden border-t-4 border-t-emerald-500"},J={class:"p-8 space-y-8"},Q={class:"flex items-center justify-between"},X={class:"flex-1 pr-4"},Z={class:"text-xs text-slate-500 mt-2 font-medium leading-relaxed"},$={class:"text-emerald-500 font-bold"},ee={key:0,class:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/10 border border-amber-100 dark:border-amber-900/20 rounded-2xl flex items-center gap-3"},te={class:"flex justify-end gap-4 mt-8"},ae=["disabled"],se={key:1,class:"bg-white dark:bg-slate-900 rounded-[2.5rem] p-12 text-center border border-slate-100 dark:border-slate-800 font-bold text-slate-400 animate-in fade-in duration-500"},le={key:3,class:"space-y-6"},re={class:"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden"},ie={class:"p-8 flex items-center justify-between"},de={key:0},oe={key:0,class:"flex flex-col items-end gap-2"},ne={key:1,class:"px-4 py-2 bg-emerald-50 text-emerald-600 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2 border border-emerald-100"},ce={key:1,href:"/auth/google",class:"px-6 py-3 bg-slate-800 text-white hover:bg-indigo-600 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg hover:shadow-indigo-500/20"},ue={key:0,class:"fixed bottom-10 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-8 py-4 rounded-3xl shadow-2xl flex items-center gap-3 z-50"},pe=y({__name:"Settings",setup(y){const pe=k(),ve=_(),xe=C(),be=f(!1),we=f(!1),fe=f("workspace"),ge=f(null),ke=f({email_enabled:!0,types:["task_created","task_updated","task_completed"],exclude_self:!0,exclude_tasks_created_by_me:!1}),me=f({enable_review_step:!0}),he=g(()=>{if(Array.isArray(xe.workspaces))return xe.workspaces.find(e=>Number(e.id)===Number(ge.value))}),ye=g(()=>{if(!he.value||!ve.user)return!1;const e=e=>{if(!e)return!1;return"owner"===String(e).toLowerCase()};if(e(he.value.user_role))return!0;if(String(he.value.owner_id)===String(ve.user.id))return!0;if(e(he.value.pivot?.role))return!0;const t=he.value.members?.find(e=>String(e.id)===String(ve.user.id)||e.email&&ve.user.email&&e.email.toLowerCase()===ve.user.email.toLowerCase());return e(t?.pivot?.role)}),_e=[{id:"task_created",label:"A new task is added to my workspace"},{id:"task_updated",label:"An existing task is modified"},{id:"task_completed",label:"A task is marked as complete"}],Ce=g(()=>ve.user&&xe.initialized);e(async()=>{be.value=!0,ve.initialized||await ve.fetchUser(),await xe.fetchWorkspaces(),je(),be.value=!1});const je=()=>{xe.currentWorkspace?ge.value=xe.currentWorkspace.id:xe.workspaces.length>0&&(ge.value=xe.workspaces[0].id),ve.user?.notification_settings&&(ke.value={...ke.value,...ve.user.notification_settings}),Se()};t(()=>xe.initialized,e=>{e&&je()}),t(()=>he.value?.settings,e=>{Se()},{deep:!0});const Se=()=>{if(he.value){const e=he.value.settings||{};me.value={enable_review_step:!1!==e.enable_review_step}}else me.value={enable_review_step:!0}};t(ge,()=>{Se()});const Ae=async()=>{be.value=!0;try{await h.patch("/api/user/settings",{notification_settings:ke.value}),await ve.fetchUser(),we.value=!0,setTimeout(()=>we.value=!1,3e3)}catch(e){}finally{be.value=!1}},ze=async()=>{if(ge.value){be.value=!0;try{await xe.updateWorkspaceSettings(ge.value,me.value),we.value=!0,setTimeout(()=>{pe.push("/dashboard")},1500)}catch(e){alert("Failed to save workspace settings: "+(e.response?.data?.message||"Server error"))}finally{be.value=!1}}};return(e,t)=>(m(),a("div",j,[Ce.value?l("",!0):(m(),a("div",S,[...t[9]||(t[9]=[s("div",{class:"w-16 h-16 border-4 border-indigo-600/20 border-t-indigo-600 rounded-full animate-spin"},null,-1),s("p",{class:"mt-6 text-xs font-black uppercase tracking-[0.3em] text-slate-400 animate-pulse"},"Synchronizing Life...",-1)])])),Ce.value?(m(),a("div",A,[s("header",z,[t[11]||(t[11]=s("div",null,[s("h1",{class:"text-4xl font-black text-slate-800 dark:text-white tracking-tight"},"Preferences."),s("p",{class:"text-slate-500 font-medium"},"Manage your notification and workspace behaviors.")],-1)),s("button",{onClick:t[0]||(t[0]=e=>r(pe).back()),class:"p-3 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-2xl shadow-sm hover:scale-105 transition-all"},[...t[10]||(t[10]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),s("div",B,[s("div",W,[s("button",{onClick:t[1]||(t[1]=e=>fe.value="notifications"),class:i([["notifications"===fe.value?"bg-indigo-600 text-white shadow-xl shadow-indigo-500/20":"text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50"],"w-full text-left px-6 py-4 rounded-2xl font-black text-sm tracking-widest uppercase transition-all"])}," Notifications ",2),s("button",{onClick:t[2]||(t[2]=e=>fe.value="workspace"),class:i([["workspace"===fe.value?"bg-indigo-600 text-white shadow-xl shadow-indigo-500/20":"text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50"],"w-full text-left px-6 py-4 rounded-2xl font-black text-sm tracking-widest uppercase transition-all flex items-center justify-between"])},[t[12]||(t[12]=s("span",null,"Workspace Behavior",-1)),!r(xe).currentWorkspace&&r(xe).loading?(m(),a("div",E)):l("",!0)],2),s("button",{onClick:t[3]||(t[3]=e=>fe.value="integrations"),class:i([["integrations"===fe.value?"bg-indigo-600 text-white shadow-xl shadow-indigo-500/20":"text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50"],"w-full text-left px-6 py-4 rounded-2xl font-black text-sm tracking-widest uppercase transition-all"])}," Integrations ",2),t[13]||(t[13]=s("button",{class:"w-full text-left px-6 py-4 rounded-2xl text-slate-400 font-black text-sm tracking-widest uppercase opacity-50 cursor-not-allowed"},"Profile (Soon)",-1))]),s("div",N,[r(xe).loading&&!r(xe).workspaces.length?(m(),a("div",I,[...t[14]||(t[14]=[s("div",{class:"w-12 h-12 border-4 border-indigo-600/20 border-t-indigo-600 rounded-full animate-spin"},null,-1),s("p",{class:"mt-4 text-[10px] font-black uppercase tracking-widest text-slate-400"},"Loading Preferences...",-1)])])):l("",!0),"notifications"===fe.value?(m(),a("section",P,[t[20]||(t[20]=s("div",{class:"flex items-center gap-2 mb-6"},[s("div",{class:"w-1.5 h-6 bg-indigo-600 rounded-full"}),s("h2",{class:"text-xl font-black text-slate-800 dark:text-white uppercase tracking-wider"},"Email Alerts")],-1)),s("div",R,[s("div",L,[t[15]||(t[15]=s("div",null,[s("h3",{class:"font-black text-slate-800 dark:text-white uppercase tracking-widest text-xs"},"Enable Email Notifications"),s("p",{class:"text-xs text-slate-400 mt-1 font-bold"},"Receive alerts for important workspace activity.")],-1)),s("div",{onClick:t[4]||(t[4]=e=>ke.value.email_enabled=!ke.value.email_enabled),class:i(["w-14 h-7 rounded-full relative transition-all cursor-pointer",ke.value.email_enabled?"bg-indigo-600":"bg-slate-200 dark:bg-slate-700"])},[s("div",{class:i(["absolute top-1 left-1 w-5 h-5 rounded-full bg-white transition-all shadow-md",ke.value.email_enabled?"translate-x-7":""])},null,2)],2)]),s("div",{class:i(["p-8 space-y-8 transition-all",ke.value.email_enabled?"":"opacity-30 pointer-events-none"])},[s("div",null,[t[17]||(t[17]=s("label",{class:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-4"},"Notify me when...",-1)),s("div",M,[(m(),a(d,null,o(_e,e=>s("div",{key:e.id,onClick:t=>(e=>{const t=ke.value.types.indexOf(e);t>-1?ke.value.types.splice(t,1):ke.value.types.push(e)})(e.id),class:"flex items-center gap-4 group cursor-pointer"},[s("div",{class:i(["w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all",ke.value.types.includes(e.id)?"bg-indigo-600 border-indigo-600":"border-slate-200 dark:border-slate-700 group-hover:border-indigo-400"])},[ke.value.types.includes(e.id)?(m(),a("svg",U,[...t[16]||(t[16]=[s("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):l("",!0)],2),s("span",{class:i(["text-sm font-bold transition-all",ke.value.types.includes(e.id)?"text-slate-700 dark:text-slate-200":"text-slate-400"])},n(e.label),3)],8,T)),64))])]),s("div",V,[t[18]||(t[18]=s("div",null,[s("h3",{class:"font-black text-slate-700 dark:text-slate-200 uppercase tracking-widest text-[10px]"},"Exclude my own actions"),s("p",{class:"text-[10px] text-slate-400 font-bold"},"Don't notify me for actions I perform myself.")],-1)),s("div",{onClick:t[5]||(t[5]=e=>ke.value.exclude_self=!ke.value.exclude_self),class:i(["w-10 h-5 rounded-full relative transition-all cursor-pointer",ke.value.exclude_self?"bg-indigo-600":"bg-slate-200 dark:bg-slate-700"])},[s("div",{class:i(["absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white transition-all shadow-sm",ke.value.exclude_self?"translate-x-5":""])},null,2)],2)]),s("div",D,[t[19]||(t[19]=s("div",null,[s("h3",{class:"font-black text-slate-700 dark:text-slate-200 uppercase tracking-widest text-[10px]"},"Exclude Workspace Origin"),s("p",{class:"text-[10px] text-slate-400 font-bold"},"Don't notify me for tasks I created myself (but assigned to others).")],-1)),s("div",{onClick:t[6]||(t[6]=e=>ke.value.exclude_tasks_created_by_me=!ke.value.exclude_tasks_created_by_me),class:i(["w-10 h-5 rounded-full relative transition-all cursor-pointer",ke.value.exclude_tasks_created_by_me?"bg-indigo-600":"bg-slate-200 dark:bg-slate-700"])},[s("div",{class:i(["absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white transition-all shadow-sm",ke.value.exclude_tasks_created_by_me?"translate-x-5":""])},null,2)],2)])],2)]),s("div",F,[s("button",{onClick:Ae,disabled:be.value,class:"px-10 py-4 bg-indigo-600 text-white rounded-[1.5rem] font-black uppercase tracking-widest text-xs shadow-xl shadow-indigo-500/20 hover:bg-indigo-700 transition-all active:scale-95 disabled:opacity-50"},n(be.value?"SAVING...":"SAVE CHANGES"),9,G)])])):l("",!0),"workspace"===fe.value?(m(),a("section",H,[t[30]||(t[30]=s("div",{class:"flex items-center gap-2 mb-6"},[s("div",{class:"w-1.5 h-6 bg-emerald-500 rounded-full"}),s("h2",{class:"text-xl font-black text-slate-800 dark:text-white uppercase tracking-wider"},"Workspace Behavior")],-1)),s("div",O,[t[21]||(t[21]=s("label",{for:"workspace-selector",class:"block text-[10px] font-black uppercase tracking-widest text-slate-400"},"Select Workspace to Configure",-1)),c(s("select",{id:"workspace-selector",name:"workspace_id",onChange:Se,"onUpdate:modelValue":t[7]||(t[7]=e=>ge.value=e),class:"w-full h-14 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl px-6 text-sm font-bold shadow-sm outline-none transition-all"},[(m(!0),a(d,null,o(r(xe).workspaces,e=>(m(),a("option",{key:e.id,value:e.id},n(e.name),9,q))),128))],544),[[u,ge.value]])]),he.value?(m(),a("div",K,[s("div",Y,[s("div",J,[s("div",Q,[s("div",X,[t[26]||(t[26]=s("h3",{class:"font-black text-slate-800 dark:text-white uppercase tracking-widest text-sm"},"Enable Review Column",-1)),s("p",Z,[t[22]||(t[22]=p(" When enabled, a dedicated ",-1)),t[23]||(t[23]=s("b",null,'"Review"',-1)),t[24]||(t[24]=p(" column will appear on your kanban board for ",-1)),s("span",$,n(he.value.name),1),t[25]||(t[25]=p(". ",-1))])]),s("div",{onClick:t[8]||(t[8]=e=>ye.value?me.value.enable_review_step=!me.value.enable_review_step:null),class:i(["w-16 h-8 rounded-full relative transition-all shadow-inner",me.value.enable_review_step?"bg-emerald-500":"bg-slate-200 dark:bg-slate-700",ye.value?"cursor-pointer":"opacity-50 cursor-not-allowed"])},[s("div",{class:i(["absolute top-1 left-1 w-6 h-6 rounded-full bg-white transition-all shadow-md",me.value.enable_review_step?"translate-x-8":""])},null,2)],2)]),ye.value?l("",!0):(m(),a("div",ee,[...t[27]||(t[27]=[v('<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-amber-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-077a43df><circle cx="12" cy="12" r="10" data-v-077a43df></circle><line x1="12" y1="16" x2="12" y2="12" data-v-077a43df></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-077a43df></line></svg><p class="text-[10px] font-bold text-amber-600 dark:text-amber-400 uppercase tracking-widest" data-v-077a43df>View Only Â· You must be the owner to change settings</p>',2)])])),t[28]||(t[28]=s("div",{class:"flex items-center justify-between pt-6 border-t border-slate-50 dark:border-slate-800/50"},[s("div",null,[s("h3",{class:"font-black text-slate-800 dark:text-white uppercase tracking-widest text-xs"},"Custom Board Workflow (Soon)"),s("p",{class:"text-xs text-slate-400 mt-1 font-bold"},"Customize your kanban column names and order.")]),s("div",{class:"px-3 py-1 bg-slate-100 dark:bg-slate-800 text-[10px] font-black text-slate-400 uppercase rounded-lg"},"Pro")],-1))])]),s("div",te,[s("button",{onClick:ze,disabled:be.value||!ye.value,class:"px-10 py-4 bg-emerald-500 text-white rounded-[1.5rem] font-black uppercase tracking-widest text-xs shadow-xl shadow-emerald-500/30 hover:bg-emerald-600 transition-all active:scale-95 disabled:opacity-50"},n(be.value?"UPDATING...":"UPDATE WORKSPACE"),9,ae)])])):r(xe).loading?l("",!0):(m(),a("div",se,[...t[29]||(t[29]=[v('<div class="w-20 h-20 bg-slate-50 dark:bg-slate-800 rounded-3xl flex items-center justify-center mx-auto mb-6 text-slate-200" data-v-077a43df><svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-077a43df><circle cx="12" cy="12" r="10" data-v-077a43df></circle><line x1="12" y1="16" x2="12" y2="12" data-v-077a43df></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-077a43df></line></svg></div><p class="uppercase tracking-widest text-xs" data-v-077a43df>Select a workspace from the list above to view settings.</p>',2)])]))])):l("",!0),"integrations"===fe.value?(m(),a("section",le,[t[34]||(t[34]=s("div",{class:"flex items-center gap-2 mb-6"},[s("div",{class:"w-1.5 h-6 bg-blue-500 rounded-full"}),s("h2",{class:"text-xl font-black text-slate-800 dark:text-white uppercase tracking-wider"},"Integrations")],-1)),s("div",re,[s("div",ie,[t[33]||(t[33]=v('<div class="flex items-center gap-4" data-v-077a43df><div class="w-12 h-12 bg-white rounded-full shadow-sm flex items-center justify-center" data-v-077a43df><svg class="w-6 h-6" viewBox="0 0 24 24" data-v-077a43df><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-077a43df></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-1 .67-2.28 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-077a43df></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" data-v-077a43df></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-077a43df></path></svg></div><div data-v-077a43df><h3 class="font-black text-slate-800 dark:text-white uppercase tracking-widest text-sm" data-v-077a43df>Google Calendar</h3><p class="text-xs text-slate-500 mt-1 font-medium" data-v-077a43df>Sync task start times as events to your primary calendar.</p></div></div>',1)),r(ve).user?.has_google_integration?(m(),a("div",de,[r(ve).user?.google_calendar_scopes_granted?(m(),a("span",ne,[...t[32]||(t[32]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"4"},[s("polyline",{points:"20 6 9 17 4 12"})],-1),p(" Connected ",-1)])])):(m(),a("div",oe,[...t[31]||(t[31]=[v('<span class="px-3 py-1.5 bg-rose-50 text-rose-600 rounded-lg text-[10px] font-black uppercase tracking-widest flex items-center gap-2 border border-rose-100" data-v-077a43df><svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" data-v-077a43df><circle cx="12" cy="12" r="10" data-v-077a43df></circle><line x1="12" y1="8" x2="12" y2="12" data-v-077a43df></line><line x1="12" y1="16" x2="12.01" y2="16" data-v-077a43df></line></svg> Action Required </span><a href="/auth/google" class="px-4 py-2 bg-rose-600 text-white hover:bg-rose-700 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-rose-500/20" data-v-077a43df> Reconnect </a>',2)])]))])):(m(),a("a",ce," Connect "))])])])):l("",!0)])]),x(w,{name:"fade"},{default:b(()=>[we.value?(m(),a("div",ue,[...t[35]||(t[35]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-emerald-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[s("polyline",{points:"20 6 9 17 4 12"})],-1),s("span",{class:"text-xs font-black uppercase tracking-widest"},"Settings synchronized",-1)])])):l("",!0)]),_:1})])):l("",!0)]))}},[["__scopeId","data-v-077a43df"]]);export{pe as default};
