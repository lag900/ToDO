import{y as P,q as $,s as _,c as l,a as e,i as d,u as v,n,F as j,j as A,t as f,f as F,z as I,e as y,d as C,b as M,w as R,T as U,m as g,B as S,H as D,p as H,o}from"./app-BcQGaL0j.js";import{u as G}from"./workspace-DQQ2rMut.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"p-8 max-w-4xl mx-auto space-y-12 font-outfit min-h-screen relative"},q={key:0,class:"fixed inset-0 bg-white dark:bg-slate-950 z-[100] flex flex-col items-center justify-center"},K={key:1,class:"animate-in fade-in zoom-in-95 duration-500"},Y={class:"flex justify-between items-end"},J={class:"grid grid-cols-1 md:grid-cols-3 gap-12"},Q={class:"space-y-2"},X={key:0,class:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"},Z={class:"md:col-span-2 space-y-10 relative"},ee={key:0,class:"absolute inset-0 bg-white/50 dark:bg-slate-950/50 backdrop-blur-sm z-50 flex flex-col items-center justify-center rounded-[3rem]"},te={key:1,class:"space-y-6"},se={class:"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden"},ae={class:"p-8 flex items-center justify-between border-b border-slate-50 dark:border-slate-800/50 bg-slate-50/50 dark:bg-slate-800/20"},le={class:"space-y-4"},oe=["onClick"],ie={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"4"},re={class:"pt-6 border-t border-slate-50 dark:border-slate-800/50 flex items-center justify-between"},ne={class:"flex justify-end gap-4 mt-8"},de=["disabled"],ce={key:2,class:"space-y-6"},ue={class:"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm p-8 space-y-4"},pe=["value"],be={key:0,class:"space-y-6"},ve={class:"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden border-t-4 border-t-emerald-500"},xe={class:"p-8 space-y-8"},we={class:"flex items-center justify-between"},ge={class:"flex-1 pr-4"},fe={class:"text-xs text-slate-500 mt-2 font-medium leading-relaxed"},ke={class:"text-emerald-500 font-bold"},me={key:0,class:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/10 border border-amber-100 dark:border-amber-900/20 rounded-2xl flex items-center gap-3"},he={class:"flex justify-end gap-4 mt-8"},ye=["disabled"],_e={key:1,class:"bg-white dark:bg-slate-900 rounded-[2.5rem] p-12 text-center border border-slate-100 dark:border-slate-800 font-bold text-slate-400 animate-in fade-in duration-500"},Ce={key:3,class:"space-y-6"},Se={class:"bg-white dark:bg-slate-900 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm overflow-hidden"},ze={class:"p-8 flex items-center justify-between"},Be={key:0},We={key:1,href:"/auth/google",class:"px-6 py-3 bg-slate-800 text-white hover:bg-indigo-600 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg hover:shadow-indigo-500/20"},je={key:0,class:"fixed bottom-10 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-8 py-4 rounded-3xl shadow-2xl flex items-center gap-3 z-50"},Ae={__name:"Settings",setup(Ne){const z=D(),c=P(),i=G(),p=g(!1),k=g(!1),u=g("workspace"),b=g(null),a=g({email_enabled:!0,types:["task_created","task_updated","task_completed"],exclude_self:!1}),x=g({enable_review_step:!0}),w=S(()=>{if(Array.isArray(i.workspaces))return i.workspaces.find(r=>Number(r.id)===Number(b.value))}),m=S(()=>!w.value||!c.user?!1:w.value.owner_id===c.user.id),N=[{id:"task_created",label:"A new task is added to my workspace"},{id:"task_updated",label:"An existing task is modified"},{id:"task_completed",label:"A task is marked as complete"}],B=S(()=>c.user&&i.initialized);$(async()=>{c.initialized||await c.fetchUser(),i.initialized||await i.fetchWorkspaces(),W()});const W=()=>{i.currentWorkspace?b.value=i.currentWorkspace.id:i.workspaces.length>0&&(b.value=i.workspaces[0].id),c.user?.notification_settings&&(a.value={...a.value,...c.user.notification_settings}),h()};_(()=>i.initialized,r=>{r&&W()}),_(w,r=>{r&&h()},{deep:!0});const h=()=>{if(w.value){const r=w.value.settings||{};x.value={enable_review_step:r.enable_review_step!==!1}}else x.value={enable_review_step:!0}};_(b,()=>{h()});const E=r=>{const t=a.value.types.indexOf(r);t>-1?a.value.types.splice(t,1):a.value.types.push(r)},T=async()=>{p.value=!0;try{await H.patch("/api/user/settings",{notification_settings:a.value}),await c.fetchUser(),k.value=!0,setTimeout(()=>k.value=!1,3e3)}catch(r){console.error("Failed to save settings",r)}finally{p.value=!1}},V=async()=>{if(b.value){p.value=!0;try{await i.updateWorkspaceSettings(b.value,x.value),k.value=!0,setTimeout(()=>{z.push("/dashboard")},1500)}catch(r){console.error("Failed to save workspace settings",r),alert("Failed to save workspace settings: "+(r.response?.data?.message||"Server error"))}finally{p.value=!1}}};return(r,t)=>(o(),l("div",O,[B.value?d("",!0):(o(),l("div",q,[...t[8]||(t[8]=[e("div",{class:"w-16 h-16 border-4 border-indigo-600/20 border-t-indigo-600 rounded-full animate-spin"},null,-1),e("p",{class:"mt-6 text-xs font-black uppercase tracking-[0.3em] text-slate-400 animate-pulse"},"Synchronizing Life...",-1)])])),B.value?(o(),l("div",K,[e("header",Y,[t[10]||(t[10]=e("div",null,[e("h1",{class:"text-4xl font-black text-slate-800 dark:text-white tracking-tight"},"Preferences."),e("p",{class:"text-slate-500 font-medium"},"Manage your notification and workspace behaviors.")],-1)),e("button",{onClick:t[0]||(t[0]=s=>v(z).back()),class:"p-3 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-2xl shadow-sm hover:scale-105 transition-all"},[...t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),e("div",J,[e("div",Q,[e("button",{onClick:t[1]||(t[1]=s=>u.value="notifications"),class:n([[u.value==="notifications"?"bg-indigo-600 text-white shadow-xl shadow-indigo-500/20":"text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50"],"w-full text-left px-6 py-4 rounded-2xl font-black text-sm tracking-widest uppercase transition-all"])}," Notifications ",2),e("button",{onClick:t[2]||(t[2]=s=>u.value="workspace"),class:n([[u.value==="workspace"?"bg-indigo-600 text-white shadow-xl shadow-indigo-500/20":"text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50"],"w-full text-left px-6 py-4 rounded-2xl font-black text-sm tracking-widest uppercase transition-all flex items-center justify-between"])},[t[11]||(t[11]=e("span",null,"Workspace Behavior",-1)),!v(i).currentWorkspace&&v(i).loading?(o(),l("div",X)):d("",!0)],2),e("button",{onClick:t[3]||(t[3]=s=>u.value="integrations"),class:n([[u.value==="integrations"?"bg-indigo-600 text-white shadow-xl shadow-indigo-500/20":"text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800/50"],"w-full text-left px-6 py-4 rounded-2xl font-black text-sm tracking-widest uppercase transition-all"])}," Integrations ",2),t[12]||(t[12]=e("button",{class:"w-full text-left px-6 py-4 rounded-2xl text-slate-400 font-black text-sm tracking-widest uppercase opacity-50 cursor-not-allowed"},"Profile (Soon)",-1))]),e("div",Z,[v(i).loading&&!v(i).workspaces.length?(o(),l("div",ee,[...t[13]||(t[13]=[e("div",{class:"w-12 h-12 border-4 border-indigo-600/20 border-t-indigo-600 rounded-full animate-spin"},null,-1),e("p",{class:"mt-4 text-[10px] font-black uppercase tracking-widest text-slate-400"},"Loading Preferences...",-1)])])):d("",!0),u.value==="notifications"?(o(),l("section",te,[t[18]||(t[18]=e("div",{class:"flex items-center gap-2 mb-6"},[e("div",{class:"w-1.5 h-6 bg-indigo-600 rounded-full"}),e("h2",{class:"text-xl font-black text-slate-800 dark:text-white uppercase tracking-wider"},"Email Alerts")],-1)),e("div",se,[e("div",ae,[t[14]||(t[14]=e("div",null,[e("h3",{class:"font-black text-slate-800 dark:text-white uppercase tracking-widest text-xs"},"Enable Email Notifications"),e("p",{class:"text-xs text-slate-400 mt-1 font-bold"},"Receive alerts for important workspace activity.")],-1)),e("div",{onClick:t[4]||(t[4]=s=>a.value.email_enabled=!a.value.email_enabled),class:n(["w-14 h-7 rounded-full relative transition-all cursor-pointer",a.value.email_enabled?"bg-indigo-600":"bg-slate-200 dark:bg-slate-700"])},[e("div",{class:n(["absolute top-1 left-1 w-5 h-5 rounded-full bg-white transition-all shadow-md",a.value.email_enabled?"translate-x-7":""])},null,2)],2)]),e("div",{class:n(["p-8 space-y-8 transition-all",a.value.email_enabled?"":"opacity-30 pointer-events-none"])},[e("div",null,[t[16]||(t[16]=e("label",{class:"block text-[10px] font-black uppercase tracking-widest text-slate-400 mb-4"},"Notify me when...",-1)),e("div",le,[(o(),l(j,null,A(N,s=>e("div",{key:s.id,onClick:Ee=>E(s.id),class:"flex items-center gap-4 group cursor-pointer"},[e("div",{class:n(["w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all",a.value.types.includes(s.id)?"bg-indigo-600 border-indigo-600":"border-slate-200 dark:border-slate-700 group-hover:border-indigo-400"])},[a.value.types.includes(s.id)?(o(),l("svg",ie,[...t[15]||(t[15]=[e("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):d("",!0)],2),e("span",{class:n(["text-sm font-bold transition-all",a.value.types.includes(s.id)?"text-slate-700 dark:text-slate-200":"text-slate-400"])},f(s.label),3)],8,oe)),64))])]),e("div",re,[t[17]||(t[17]=e("div",null,[e("h3",{class:"font-black text-slate-700 dark:text-slate-200 uppercase tracking-widest text-[10px]"},"Exclude my own actions"),e("p",{class:"text-[10px] text-slate-400 font-bold"},"Don't notify me for tasks I create myself.")],-1)),e("div",{onClick:t[5]||(t[5]=s=>a.value.exclude_self=!a.value.exclude_self),class:n(["w-10 h-5 rounded-full relative transition-all cursor-pointer",a.value.exclude_self?"bg-indigo-600":"bg-slate-200 dark:bg-slate-700"])},[e("div",{class:n(["absolute top-0.5 left-0.5 w-4 h-4 rounded-full bg-white transition-all shadow-sm",a.value.exclude_self?"translate-x-5":""])},null,2)],2)])],2)]),e("div",ne,[e("button",{onClick:T,disabled:p.value,class:"px-10 py-4 bg-indigo-600 text-white rounded-[1.5rem] font-black uppercase tracking-widest text-xs shadow-xl shadow-indigo-500/20 hover:bg-indigo-700 transition-all active:scale-95 disabled:opacity-50"},f(p.value?"SAVING...":"SAVE CHANGES"),9,de)])])):d("",!0),u.value==="workspace"?(o(),l("section",ce,[t[28]||(t[28]=e("div",{class:"flex items-center gap-2 mb-6"},[e("div",{class:"w-1.5 h-6 bg-emerald-500 rounded-full"}),e("h2",{class:"text-xl font-black text-slate-800 dark:text-white uppercase tracking-wider"},"Workspace Behavior")],-1)),e("div",ue,[t[19]||(t[19]=e("label",{for:"workspace-selector",class:"block text-[10px] font-black uppercase tracking-widest text-slate-400"},"Select Workspace to Configure",-1)),F(e("select",{id:"workspace-selector",onChange:h,"onUpdate:modelValue":t[6]||(t[6]=s=>b.value=s),class:"w-full h-14 bg-slate-50 dark:bg-slate-800 border-none rounded-2xl px-6 text-sm font-bold shadow-sm outline-none transition-all"},[(o(!0),l(j,null,A(v(i).workspaces,s=>(o(),l("option",{key:s.id,value:s.id},f(s.name),9,pe))),128))],544),[[I,b.value]])]),w.value?(o(),l("div",be,[e("div",ve,[e("div",xe,[e("div",we,[e("div",ge,[t[24]||(t[24]=e("h3",{class:"font-black text-slate-800 dark:text-white uppercase tracking-widest text-sm"},"Enable Review Column",-1)),e("p",fe,[t[20]||(t[20]=y(" When enabled, a dedicated ",-1)),t[21]||(t[21]=e("b",null,'"Review"',-1)),t[22]||(t[22]=y(" column will appear on your kanban board for ",-1)),e("span",ke,f(w.value.name),1),t[23]||(t[23]=y(". ",-1))])]),e("div",{onClick:t[7]||(t[7]=s=>m.value?x.value.enable_review_step=!x.value.enable_review_step:null),class:n(["w-16 h-8 rounded-full relative transition-all shadow-inner",x.value.enable_review_step?"bg-emerald-500":"bg-slate-200 dark:bg-slate-700",m.value?"cursor-pointer":"opacity-50 cursor-not-allowed"])},[e("div",{class:n(["absolute top-1 left-1 w-6 h-6 rounded-full bg-white transition-all shadow-md",x.value.enable_review_step?"translate-x-8":""])},null,2)],2)]),m.value?d("",!0):(o(),l("div",me,[...t[25]||(t[25]=[C('<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-amber-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" data-v-391056b3><circle cx="12" cy="12" r="10" data-v-391056b3></circle><line x1="12" y1="16" x2="12" y2="12" data-v-391056b3></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-391056b3></line></svg><p class="text-[10px] font-bold text-amber-600 dark:text-amber-400 uppercase tracking-widest" data-v-391056b3>View Only Â· You must be the owner to change settings</p>',2)])])),t[26]||(t[26]=e("div",{class:"flex items-center justify-between pt-6 border-t border-slate-50 dark:border-slate-800/50"},[e("div",null,[e("h3",{class:"font-black text-slate-800 dark:text-white uppercase tracking-widest text-xs"},"Custom Board Workflow (Soon)"),e("p",{class:"text-xs text-slate-400 mt-1 font-bold"},"Customize your kanban column names and order.")]),e("div",{class:"px-3 py-1 bg-slate-100 dark:bg-slate-800 text-[10px] font-black text-slate-400 uppercase rounded-lg"},"Pro")],-1))])]),e("div",he,[e("button",{onClick:V,disabled:p.value||!m.value,class:"px-10 py-4 bg-emerald-500 text-white rounded-[1.5rem] font-black uppercase tracking-widest text-xs shadow-xl shadow-emerald-500/30 hover:bg-emerald-600 transition-all active:scale-95 disabled:opacity-50"},f(p.value?"UPDATING...":"UPDATE WORKSPACE"),9,ye)])])):v(i).loading?d("",!0):(o(),l("div",_e,[...t[27]||(t[27]=[C('<div class="w-20 h-20 bg-slate-50 dark:bg-slate-800 rounded-3xl flex items-center justify-center mx-auto mb-6 text-slate-200" data-v-391056b3><svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-391056b3><circle cx="12" cy="12" r="10" data-v-391056b3></circle><line x1="12" y1="16" x2="12" y2="12" data-v-391056b3></line><line x1="12" y1="8" x2="12.01" y2="8" data-v-391056b3></line></svg></div><p class="uppercase tracking-widest text-xs" data-v-391056b3>Select a workspace from the list above to view settings.</p>',2)])]))])):d("",!0),u.value==="integrations"?(o(),l("section",Ce,[t[31]||(t[31]=e("div",{class:"flex items-center gap-2 mb-6"},[e("div",{class:"w-1.5 h-6 bg-blue-500 rounded-full"}),e("h2",{class:"text-xl font-black text-slate-800 dark:text-white uppercase tracking-wider"},"Integrations")],-1)),e("div",Se,[e("div",ze,[t[30]||(t[30]=C('<div class="flex items-center gap-4" data-v-391056b3><div class="w-12 h-12 bg-white rounded-full shadow-sm flex items-center justify-center" data-v-391056b3><svg class="w-6 h-6" viewBox="0 0 24 24" data-v-391056b3><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" data-v-391056b3></path><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-1 .67-2.28 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" data-v-391056b3></path><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" data-v-391056b3></path><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" data-v-391056b3></path></svg></div><div data-v-391056b3><h3 class="font-black text-slate-800 dark:text-white uppercase tracking-widest text-sm" data-v-391056b3>Google Calendar</h3><p class="text-xs text-slate-500 mt-1 font-medium" data-v-391056b3>Sync task start times as events to your primary calendar.</p></div></div>',1)),v(c).user?.has_google_integration?(o(),l("div",Be,[...t[29]||(t[29]=[e("span",{class:"px-4 py-2 bg-emerald-50 text-emerald-600 rounded-xl text-[10px] font-black uppercase tracking-widest flex items-center gap-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"4"},[e("polyline",{points:"20 6 9 17 4 12"})]),y(" Connected ")],-1)])])):(o(),l("a",We," Connect "))])])])):d("",!0)])]),M(U,{name:"fade"},{default:R(()=>[k.value?(o(),l("div",je,[...t[32]||(t[32]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 text-emerald-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[e("polyline",{points:"20 6 9 17 4 12"})],-1),e("span",{class:"text-xs font-black uppercase tracking-widest"},"Settings synchronized",-1)])])):d("",!0)]),_:1})])):d("",!0)]))}},$e=L(Ae,[["__scopeId","data-v-391056b3"]]);export{$e as default};
